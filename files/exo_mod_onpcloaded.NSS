////////////////////////////////////////////////////////////////////////////////
//
//  System Name : ALFA Configuration File
//     Filename : acf_mod_onpcloaded.nss
//    $Revision:: 198        $ current version of the file
//        $Date:: 2006-12-23#$ date the file was created or modified
//       Author : Cipher
//
//  Local Variable Prefix = None
//
//  Description
//  This script calls the module's OnPCLoaded event, and any custom code added
//  by this server. It is usually used to set up server-specific options.
//  This file should NOT be overwriten in ACR updates so as to preserve any of
//  the server's customized code they may have added.
//
//  Revision History
//  2006/12/22/  Cipher  Inception
////////////////////////////////////////////////////////////////////////////////

////////////////////////////////////////////////////////////////////////////////
// Includes ////////////////////////////////////////////////////////////////////
////////////////////////////////////////////////////////////////////////////////

#include "acr_mod_events_i"

////////////////////////////////////////////////////////////////////////////////
// Constants ///////////////////////////////////////////////////////////////////
////////////////////////////////////////////////////////////////////////////////

////////////////////////////////////////////////////////////////////////////////
// Structures //////////////////////////////////////////////////////////////////
////////////////////////////////////////////////////////////////////////////////

////////////////////////////////////////////////////////////////////////////////
// Global Variables ////////////////////////////////////////////////////////////
////////////////////////////////////////////////////////////////////////////////

////////////////////////////////////////////////////////////////////////////////
// Function Prototypes /////////////////////////////////////////////////////////
////////////////////////////////////////////////////////////////////////////////

////////////////////////////////////////////////////////////////////////////////
// Function Definitions ////////////////////////////////////////////////////////
////////////////////////////////////////////////////////////////////////////////

void main() {
    ACR_ModuleOnPCLoaded();

    // Custom code goes below this line.

    //  Add Exodus 3000 xp code start.
    object oPC = GetEnteringObject();
    if (GetSkillRank(0, oPC, TRUE) == 2)  {
    // This is used by the ACR skill system to track whether a PC has been adapted to the new skills:
    //    0 = unadapted,  1 = adaption/rebuild in progress, 2 = adapted/complete.
    //   Only follow the 3000 xp award branch if rebuilding is complete.
         int nXP = GetXP(oPC);
         if (nXP < 3000) {
              ACR_GiveXPToPC(oPC, (3000-nXP));
         }
     }
}