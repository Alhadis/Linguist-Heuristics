'\" te
.\" Copyright © 2005, Sun Microsystems, Inc. All Rights Reserved
.\" Copyright 1989 AT&T
.TH chkey 1 "2009 年 12 月 10 日" "SunOS 5.11" "用户命令"
.SH 名称
chkey \- 更改用户的安全 RPC 密钥对
.SH 用法概要
.LP
.nf
\fBchkey\fR [\fB-p\fR] [\fB-s\fR nis | files | ldap] 
     [\fB-m\fR \fI<mechanism>\fR]
.fi

.SH 描述
.sp
.LP
\fBchkey\fR 用于更改用户的安全 \fBRPC\fR 公钥和密钥对。\fBchkey\fR 将提示输入旧的安全 RPC 口令，并通过对密钥进行解密验证口令是否正确。如果用户尚未使用 \fBkeylogin\fR(1) 通过 \fBkeyserv\fR(1M) 对密钥进行解密和存储，则 \fBchkey\fR 将通过本地 \fBkeyserv\fR(1M) 守护进程注册密钥。如果安全 RPC 口令与登录口令不匹配，\fBchkey\fR 将提示输入登录口令。\fBchkey\fR 可使用登录口令对用户的 Diffie-Hellman（192 位）加密密钥进行加密。\fBchkey\fR 也可对配置的验证机制的其他 Diffie-Hellman 密钥进行加密。
.sp
.LP
\fBchkey\fR 可确保登录口令和安全 RPC 口令保持相同，从而实现口令遮蔽。请参见 \fBshadow\fR(4)。
.sp
.LP
密钥对可存储在 \fB/etc/publickey\fR 文件（请参见 \fBpublickey\fR(4)）或 \fBNIS\fR \fBpublickey\fR 映射中。如果生成了新密钥，将通过本地 \fBkeyserv\fR(1M) 守护进程进行注册。
.sp
.LP
使用 \fB-m\fR 选项后跟验证机制名称可以对特定机制的密钥进行更改或重新加密。使用多个 \fB-m\fR 选项可以更改一个或多个密钥。
.sp
.LP
如果未使用 \fB-s\fR 选项指定 \fBpublickey\fR 的源，则 \fBchkey\fR 将查询名称服务转换配置文件中的 \fBpublickey\fR 条目。请参见 \fBnsswitch.conf\fR(4)。如果 \fBpublickey\fR 条目指定了一个且仅指定了一个源，则 \fBchkey\fR 将更改指定名称服务中的密钥。但是，如果列出了多项名称服务，\fBchkey\fR 将无法确定要更新的源，会显示一条错误消息。用户应该使用 \fB-s\fR 选项显式指定源。
.sp
.LP
不允许非 root 用户更改 \fBfiles\fR 数据库中的密钥对。
.SH 选项
.sp
.LP
支持以下选项：
.sp
.ne 2
.mk
.na
\fB\fB-p\fR\fR
.ad
.RS 18n
.rt  
使用用户的登录口令对现有密钥进行重新加密。
.RE

.sp
.ne 2
.mk
.na
\fB\fB-s\fR \fBnis\fR\fR
.ad
.RS 18n
.rt  
更新 \fBNIS\fR 数据库。
.RE

.sp
.ne 2
.mk
.na
\fB\fB-s\fR \fBfiles\fR\fR
.ad
.RS 18n
.rt  
更新 \fBfiles\fR 数据库。
.RE

.sp
.ne 2
.mk
.na
\fB\fB-s\fR \fBldap\fR\fR
.ad
.RS 18n
.rt  
更新 LDAP 数据库。
.RE

.sp
.ne 2
.mk
.na
\fB\fB-m\fR\fI <mechanism>\fR\fR
.ad
.RS 18n
.rt  
对指定机制的密钥进行更改或重新加密。
.RE

.SH 文件
.sp
.ne 2
.mk
.na
\fB\fB/etc/nsswitch.conf\fR\fR
.ad
.RS 22n
.rt  

.RE

.sp
.ne 2
.mk
.na
\fB\fB/etc/publickey\fR\fR
.ad
.RS 22n
.rt  

.RE

.SH 属性
.sp
.LP
有关下列属性的说明，请参见 \fBattributes\fR(5)：
.sp

.sp
.TS
tab() box;
cw(2.75i) |cw(2.75i) 
lw(2.75i) |lw(2.75i) 
.
属性类型属性值
_
可用性system/core-os
.TE

.SH 另请参见
.sp
.LP
\fBkeylogin\fR(1)、\fBkeylogout\fR(1)、\fBkeyserv\fR(1M)、\fBnewkey\fR(1M)、\fBnsswitch.conf\fR(4)、\fBpublickey\fR(4)、\fBshadow\fR(4)、\fBattributes\fR(5)
