'\" te
.\" Copyright (c) 2007, 2015, Oracle and/or its affiliates.All rights reserved.
.TH mt 1 "2015 年 2 月 24 日" "SunOS 5.11" "用户命令"
.SH 名称
mt \- 磁带控制
.SH 用法概要
.LP
.nf
\fBmt\fR [\fB-f\fR \fItapename\fR] \fIcommand\fR... [\fIcount\fR]
.fi

.SH 描述
.sp
.LP
\fBmt\fR 实用程序向磁带机发送命令。如果未指定 \fB-f\fR \fItapename\fR，则使用环境变量 \fBTAPE\fR。如果 \fBTAPE\fR 不存在，\fBmt\fR 将使用设备 \fB/dev/rmt/0n\fR。
.SH 选项
.sp
.LP
支持以下选项：
.sp
.ne 2
.mk
.na
\fB\fB-f\fR \fItapename\fR\fR
.ad
.RS 15n
.rt  
指定原始磁带设备。
.RE

.SH 操作数
.sp
.LP
支持下列操作数：
.sp
.ne 2
.mk
.na
\fB\fIcount\fR\fR
.ad
.RS 11n
.rt  
请求的操作要执行的次数。缺省情况下，\fBmt\fR 执行 \fIcommand\fR 一次。可通过指定 \fIcount\fR 多次执行 \fIcommand\fR。
.RE

.sp
.ne 2
.mk
.na
\fB\fIcommand\fR\fR
.ad
.RS 11n
.rt  
支持以下可发送到磁带机的可用命令。仅需要指定唯一标识 \fIcommand\fR 所需的字符数。
.sp
.ne 2
.mk
.na
\fB\fBasf\fR\fR
.ad
.RS 10n
.rt  
指定到 \fIcount\fR 文件编号的绝对空间。此命令等效于 \fBrewind\fR 后跟 \fBfsf\fR \fIcount\fR。
.RE

.sp
.ne 2
.mk
.na
\fB\fBbsf\fR\fR
.ad
.RS 10n
.rt  
后退 \fIcount\fR 个 EOF 标记。磁带定位在 EOF 标记的磁带开始面上。
.RE

.sp
.ne 2
.mk
.na
\fB\fBbsr\fR\fR
.ad
.RS 10n
.rt  
后退 \fIcount\fR 个记录。
.RE

.sp
.ne 2
.mk
.na
\fB\fBbssf\fR\fR
.ad
.RS 10n
.rt  
后退请求的序列文件标记数。序列文件标记是文件标记连续的情况，在文件标记之间没有其他任何块。该数量参数指定要隔开的序列文件标记数。例如，\fBbssf 4\fR 向后搜索到存在 4 个序列文件标记的位置，然后定位到第 4 个文件标记的 BOP 面。 
.sp
并非所有磁带机都支持此命令。
.RE

.sp
.ne 2
.mk
.na
\fB\fBeof\fR\fR
.ad
.br
.na
\fB\fBweof\fR\fR
.ad
.RS 10n
.rt  
在磁带上的当前位置写入 \fIcount\fR EOF 标记。
.RE

.sp
.ne 2
.mk
.na
\fB\fBfsf\fR\fR
.ad
.RS 10n
.rt  
前进 \fIcount\fR 个 EOF 标记。磁带定位在文件的第一个块上。
.RE

.sp
.ne 2
.mk
.na
\fB\fBfsr\fR\fR
.ad
.RS 10n
.rt  
前进 \fIcount\fR 个记录。
.RE

.sp
.ne 2
.mk
.na
\fB\fBfssf\fR\fR
.ad
.RS 10n
.rt  
前进请求的序列文件标记数量。序列文件标记是文件标记连续的情况，在文件标记之间没有其他任何块。该数量参数指定要隔开的序列文件标记数。例如，\fBfssf 4\fR 向前搜索到存在 4 个序列文件标记的位置，然后定位到第 4 个文件标记之后。
.sp
并非所有磁带机都支持此命令。
.RE

.sp
.ne 2
.mk
.na
\fB\fBload\fR\fR
.ad
.RS 10n
.rt  
请求磁带机负载以及建立当前介质线程。并非所有磁带机都支持。
.RE

.sp
.ne 2
.mk
.na
\fB\fBlock\fR\fR
.ad
.RS 10n
.rt  
阻止移除介质。
.RE

.sp
.ne 2
.mk
.na
\fB\fBnbsf\fR\fR
.ad
.RS 10n
.rt  
后退 \fIcount\fR 个文件。磁带定位在文件的第一个块上。此命令等效于 \fIcount+1\fR 个 \fBbsf\fR 后跟一个 \fBfsf\fR。
.RE

.sp
.ne 2
.mk
.na
\fB\fBseek\fR\fR
.ad
.RS 10n
.rt  
定位到请求的逻辑磁带位置。
.RE

.sp
.ne 2
.mk
.na
\fB\fBtell\fR\fR
.ad
.RS 10n
.rt  
获取并列显当前逻辑磁带位置。
.RE

.sp
.ne 2
.mk
.na
\fB\fBunlock\fR\fR
.ad
.RS 10n
.rt  
允许移除介质。
.RE

如果在以下任一命令中指定了 \fIcount\fR，则将忽略 \fIcount\fR，并且命令仅执行一次。
.sp
.ne 2
.mk
.na
\fB\fBconfig\fR\fR
.ad
.RS 16n
.rt  
从驱动程序中读取磁带机当前配置，并将其以 \fBst.conf\fR 格式显示。有关字段的定义及其含义，请参见 \fBst\fR(7D)。
.RE

.sp
.ne 2
.mk
.na
\fB\fBeom\fR\fR
.ad
.RS 16n
.rt  
定位到磁带上已记录介质的末尾。这对将文件附加到以前写入的磁带上很有用。
.RE

.sp
.ne 2
.mk
.na
\fB\fBerase\fR\fR
.ad
.RS 16n
.rt  
擦除整个磁带。 
.sp
某些磁带机的选项设置仅能擦除部分磁带。请确保选择正确的设置来擦除整个磁带。擦除磁带可能需要很长时间，具体取决于设备和/或磁带。有关时间的详细信息，请参见特定的设备手册。
.RE

.sp
.ne 2
.mk
.na
\fB\fBforcereserve\fR\fR
.ad
.RS 16n
.rt  
尝试打破其他启动器发布的 SCSI II 保留区。此命令完成时，将不为当前启动器保留磁带机，但可供使用。执行此命令需要超级用户特权。
.RE

.sp
.ne 2
.mk
.na
\fB\fBoffline\fR\fR
.ad
.br
.na
\fB\fBrewoffl\fR\fR
.ad
.RS 16n
.rt  
将磁带倒带，并在适当的情况下通过卸载磁带使磁带机脱机。
.RE

.sp
.ne 2
.mk
.na
\fB\fBrelease\fR\fR
.ad
.RS 16n
.rt  
重新建立缺省的关闭时释放行为。
.RE

.sp
.ne 2
.mk
.na
\fB\fBreserve\fR\fR
.ad
.RS 16n
.rt  
允许磁带机在设备关闭后保持保留状态。随后必须显式释放磁带机。
.RE

.sp
.ne 2
.mk
.na
\fB\fBretension\fR\fR
.ad
.RS 16n
.rt  
将磁带完全倒带，然后前进到磁带末尾再回到磁带头以缓解磁带紧张状态。
.RE

.sp
.ne 2
.mk
.na
\fB\fBrewind\fR\fR
.ad
.RS 16n
.rt  
磁带倒带。
.RE

.sp
.ne 2
.mk
.na
\fB\fBstatus\fR\fR
.ad
.RS 16n
.rt  
列显有关磁带机的状态信息。
.sp
状态信息可能包括磁带机报告的感知键、最后操作的结果和重试次数、以文件数为单位进行报告的当前磁带位置以及从该文件开头进行计算的块数。它可能还报告在磁带机中加载了 WORM 介质。
.RE

.RE

.SH 退出状态
.sp
.ne 2
.mk
.na
\fB\fB0\fR\fR
.ad
.RS 5n
.rt  
所有操作都成功。
.RE

.sp
.ne 2
.mk
.na
\fB\fB1\fR\fR
.ad
.RS 5n
.rt  
命令不可识别，或者 \fBmt\fR 无法打开指定的磁带机。
.RE

.sp
.ne 2
.mk
.na
\fB\fB2\fR\fR
.ad
.RS 5n
.rt  
某个操作失败。
.RE

.SH 文件
.sp
.ne 2
.mk
.na
\fB\fB/dev/rmt/*\fR\fR
.ad
.RS 14n
.rt  
磁带机接口
.RE

.SH 属性
.sp
.LP
有关下列属性的说明，请参见 \fBattributes\fR(5)：
.sp

.sp
.TS
tab() box;
cw(2.75i) |cw(2.75i) 
lw(2.75i) |lw(2.75i) 
.
属性类型\fB\fR属性值\fB\fR
_
可用性\fB\fR\fBsystem/core-os\fR
.TE

.SH 另请参见
.sp
.LP
\fBtar\fR(1)、\fBtcopy\fR(1)、\fBar.h\fR(3HEAD)、\fBattributes\fR(5)、\fBmtio\fR(7I)、\fBst\fR(7D)
.SH 已知问题
.sp
.LP
并非所有设备都支持全部选项。有些选项与硬件有关。请参考对应的设备手册页。
.sp
.LP
\fBmt\fR 与体系结构有关。不支持异构操作（即 SPARC 到 x86 或相反）。
