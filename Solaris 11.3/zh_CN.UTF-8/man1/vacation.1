'\" te
.\" Copyright (c) 2005, Sun Microsystems, Inc. All Rights Reserved
.\" Copyright 1989 AT&T
.TH vacation 1 "2005 年 8 月 20 日" "SunOS 5.11" "用户命令"
.SH 名称
vacation \- 自动回复邮件
.SH 用法概要
.LP
.nf
\fBvacation\fR [\fB-I\fR]
.fi

.LP
.nf
\fBvacation\fR [\fB-a\fR \fIalias\fR] [\fB-e\fR \fIfilter_file\fR] [\fB-f\fR \fIdatabase_file\fR] 
     [\fB-j\fR] [\fB-m\fR \fImessage_file\fR] [\fB-s\fR \fIsender\fR] [\fB-t\fR\fIN\fR] \fIusername\fR
.fi

.LP
.nf
\fBvacation\fR [\fB-f database_file\fR] \fB-l\fR
.fi

.SH 描述
.sp
.LP
\fBvacation\fR 实用程序自动回复传入邮件。
.SS "安装"
.sp
.LP
安装包括一个设置 \fBvacation\fR 基本配置的交互程序。
.sp
.LP
要安装 \fBvacation\fR，请在命令行上不带参数的键入 vacation。该程序创建一个 \fB\&.vacation.msg\fR 文件（其中包含启用 \fBvacation\fR 时自动发送到所有发件人的邮件），并启动一个编辑器供您用来修改该邮件。（请参见“用法”部分。）调用哪个编辑器是由 \fBVISUAL\fR 或 \fBEDITOR\fR 环境变量决定的，在未设置这些环境变量的情况下则是由 \fBvi\fR(1) 决定的。
.sp
.LP
如果您的起始目录中不存在 \fB\&.forward\fR 文件，则还会创建该文件。在创建之后，\fB\&.forward\fR 文件将包含一个如下形式的行：
.sp
.LP
传入邮件的一个副本被发送到 \fIusername\fR，另一个副本被传输到 \fBvacation\fR：
.sp
.in +2
.nf
\e\fIusername\fR, "|/usr/bin/vacation \fIusername\fR"
.fi
.in -2

.sp
.LP
如果您的起始目录中存在 \fB\&.forward\fR 文件，将询问您是否要将其删除，删除该文件会禁用 \fBvacation\fR 并结束安装。
.sp
.LP
该程序将自动创建 \fB\&.vacation.pag\fR 和 \fB\&.vacation.dir\fR，其中包含启用 \fBvacation\fR 时发件人的列表。
.SS "激活和禁用"
.sp
.LP
\fB\&.forward\fR 文件是否存在决定了 \fBvacation\fR 处于启用还是禁用状态。要禁用 \fBvacation\fR，请删除 \fB\&.forward\fR 文件或将其移动到一个新名称。
.SS "初始化"
.sp
.LP
\fB-I\fR 选项清除 \fBvacation\fR 日志文件 \fB\&.vacation.pag\fR 和 \fB\&.vacation.dir\fR，从而清除前一 \fBvacation\fR 会话中的发件人列表。（请参见“选项”部分。）
.SS "其他配置"
.sp
.LP
\fBvacation\fR 提供了不在安装过程中使用的配置选项，这些选项包括 \fB-a\fR、\fB-e\fR、\fB-f\fR、\fB-j\fR、\fB-m\fR、\fB-s\fR 和 \fB-t\fR。（请参见“选项”部分。）
.SS "报告"
.sp
.LP
\fBvacation\fR 提供了一个报告选项 \fB-l\fR。请参见\fB\fR“选项”部分。
.SH 选项
.sp
.LP
支持以下选项： 
.sp
.ne 2
.mk
.na
\fB\fB-I\fR\fR
.ad
.RS 6n
.rt  
初始化 \fB\&.vacation.pag\fR 和 \fB\&.vacation.dir\fR 文件并启用 \fBvacation\fR。如果未指定 \fB-I\fR 标志，并且提供了 \fIuser\fR 参数，则 \fBvacation\fR 将读取标准输入中的第一行（\fBFrom:\fR 行，没有冒号）。如果不存在该行，则会生成错误消息。
.RE

.sp
.LP
选项 \fB-a\fR、\fB-e\fR、\fB-f\fR、\fB-j\fR、\fB-m\fR、\fB-s\fR 和 \fB-t\fR 是在 \fB\&.forward\fR 文件中与 \fBvacation\fR 一起使用的配置选项，不在命令行上使用。例如，
.sp
.in +2
.nf
\e\fIusername\fR, "|/usr/bin/vacation \fB-t1m\fR \fIusername\fR"
.fi
.in -2

.sp
.LP
每分钟重复向发件人发送回复。
.sp
.ne 2
.mk
.na
\fB\fB-a\fR \fIalias\fR\fR
.ad
.RS 20n
.rt  
表示 \fIalias\fR 是运行 \fBvacation\fR 的用户的有效别名之一，因此发送到该别名的邮件将生成回复。
.RE

.sp
.ne 2
.mk
.na
\fB\fB-e\fR \fIfilter_file\fR\fR
.ad
.RS 20n
.rt  
使用 \fIfilter_file\fR 而非 \fB\&.vacation.filter\fR 作为域和电子邮件地址过滤器的来源。
.RE

.sp
.ne 2
.mk
.na
\fB\fB-f\fR \fIdatabase_file\fR\fR
.ad
.RS 20n
.rt  
使用 \fIdatabase_file\fR 而非 \fB\&.vacation\fR 作为数据库文件的基名。
.RE

.sp
.ne 2
.mk
.na
\fB\fB-j\fR\fR
.ad
.RS 20n
.rt  
不检查收件人是否出现在 \fBTo:\fR 或 \fBCc:\fR 行中。警告：使用此选项会导致休假回复被发送到邮递列表和其他不合适的位置；因此强烈建议不要使用此选项。
.RE

.sp
.ne 2
.mk
.na
\fB\fB-m\fR \fImessage_file\fR\fR
.ad
.RS 20n
.rt  
使用 \fB~/\fImessage_file\fR\fR 而非 \fB~/.vacation.msg\fR 作为要发送的回复邮件。\fImessage_file\fR 是所需的休假邮件文件的相对路径。为防止出现目录/文件“未找到”错误，\fImessage_file\fR 应当与 \fB~/.forward\fR 位于同一磁盘分区上。
.RE

.sp
.ne 2
.mk
.na
\fB\fB-s\fR \fIsender\fR\fR
.ad
.RS 20n
.rt  
对 \fIsender\fR 的回复而非从传入邮件的 UNIX \fBFrom\fR 行读取的值。
.RE

.sp
.ne 2
.mk
.na
\fB\fB-t\fR\fIN\fR\fR
.ad
.RS 20n
.rt  
更改重复向同一发件人发送回复的间隔。缺省值为 1 周。结尾 \fBs\fR、\fBm\fR、\fBh\fR、\fBd\fR 或 \fBw\fR 分别将 \fIN\fR 的单位标为秒、分钟、小时、天或周。
.RE

.sp
.LP
\fB-l\fR 选项既不用于初始化也不用于配置，仅用于报告。\fB-l\fR 选项还可以与 \fB-f\fR 选项结合使用。
.sp
.ne 2
.mk
.na
\fB\fB-l\fR\fR
.ad
.RS 6n
.rt  
 列出自上次调用 \fBvacation -I\fR 以来已将回复发送到的地址以及日期和时间戳。 
.RE

.SH 用法
.sp
.LP
\fB\&.vacation.msg\fR 的标题应当至少包含一个 \fBSubject:\fR 行（不应当包括 \fBTo:\fR 行）。例如：
.sp
.in +2
.nf
\fBSubject: I am on vacation
I am on vacation until July 22.  If you have something urgent,
please contact Joe Jones (jones@fB0).
   	--John\fR
.fi
.in -2
.sp

.sp
.LP
如果字符串 \fB$SUBJECT\fR 出现在 \fB\&.vacation.msg\fR 文件中，则在发送回复时会使用原始邮件的主题将其替换。因此，如下所示的 \fB\&.vacation.msg\fR 文件
.sp
.in +2
.nf
\fBSubject: I am on vacation
I am on vacation until July 22.
Your mail regarding "$SUBJECT" will be read when I return.
If you have something urgent, please contact
Joe Jones (jones@fB0).
   	--John\fR
.fi
.in -2
.sp

.sp
.LP
在回复中将包括邮件的主题。
.sp
.LP
如果 \fBTo:\fR 或 \fBCc:\fR 行没有列出原始邮件发送到的用户，或者没有列出其别名中的一个，如果初始 \fBFrom\fR 行包括字符串 \fB-REQUEST@\fR 或者标题中包括 \fBPrecedence:\fR \fBbulk\fR \fB或\fR \fBPrecedence:\fR \fBjunk\fR 行，则不会发送邮件。
.sp
.LP
\fBvacation\fR 也不会回复来自 \fBpostmaster\fR 或 \fBMailer-Daemon\fR 的邮件。
.sp
.LP
除了以上条件之外，如果存在 \fB\&.vacation.filter\fR 文件，则将使用该文件来进一步限制要将回复发送到的地址集。该文件中的每行都应当是一个域名、电子邮件地址、否定域名或否定电子邮件地址。否定行以单字符 \fB!\fR 开头。
.sp
.LP
每个行都将按列出顺序与发件人地址进行比较。如果除了大小写之外（将忽略大小写），发件人地址完全相同，则包含电子邮件地址的行匹配。如果发件人地址是 \fIsomething\fR\fB @\fR\fIdomain-name\fR 或 \fIsomething\fR\fB@\fR\fIsomething.domain-name\fR，则包含域名的行匹配。如果第一个匹配项是一个非否定条目，则会发送回复。如果第一个匹配项是一个否定条目或者不存在匹配的行，则不会发送答复。
.sp
.LP
样例过滤器文件可能类似下面这样：
.sp
.in +2
.nf
!host.subdomain.sun.com
sun.com
!wife@mydomain.com
mydomain.com
onefriend@hisisp.com
anotherfriend@herisp.com
.fi
.in -2
.sp

.sp
.LP
将忽略空白行以及以注释字符 “\fB#\fR” 开头的行。
.SH 文件
.sp
.LP
\fB~/.forward\fR
.sp
.LP
\fB~/.vacation.filter\fR
.sp
.LP
\fB~/.vacation.msg\fR
.sp
.LP
发件人列表将保留在您的起始目录中的 \fBdbm\fR 格式文件 \fB\&.vacation.pag\fR 和 \fB\&.vacation.dir\fR 中。这些文件是 \fBdbm\fR 文件，无法直接通过文本编辑器查看。
.SH 属性
.sp
.LP
有关下列属性的说明，请参见 \fBattributes\fR(5)：
.sp

.sp
.TS
tab() box;
cw(2.75i) |cw(2.75i) 
lw(2.75i) |lw(2.75i) 
.
属性类型属性值
_
可用性service/network/smtp/sendmail
.TE

.SH 另请参见
.sp
.LP
\fBvi\fR(1)、\fBsendmail\fR(1M)、\fBgetusershell\fR(3C)、\fBaliases\fR(4)、\fBshells\fR(4)、\fBattributes\fR(5)
