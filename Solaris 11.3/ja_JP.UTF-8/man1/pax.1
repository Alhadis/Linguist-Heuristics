'\" te
.\" Copyright (c) 1992, X/Open Company Limited All Rights Reserved
.\" Portions Copyright (c) 2008, 2012, Oracle and/or its affiliates.All rights reserved.
.\" Sun Microsystems, Inc. gratefully acknowledges The Open Group for permission to reproduce portions of its copyrighted documentation. Original documentation from The Open Group can be obtained online at http://www.opengroup.org/bookstore/.
.\" The Institute of Electrical and Electronics Engineers and The Open Group, have given us permission to reprint portions of their documentation. In the following statement, the phrase "this text" refers to portions of the system documentation. Portions of this text are reprinted and reproduced in electronic form in the Sun OS Reference Manual, from IEEE Std 1003.1, 2004 Edition, Standard for Information Technology -- Portable Operating System Interface (POSIX), The Open Group Base Specifications Issue 6, Copyright (C) 2001-2004 by the Institute of Electrical and Electronics Engineers, Inc and The Open Group. In the event of any discrepancy between these versions and the original IEEE and The Open Group Standard, the original IEEE and The Open Group Standard is the referee document. The original Standard can be obtained online at http://www.opengroup.org/unix/online.html. This notice shall appear on any product containing this material.
.TH pax 1 "2012 年 2 月 7 日" "SunOS 5.11" "ユーザーコマンド"
.SH 名前
pax \- 移植可能なアーカイブの交換
.SH 形式
.LP
.nf
\fBpax\fR [\fB-cdnv\fR] [\fB-H\fR | \fB-L\fR] [\fB-f\fR \fIarchive\fR] [\fB-o\fR \fIoptions\fR]... 
     [\fB-s\fR \fIreplstr\fR]... [\fIpattern\fR]...
.fi

.LP
.nf
\fBpax\fR \fB-r\fR [\fB-cdiknuv@/\fR] [\fB-H\fR | \fB-L\fR] [\fB-f\fR \fIarchive\fR] [\fB-o\fR \fIoptions\fR]... 
     [\fB-p\fR \fIstring\fR]... [\fB-s\fR \fIreplstr\fR]... [\fIpattern\fR]...
.fi

.LP
.nf
\fBpax\fR \fB-w\fR [\fB-dituvX@/\fR] [\fB-H\fR | \fB-L\fR] [\fB-b\fR \fIblocksize\fR] [\fB-a\fR] 
     [\fB-f\fR \fIarchive\fR] [\fB-o\fR \fIoptions\fR]... [\fB-s\fR \fIreplstr\fR]... 
     [\fB-x\fR \fIformat\fR] [\fIfile\fR]...
.fi

.LP
.nf
\fBpax\fR \fB-r\fR \fB-w\fR [\fB-diklntuvX@/\fR] [\fB-H\fR | \fB-L\fR] [\fB-o\fR \fIoptions\fR]... 
     [\fB-p\fR \fIstring\fR]... [\fB-s\fR \fIreplstr\fR]... [\fIfile\fR]... \fIdirectory\fR
.fi

.SH 機能説明
.sp
.LP
\fBpax\fR は、アーカイブファイルの読み取りと書き込み、そのメンバーのリストの書き込み、およびディレクトリ階層のコピーをします。さまざまなアーカイブ形式がサポートされています。\fB-x\fR \fIformat\fR オプションを参照してください。
.SS "操作のモード"
.sp
.LP
実行されるアクションは、\fB-r\fR オプションと \fB-w\fR オプションが存在するかどうかによって異なります。\fB-r\fR と \fB-w\fR の 4 つの組み合わせは、\fBlist\fR、\fBread\fR、\fBwrite\fR、および \fBcopy\fR モードの 4 つの操作モードと呼ばれ、それぞれ「形式」に示されている 4 つの形式に対応します。
.sp
.ne 2
.mk
.na
\fB\fBlist\fR\fR
.ad
.RS 9n
.rt  
\fBlist\fR モードでは、つまり \fB-r\fR と \fB-w\fR のどちらも指定されていない場合、\fBpax\fR は、標準入力から読み取られた、指定されたパターンに一致するパス名を持つアーカイブファイルのメンバーの名前を標準出力に書き込みます。指定されたファイルに拡張属性がある場合は、その拡張属性も表示されます。指定されたファイルのタイプがディレクトリである場合は、そのファイルをルートとするファイル階層も表示されます。
.RE

.sp
.ne 2
.mk
.na
\fB\fBread\fR\fR
.ad
.RS 9n
.rt  
\fBread\fR モードでは、つまり \fB-r\fR が指定されているが、\fB-w\fR は指定されていない場合、\fBpax\fR は、標準入力から読み取られた、指定されたパターンに一致するパス名を持つアーカイブファイルのメンバーを抽出します。抽出されたファイルのタイプがディレクトリである場合は、そのファイルをルートとするファイル階層も抽出されます。抽出されたファイルは、\fBpax\fR が起動されたディレクトリを現在の作業ディレクトリとしてパス名の解決を実行することによって作成されます。
.sp
ディレクトリがすでに存在するときにそのディレクトリを抽出しようとした場合、これはエラーとは見なされません。\fBFIFO\fR がすでに存在するときにその \fBFIFO\fR を抽出しようとした場合、これはエラーとは見なされません。
.sp
復元されたファイルの所有権、アクセス時間と変更時間、およびファイルモードについては、\fB-p\fR オプションのセクションで説明します。
.RE

.sp
.ne 2
.mk
.na
\fB\fBwrite\fR\fR
.ad
.RS 9n
.rt  
\fBwrite\fR モードでは、つまり \fB-w\fR が指定されているが、\fB-r\fR は指定されていない場合、\fBpax\fR は、\fIfile\fR オペランドの内容をアーカイブ形式で標準出力に書き込みます。\fIfile\fR オペランドが指定されていない場合は、コピーするファイルのリスト (1 行に 1 つのファイル) が標準入力から読み取られます。ディレクトリタイプのファイルには、そのファイルをルートとするファイル階層内のすべてのファイルが含まれています。
.RE

.sp
.ne 2
.mk
.na
\fB\fBcopy\fR\fR
.ad
.RS 9n
.rt  
\fBcopy\fR モードでは、つまり \fB-r\fR と \fB-w\fR の両方が指定されている場合、\fBpax\fR は、\fIfile\fR オペランドを宛先ディレクトリにコピーします。
.sp
\fIfile\fR オペランドが指定されていない場合は、コピーするファイルのリスト (1 行に 1 つのファイル) が標準入力から読み取られます。ディレクトリタイプのファイルには、そのファイルをルートとするファイル階層内のすべてのファイルが含まれています。
.sp
\fBcopy\fR の効果は、コピーされたファイルがアーカイブファイルに書き込まれ、そのあとに抽出された場合と同じになります。ただし、元のファイルとコピーされたファイルの間にハードリンクが存在できる点が異なります。宛先ディレクトリが、コピーされるいずれかのファイルのサブディレクトリである場合、結果は不確定です。\fIdirectory\fR が存在しないか、ユーザーから書き込めないか、またはディレクトリでない場合は、いずれもエラーになります。
.RE

.sp
.LP
\fBread\fR または \fBcopy\fR モードでは、アーカイブメンバーを抽出するために中間ディレクトリが必要な場合、\fBpax\fR は、次の引数で呼び出された \fBmkdir\fR(2) 関数と同等のアクションを実行します。
.RS +4
.TP
.ie t \(bu
.el o
\fIpath\fR 引数として使用される中間ディレクトリ。
.RE
.RS +4
.TP
.ie t \(bu
.el o
\fImode\fR 引数としての \fB777\fR または \fBrwx\fR (読み取り権、書き込み権、およびアクセス権) の 8 進数値 (\fBchmod\fR(1) を参照)。
.RE
.sp
.LP
指定されたいずれかの \fIpattern\fR または \fIfile\fR オペランドが少なくとも 1 つのファイルまたはアーカイブメンバーに一致しない場合、\fBpax\fR は、一致しなかったオペランドごとに診断メッセージを標準エラーに書き込み、0 以外の終了ステータスで終了します。
.sp
.LP
サポートされているアーカイブ形式は、自動的に入力で検出されます。デフォルトの出力アーカイブ形式は、\fBtar\fR(1) です。
.sp
.LP
1 つのアーカイブが複数のファイルにまたがることができます。\fBpax\fR は、次のファイルとしてどのファイルに対して読み取りまたは書き込みを行うかを判定します。
.sp
.LP
選択されたアーカイブ形式がリンクされたファイルの仕様をサポートしている場合、リンクされるファイルがシンボリックリンクであり、かつシステムがシンボリックリンクへのハードリンクを作成できない場合を除き、アーカイブを抽出したときにこれらのファイルをリンクできない場合はエラーになります。その場合は、シンボリックリンクの別のコピーが代わりに作成されます。抽出のためのファイルの選択には、そのファイルを表すアーカイブ内のさまざまな名前のいずれを使用することもできます。ファイルの内容が、ハードリンクが生成される原因となる各名前とともに格納されないアーカイブ形式では、そのデータを含むファイルがこの \fBpax\fR セッション中に抽出されない場合、元のファイルからデータが復元されるか、またはデータを抽出するために使用できるファイルの名前を含む診断メッセージが表示されます。ディレクトリをたどっているとき、\fBpax\fR は無限ループ、つまり、最後にアクセスしたファイルの祖先である、前にアクセスしたディレクトリに入ったことを検出します。無限ループを検出すると、\fBpax\fR は診断メッセージを標準エラーに書き込み、終了します。
.SH オプション
.sp
.LP
サポートしているオプションは、次のとおりです。
.sp
.ne 2
.mk
.na
\fB\fB-a\fR\fR
.ad
.RS 16n
.rt  
アーカイブの最後にファイルを追加します。このオプションは、1/4 インチのストリームテープや 8mm テープなどの一部のアーカイブデバイスでは機能しません。
.RE

.sp
.ne 2
.mk
.na
\fB\fB-b\fR \fIblocksize\fR\fR
.ad
.RS 16n
.rt  
アーカイブファイルへの 1 回の書き込みあたり正の 10 進整数のバイト数で出力をブロック化します。デバイスやアーカイブ形式によってブロック化に制限を課すことができます。ブロック化は、入力に対して自動的に決定されます。移植性のあるアプリケーションは、\fB32256\fR より大きな \fIblocksize\fR 値を指定してはいけません。アーカイブを作成するときのデフォルトのブロック化は、アーカイブ形式によって異なります。下記の \fB-x\fR オプションを参照してください。
.RE

.sp
.ne 2
.mk
.na
\fB\fB-c\fR\fR
.ad
.RS 16n
.rt  
\fIpattern\fR または \fIfile\fR オペランドによって指定されたものを除くすべてのファイルまたはアーカイブメンバーを照合します。
.RE

.sp
.ne 2
.mk
.na
\fB\fB-d\fR\fR
.ad
.RS 16n
.rt  
そのファイルをルートとするファイル階層ではなく、そのファイルまたはアーカイブメンバー自体だけに一致するディレクトリタイプのファイルのコピーやアーカイブ、またはディレクトリタイプのアーカイブメンバーの抽出または表示が行われるようにします。
.RE

.sp
.ne 2
.mk
.na
\fB\fB-f\fR \fIarchive\fR\fR
.ad
.RS 16n
.rt  
入力または出力アーカイブのパス名を指定して、デフォルトの標準入力 (\fBlist\fR または \fBread\fR モード) または標準出力 (\fBwrite\fR モード) をオーバーライドします。
.RE

.sp
.ne 2
.mk
.na
\fB\fB-H\fR \fR
.ad
.RS 16n
.rt  
ディレクトリタイプのファイルを参照しているシンボリックリンクがコマンド行で指定されている場合、\fBpax\fR は、そのリンクの名前をファイル階層のルートとして使用して、そのリンクによって参照されているファイルをルートとするファイル階層をアーカイブします。それ以外で、\fBpax\fR が通常アーカイブできるほかのいずれかのファイルタイプのファイルを参照しているシンボリックリンクがコマンド行で指定されている場合、\fBpax\fR は、そのリンクの名前を使用して、そのリンクによって参照されているファイルをアーカイブします。デフォルトの動作では、そのシンボリックリンク自体をアーカイブします。
.RE

.sp
.ne 2
.mk
.na
\fB\fB-i\fR\fR
.ad
.RS 16n
.rt  
ファイルまたはアーカイブメンバーの名前を対話形式で変更します。\fIpattern\fR オペランドに一致するアーカイブメンバー、または \fIfile\fR オペランドに一致するファイルごとに、プロンプトがファイル \fB/dev/tty\fR に書き込まれます。そのプロンプトには、ファイルまたはアーカイブメンバーの名前が含まれています。次に、\fB/dev/tty\fR から行が読み取られます。この行が空白である場合、ファイルまたはアーカイブメンバーはスキップされます。この行が 1 つのピリオドで構成されている場合、ファイルまたはアーカイブメンバーは、その名前を変更せずに処理されます。それ以外の場合、その名前は、その行の内容で置き換えられます。応答を読み取っているときにファイルの終わりが検出された場合や、読み取りや書き込みのために \fB/dev/tty\fR を開けない場合、\fBpax\fR は、0 以外の終了ステータスでただちに終了します。
.sp
抽出中に名前が変更されたファイルへのハードリンクを抽出した結果は不確定です。
.RE

.sp
.ne 2
.mk
.na
\fB\fB-k\fR\fR
.ad
.RS 16n
.rt  
既存のファイルを上書きできないようにします。
.RE

.sp
.ne 2
.mk
.na
\fB\fB-l\fR\fR
.ad
.RS 16n
.rt  
ファイルをリンクします。\fBcopy\fR モードでは、可能な場合は常に、ソースと宛先のファイル階層の間にハードリンクが作成されます。\fB-H\fR または \fB-L\fR とともに指定された場合は、シンボリックリンクが検出されたとき、宛先のファイル階層内に作成されたハードリンクはそのシンボリックリンクによって参照されているファイルに対するものです。\fB-H\fR と \fB-L\fR のどちらも指定されずに指定された場合は、シンボリックリンクが検出されたとき、そのシンボリックリンクへのハードリンクがソースのファイル階層内に作成されるか、またはそのシンボリックリンクが宛先にコピーされます。
.RE

.sp
.ne 2
.mk
.na
\fB\fB-L\fR\fR
.ad
.RS 16n
.rt  
ディレクトリタイプのファイルを参照しているシンボリックリンクがコマンド行で指定されているか、またはファイル階層の検索中に検出された場合、\fBpax\fR は、そのリンクの名前をファイル階層のルートとして使用して、そのリンクによって参照されているファイルをルートとするファイル階層をアーカイブします。それ以外で、\fBpax\fR が通常アーカイブできるほかのいずれかのファイルタイプのファイルを参照しているシンボリックリンクがコマンド行で指定されているか、またはファイル階層の検索中に検出された場合、\fBpax\fR は、そのリンクの名前を使用して、そのリンクによって参照されているファイルをアーカイブします。デフォルトの動作では、そのシンボリックリンク自体をアーカイブします。
.RE

.sp
.ne 2
.mk
.na
\fB\fB-n\fR\fR
.ad
.RS 16n
.rt  
各 \fIpattern\fR オペランドに一致する最初のアーカイブメンバーを選択します。そのファイルをルートとするファイル階層にディレクトリタイプのメンバーが引き続き一致している場合でも、パターンごとに一致するアーカイブメンバーは 1 つだけです。
.RE

.sp
.ne 2
.mk
.na
\fB\fB-o\fR \fIoptions\fR\fR
.ad
.RS 16n
.rt  
ファイルの抽出または書き込みのアルゴリズムを変更するための情報を実装に提供します。オプションの値は、次の形式のコンマで区切られた 1 つ以上のキーワードで構成されます。
.sp
.in +2
.nf
\fIkeyword\fR[[:]=\fIvalue\fR][,\fIkeyword\fR[[:]=\fIvalue\fR], ...]
.fi
.in -2
.sp

各説明で示されているように、一部のキーワードは特定のファイル形式にのみ適用されます。処理されているファイル形式に適用できないキーワードを使用すると、結果は未定義となります。
.sp
\fIoptions\fR 引数内のキーワードは、有効な移植可能なファイル名になる文字列である必要があります。
.sp
キーワードはファイル名であると想定されているわけではなく、単に、移植可能なファイル名と同じ文字構成規則に従っているだけです。
.sp
キーワードの前にスペースを置くことができます。\fIvalue\fR フィールドは、0 個以上の文字で構成されます。\fIvalue\fR 内で、アプリケーションは、すべてのコンマの前にバックスラッシュを付加します。このバックスラッシュは無視されますが、コンマは \fIvalue\fR の一部として保持されます。\fIoptions\fR 内の最後の文字としてのコンマや、そのあとに最後の文字としてスペースだけが付加されたコンマは無視されます。複数の \fB-o\fR オプションを指定できます。これらの複数の \fB-o\fR オプションに指定されているキーワードが競合が競合する場合は、コマンド行シーケンス内であとに現れたキーワードと値が優先され、前にあるキーワードと値は警告なしで無視されます。示されているファイル形式に対して、\fIoptions\fR の次のキーワード値がサポートされます。
.sp
.ne 2
.mk
.na
\fB\fBdelete=\fR\fIpattern\fR\fR
.ad
.sp .6
.RS 4n
このキーワードは、\fB-x\fR \fBpax\fR 形式にのみ適用可能です。\fBwrite\fR または \fBcopy\fR モードで使用された場合、\fBpax\fR は、生成する拡張ヘッダーレコードからその文字列パターンに一致するすべてのキーワードを省略します。\fBread\fR または \fBlist\fR モードで使用された場合、\fBpax\fR は、拡張ヘッダーレコード内のその文字列パターンに一致するすべてのキーワードを無視します。どちらの場合も、照合はパターンマッチング表記法を使用して実行されます。例: 
.sp
.in +2
.nf
\fB-o delete=security.*\fR
.fi
.in -2
.sp

セキュリティー関連の情報が抑制されます。
.sp
\fB-o\fR \fBdelete=\fR\fIpattern\fR オプションが複数指定されている場合、これらのパターンは付加的に処理されます。\fBpax\fR が生成する拡張ヘッダーレコードから、指定された文字列パターンに一致するすべてのキーワードが省略されます。
.RE

.sp
.ne 2
.mk
.na
\fB\fBexthdr.name=\fR\fIstring\fR\fR
.ad
.sp .6
.RS 4n
このキーワードは、\fB-x\fR \fBpax\fR 形式にのみ適用可能です。このキーワードは、拡張ヘッダーの \fBustar\fR ヘッダーブロックに書き込まれる名前をユーザーが制御できるようにします。この名前は、次の文字置換が作成されたあとの \fIstring\fR の内容です。
.sp
.ne 2
.mk
.na
\fB\fB%d\fR\fR
.ad
.RS 6n
.rt  
ファイルのディレクトリ名。これは、変換されたパス名に対する \fIdirname\fR ユーティリティーの結果と同じです。
.RE

.sp
.ne 2
.mk
.na
\fB\fB%f\fR\fR
.ad
.RS 6n
.rt  
ファイルのファイル名。これは、変換されたパス名に対する \fIbasename\fR ユーティリティーの結果と同じです。
.RE

.sp
.ne 2
.mk
.na
\fB\fB%p\fR\fR
.ad
.RS 6n
.rt  
\fBpax\fR プロセスのプロセス ID。
.RE

.sp
.ne 2
.mk
.na
\fB\fB%%\fR\fR
.ad
.RS 6n
.rt  
「%」文字。
.RE

\fIstring\fR 内にこれ以外の「%」文字を指定すると、結果は未定義となります。
.sp
\fB-o\fR \fBexthdr.name\fR=\fIstring\fR が指定されていない場合、\fBpax\fR は次のデフォルト値を使用します。
.sp
.in +2
.nf
%d/PaxHeaders.%p/%f
.fi
.in -2
.sp

.RE

.sp
.ne 2
.mk
.na
\fB\fBglobexthdr.name=\fR\fIstring\fR\fR
.ad
.sp .6
.RS 4n
このキーワードは、\fB-x\fR \fBpax\fR 形式にのみ適用可能です。\fBwrite\fR または \fBcopy\fR モードで適切なオプションとともに使用された場合、\fBpax\fR は、以前のバージョンの \fBpax\fR では通常ファイルとして扱われる \fBustar\fR ヘッダーブロックを含むグローバル拡張ヘッダーレコードを作成します。このキーワードは、グローバル拡張ヘッダーレコードの \fBustar\fR ヘッダーブロックに書き込まれる名前をユーザーが制御できるようにします。この名前は、次の文字置換が作成されたあとの \fIstring\fR の内容です。
.sp
.ne 2
.mk
.na
\fB\fB%n\fR\fR
.ad
.RS 6n
.rt  
アーカイブ内のグローバル拡張ヘッダーレコードのシーケンス番数を表す整数。\fB1\fR から始まります。
.RE

.sp
.ne 2
.mk
.na
\fB\fB%p\fR\fR
.ad
.RS 6n
.rt  
\fBpax\fR プロセスのプロセス ID。
.RE

.sp
.ne 2
.mk
.na
\fB\fB%%\fR\fR
.ad
.RS 6n
.rt  
「%」文字。
.RE

\fIstring\fR 内にこれ以外の「%」文字を指定すると、結果は未定義となります。
.sp
\fB-o\fR \fBglobexthdr.name\fR=\fIstring\fR が指定されていない場合、\fBpax\fR は次のデフォルト値を使用します。
.sp
.in +2
.nf
$TMPDIR/GlobalHead.%p.%n
.fi
.in -2
.sp

ここで、\fB$TMPDIR\fR は \fBTMPDIR\fR 環境変数の値を表します。\fBTMPDIR\fR が設定されていない場合、\fBpax\fR は \fB/tmp\fR を使用します。
.RE

.sp
.ne 2
.mk
.na
\fB\fBinvalid=\fR\fIaction\fR\fR
.ad
.sp .6
.RS 4n
このキーワードは、\fB-x\fR \fBpax\fR 形式にのみ適用可能です。このキーワードは、\fBread\fR または \fBcopy\fR モードでは宛先の階層で無効な値、\fBlist\fR モードでは実装のコードセットや現在のロケールに書き込めない値を拡張ヘッダーレコード内に検出したときに \fBpax\fR が実行するアクションをユーザーが制御できるようにします。\fBpax\fR によって認識される無効な値を次に示します。
.RS +4
.TP
.ie t \(bu
.el o
\fBread\fR または \fBcopy\fR モードでは、宛先の階層で無効な文字エンコーディングを含むファイル名またはリンク名。たとえば、名前には \fBNUL\fR を埋め込むことができます。
.RE
.RS +4
.TP
.ie t \(bu
.el o
\fBread\fR または \fBcopy\fR モードでは、パス名コンポーネントまたはパス名全体のどちらかについて、宛先の階層で許可される最大長より長いファイル名またはリンク名。
.RE
.RS +4
.TP
.ie t \(bu
.el o
\fBlist\fR モードでは、実装のコードセットや現在のロケールに書き込めないすべての文字列値 (ファイル名、リンク名、ユーザー名など)。
.RE
\fIaction\fR 引数の次の相互排他的な値がサポートされています。
.sp
.ne 2
.mk
.na
\fB\fBbypass\fR\fR
.ad
.RS 10n
.rt  
\fBread\fR または \fBcopy\fR モードでは、\fBpax\fR がファイルをバイパスするため、宛先の階層は変更されません。\fBlist\fR モードでは、\fBpax\fR がファイルのリクエストされたすべての有効な値を書き込みますが、無効な値を書き込む方法は不確定です。
.RE

.sp
.ne 2
.mk
.na
\fB\fBrename\fR\fR
.ad
.RS 10n
.rt  
\fBread\fR または \fBcopy\fR モードでは、\fBpax\fR がファイル名またはリンク名の無効な値を含む各ファイルに対して \fB-i\fR オプションが有効であるかのように動作するため、ユーザーは対話形式で置換名を指定できます。\fBlist\fR モードでは、\fBpax\fR は \fBbypass\fR アクションと同様に動作します。
.RE

.sp
.ne 2
.mk
.na
\fB\fBUTF-8\fR\fR
.ad
.RS 10n
.rt  
\fBread\fR、\fBcopy\fR、または \fBlist\fR モードで使用され、かつ拡張ヘッダーレコード内のファイル名、リンク名、所有者名、またはその他のいずれかのフィールドを \fBpax\fR \fBUTF-8\fR コードセット形式から実装のコードセットや現在のロケールに変換できない場合、\fBpax\fR は、その名前に実際の \fBUTF-8\fR エンコーディングを使用します。
.RE

.sp
.ne 2
.mk
.na
\fB\fBwrite\fR\fR
.ad
.RS 10n
.rt  
\fBread\fR または \fBcopy\fR モードでは、これによって有効な名前を持つ既存のファイルが上書きされるかどうかには関係なく、\fBpax\fR はファイルを書き込んで名前を変換します。\fBlist\fR モードでは、\fBpax\fR は \fBbypass\fR アクションと同様に動作します。
.RE

\fB-o\fR \fBinvalid=\fR オプションが指定されていない場合、\fBpax\fR は、\fB-o\fR \fBinvalid=bypass\fR が指定されているかのように動作します。\fB-o\fR \fBinvalid=\fR \fIaction\fR で許可できる既存のファイルの上書きはすべて、アクセス権 (\fB-p\fR) と変更時間 (\fB-u\fR) の制限に従い、\fB-k\fR オプションも指定されている場合は抑制されます。
.RE

.sp
.ne 2
.mk
.na
\fB\fBlinkdata\fR\fR
.ad
.sp .6
.RS 4n
このキーワードは、\fB-x\fR \fBpax\fR 形式にのみ適用可能です。\fBwrite\fR モードでは、あるファイルが単に内容がすでにアーカイブに書き込まれているファイルへのハードリンクである場合でも、\fBpax\fR はそのファイルの内容をアーカイブに書き込みます。
.RE

.sp
.ne 2
.mk
.na
\fB\fBlistopt=\fR\fIformat\fR\fR
.ad
.sp .6
.RS 4n
このキーワードは、\fBlist\fR モードで \fB-v\fR オプションが指定されているときに生成された内容リストの出力形式を指定します。(下記の「\fBモードの形式指定の一覧表示\fR」を参照)。あいまいさを避けるために、\fBlistopt=\fR\fIformat\fR は、\fB-o\fR オプション引数内の唯一または最後の \fIkeyword\fR=\fIvalue\fR ペアです。オプション引数の残りの部分にある文字はすべて、形式文字列の一部であると見なされます。\fB-o\fR \fBlistopt=\fR\fIformat\fR オプションが複数指定されている場合、形式文字列は、コマンド行の順序で評価される連結された 1 つの文字列であると見なされます。
.RE

.sp
.ne 2
.mk
.na
\fB\fBtimes\fR\fR
.ad
.sp .6
.RS 4n
このキーワードは、\fB-x\fR \fBpax\fR および \fB-x\fR \fBxustar\fR 形式にのみ適用可能です。write または copy モードで使用された場合、\fBpax\fR は、ファイルごとに \fBatime\fR および \fImtime\fR 拡張ヘッダーレコードを含めます。
.RE

これらのキーワードに加えて、\fB-x\fR \fBpax\fR 形式が指定されている場合は、\fB-o\fR オプション引数で、実装拡張機能を含む任意のキーワードと値を次の 2 つのモードのどちらかで使用できます。
.sp
.ne 2
.mk
.na
\fB\fBkeyword=\fR\fIvalue\fR\fR
.ad
.RS 18n
.rt  
\fBwrite\fR または \fBcopy\fR モードで使用された場合、これらのキーワード/値のペアは、\fBtypeflag g\fR グローバル拡張ヘッダーレコードとしてアーカイブの先頭に含まれます。\fBread\fR または \fBlist\fR モードで使用された場合、これらのキーワード/値のペアは、\fBtypeflag g\fR グローバル拡張ヘッダーレコードとしてアーカイブの先頭に位置しているかのように機能します。
.RE

.sp
.ne 2
.mk
.na
\fB\fBkeyword:=\fR\fIvalue\fR\fR
.ad
.RS 18n
.rt  
\fBwrite\fR または \fBcopy\fR モードで使用された場合、これらのキーワード/値のペアは、各ファイルの \fBtypeflag x\fR 拡張ヘッダーの先頭にあるレコードとして含まれます。これは、\fBtypeflag g\fR グローバル拡張ヘッダーレコードを作成しない点を除き、等号の形式と同等です。\fBread\fR または \fBlist\fR モードで使用された場合、これらのキーワード/値のペアは、各拡張ヘッダーの最後にレコードとして含まれているかのように機能します。そのため、同じ名前のグローバルまたはファイル固有の拡張ヘッダーレコードキーワードはすべてオーバーライドされます。たとえば、次のコマンドでは
.sp
.in +2
.nf
\fBpax -r -o "
gname:=mygroup,
" <archive\fR
.fi
.in -2
.sp

アーカイブから読み取られたすべてのファイルについて、グループ名が強制的に新しい値に変更されます。
.RE

.RE

.sp
.ne 2
.mk
.na
\fB\fB-p\fR \fIstring\fR\fR
.ad
.RS 16n
.rt  
1 つ以上のファイルの特性オプション (特権) を指定します。\fIstring\fR オプション引数は、抽出時に保持または破棄されるファイルの特性を指定する文字列である必要があります。この文字列は、指定文字 \fBa\fR、\fBe\fR、\fBm\fR、\fBo\fR、および \fBp\fR で構成されます。同じ文字列内で複数の特性を連結することができ、また複数の \fB-p\fR オプションを指定できます。これらの指定文字の意味は次のとおりです。 
.sp
.ne 2
.mk
.na
\fB\fBa\fR\fR
.ad
.RS 5n
.rt  
ファイルのアクセス時間を保持しません。
.RE

.sp
.ne 2
.mk
.na
\fB\fBe\fR\fR
.ad
.RS 5n
.rt  
ユーザー \fBID\fR、グループ \fBID\fR、ファイルモードビット、アクセス時間、および変更時間を保持します。
.RE

.sp
.ne 2
.mk
.na
\fB\fBm\fR\fR
.ad
.RS 5n
.rt  
ファイルの変更時間を保持しません。
.RE

.sp
.ne 2
.mk
.na
\fB\fBo\fR\fR
.ad
.RS 5n
.rt  
ユーザー \fBID\fR とグループ \fBID\fR を保持します。
.RE

.sp
.ne 2
.mk
.na
\fB\fBp\fR\fR
.ad
.RS 5n
.rt  
ファイルモードビットを保持します。
.RE

前のリストで、\fBpreserve\fR は、呼び出しプロセスのアクセス権に従って、アーカイブ内に格納されている属性が抽出されたファイルに書き込まれることを示します。それ以外の場合、この属性は、通常のファイル作成アクションの一部として決定されます。ファイルのアクセス時間と変更時間は、\fB-p\fR オプションで特に指定されていないかぎり、またアーカイブ内に格納されているかぎり保持されます。保持されないすべての属性は、通常のファイル作成アクションの一部として決定されます。
.sp
\fBe\fR と \fBo\fR のどちらの指定文字も指定されていない場合、またはユーザー \fBID\fR とグループ \fBID\fR が何らかの理由で保持されない場合、\fBpax\fR はファイルモードの \fBsetuid\fR および \fBsetgid\fR ビットを設定しません。
.sp
これらのいずれかの項目の保持が何らかの理由で失敗した場合、\fBpax\fR は診断メッセージを標準エラーに書き込みます。これらの項目を保持できなかった場合は最終的な終了ステータスに影響を与えますが、抽出されたファイルは削除されません。
.sp
いずれかの \fIstring\fR オプション引数内のファイル固有の文字が重複しているか、または互いに競合している場合は、最後に指定された文字が優先されます。たとえば、\fB-p\fR \fBeme\fR が指定されている場合、ファイルの変更時間は保持されます。
.RE

.sp
.ne 2
.mk
.na
\fB\fB-r\fR\fR
.ad
.RS 16n
.rt  
標準入力からアーカイブファイルを読み取ります。
.RE

.sp
.ne 2
.mk
.na
\fB\fB-s\fR \fIreplstr\fR\fR
.ad
.RS 16n
.rt  
\fBregex\fR(5) の正規表現の構文を使用して、\fBed\fR(1) \fBs\fR (置換) ユーティリティーに基づいた置換式 \fIreplstr\fR に従い \fIpattern\fR または \fIfile\fR オペランドで指定されたファイルまたはアーカイブメンバー名を変更します。\fBpax\fR コマンドのコンテキストでは「アドレス」や「行」の概念は意味がないため、指定してはいけません。形式は次のとおりです。
.sp
.in +2
.nf
-s /\fIold\fR/\fInew\fR/ [gp]
.fi
.in -2
.sp

ここで、\fBed\fR の場合と同様に、\fIold\fR は基本正規表現であり、\fInew\fR にはアンパサンド (\fB&\fR)、\\fIn\fR 後方参照 (\fIn\fR は数字)、またはサブエクスプレッション照合を含めることができます。また、\fIold\fR 文字列には復帰改行を含めることもできます。
.sp
区切り文字として NULL 以外のすべての文字を使用できます (ここでは \fB/\fR を示しています)。複数の \fB-s\fR 式を指定できます。これらの式は指定された順序で適用され、はじめて置換が成功すると終了します。末尾のオプションの \fBg\fR は、\fBed\fR コマンドで定義されているとおりです。末尾のオプションの \fBp\fR を指定すると、成功した置換が標準エラーに書き込まれます。空の文字列に置換されるファイルまたはアーカイブメンバー名は、アーカイブの読み取りおよび書き込み時に無視されます。
.RE

.sp
.ne 2
.mk
.na
\fB\fB-t\fR\fR
.ad
.RS 16n
.rt  
ファイルシステムからファイルを読み取っているときに、各ファイル読み取りのアクセス時間を、\fBpax\fR によって読み取られる前のアクセス時間に設定します。ただし、\fButime()\fR でこの処理を実行するために必要なアクセス権をユーザーが持っている場合にかぎります。
.RE

.sp
.ne 2
.mk
.na
\fB\fB-u\fR\fR
.ad
.RS 16n
.rt  
同じ名前を持つ既存のファイルまたはアーカイブメンバーより古い (ファイルの変更時間が前の時間になっている) ファイルを無視します。
.sp
.ne 2
.mk
.na
\fB\fBread\fR モード\fR
.ad
.RS 19n
.rt  
ファイルシステム内のファイルと同じ名前を持つアーカイブメンバーは、そのアーカイブメンバーがファイルより新しい場合に抽出されます。
.RE

.sp
.ne 2
.mk
.na
\fB\fBwrite\fR モード\fR
.ad
.RS 19n
.rt  
ファイルシステム内のファイルと同じ名前を持つアーカイブファイルのメンバーは、そのファイルがアーカイブメンバーより新しい場合に置き換えられます。オプション \fB-a\fR も同時に指定されている場合、これはアーカイブへの追加によって実行されます。それ以外の場合は、これがアーカイブ内の実際の置換とアーカイブへの追加のどちらによって実行されるかは不確定です。
.RE

.sp
.ne 2
.mk
.na
\fB\fBcopy\fR モード\fR
.ad
.RS 19n
.rt  
宛先の階層内のファイルは、ソースの階層内のファイルの方が新しい場合にソースの階層内のファイル、またはソースの階層内のファイルへのリンクによって置き換えられます。
.RE

.RE

.sp
.ne 2
.mk
.na
\fB\fB-v\fR\fR
.ad
.RS 16n
.rt  
\fBlist\fR モードでは、詳細な内容リストを生成します (「\fB標準出力\fR」を参照)。それ以外の場合は、アーカイブメンバーのパス名と拡張属性を標準エラーに書き込みます (「\fB標準エラー\fR」を参照)。
.RE

.sp
.ne 2
.mk
.na
\fB\fB-w\fR\fR
.ad
.RS 16n
.rt  
ファイルを標準出力に指定されたアーカイブ形式で書き込みます。
.RE

.sp
.ne 2
.mk
.na
\fB\fB-x\fR \fIformat\fR\fR
.ad
.RS 16n
.rt  
出力アーカイブ形式を指定します。\fBpax\fR ユーティリティーは、次の形式を認識します。
.sp
.ne 2
.mk
.na
\fB\fBcpio\fR\fR
.ad
.RS 10n
.rt  
拡張 \fBcpio\fR(1) 交換形式。IEEE Std 1003.1–2001 を参照してください。文字型特殊アーカイブファイルに対するこの形式のデフォルトの \fIblocksize\fR は \fB5120\fR です。実装では、\fB512\fR の倍数である、\fB32256\fR 以下のすべての \fIblocksize\fR 値がサポートされます。
.sp
このアーカイブ形式では、\fB262143\fR までの \fBUID\fR と \fBGID\fR を含むファイルをアーカイブ内に格納できます。この値を超える \fBUID\fR と \fBGID\fR を含むファイルは、\fB60001\fR の \fBUID\fR と \fBGID\fR を使用してアーカイブされます。
.RE

.sp
.ne 2
.mk
.na
\fB\fBpax\fR\fR
.ad
.RS 10n
.rt  
\fBpax\fR 交換形式。IEEE Std 1003.1–2001 を参照してください。文字型特殊アーカイブファイルに対するこの形式のデフォルトの \fIblocksize\fR は \fB5120\fR です。実装では、\fB512\fR の倍数である、\fB32256\fR 以下のすべての \fIblocksize\fR 値がサポートされます。
.sp
\fBustar\fR と同様です。また、\fBUID\fR、\fBGID\fR、\fIdevmajor\fR、\fIdevminor\fR の各値が \fB2097151\fR を超えるか、パス (ファイル名を含む) が \fB255\fR 文字を超えるか、または \fIlinkname\fR が \fB100\fR 文字を超える、サイズが 8G バイトを超えるファイルのアーカイブや抽出も可能です。
.RE

.sp
.ne 2
.mk
.na
\fB\fBustar\fR\fR
.ad
.RS 10n
.rt  
拡張 \fBtar\fR(1) 交換形式。IEEE 1003.1(1990) の仕様を参照してください。文字型特殊アーカイブファイルに対するこの形式のデフォルトの \fIblocksize\fR は \fB10240\fR です。実装では、\fB512\fR の倍数である、\fB32256\fR 以下のすべての \fIblocksize\fR 値がサポートされます。
.sp
このアーカイブ形式では、\fB2097151\fR までの \fBUID\fR と \fBGID\fR を含むファイルをアーカイブ内に格納できます。この値を超える \fBUID\fR と \fBGID\fR を含むファイルは、\fB60001\fR の \fBUID\fR と \fBGID\fR を使用してアーカイブされます。
.RE

.sp
.ne 2
.mk
.na
\fB\fBxustar\fR\fR
.ad
.RS 10n
.rt  
\fBustar\fR と同様です。また、\fBUID\fR、\fBGID\fR、\fIdevmajor\fR、\fIdevminor\fR の各値が \fB2097151\fR を超えるか、パス (ファイル名を含む) が \fB255\fR 文字を超えるか、または \fIlinkname\fR が \fB100\fR 文字を超える、サイズが 8G バイトを超えるファイルのアーカイブや抽出も可能です。大きな値を処理できないアーカイバによってアーカイブが抽出される場合は、このオプションを使用しないでください。
.RE

既存のアーカイブ形式とは異なる形式のアーカイブファイルに追加しようとすると、\fBpax\fR は、0 以外の終了ステータスでただちに終了します。
.sp
\fBcopy\fR モードでは、\fB-x\fR 形式が指定されていない場合、\fBpax\fR は、\fB-x\fR \fBpax\fR が指定されているかのように動作します。
.RE

.sp
.ne 2
.mk
.na
\fB\fB-X\fR \fR
.ad
.RS 16n
.rt  
パス名によって指定されたファイル階層の検索中に、\fBpax\fR は、異なるデバイス ID (\fBst_dev\fR、\fBstat\fR(2) を参照) を持つディレクトリの下の階層を処理しません。
.RE

.sp
.ne 2
.mk
.na
\fB\fB-@\fR\fR
.ad
.RS 16n
.rt  
アーカイブ内に拡張属性を含めます。\fBpax\fR は、デフォルトではアーカイブ内に拡張属性を配置しません。 
.sp
パス名によって指定されたファイル階層の検索中に、\fBpax\fR は、拡張属性を持つすべてのファイルに対して属性ディレクトリの下の階層を処理します。拡張属性は、特殊ファイルとしてアーカイブに書き込まれます。 
.sp
ファイルの抽出中にこのフラグが使用された場合は、抽出されているファイルに関連付けられた拡張属性もすべて抽出されます。拡張属性ファイルは、通常のファイルのデータの一部としてのみ抽出できます。拡張属性ファイルだけを明示的に抽出しようとすると無視されます。
.RE

.sp
.ne 2
.mk
.na
\fB\fB-/\fR\fR
.ad
.RS 16n
.rt  
アーカイブ内に拡張システム属性を含めます。\fBpax\fR は、デフォルトではアーカイブ内に拡張システム属性を配置しません。
.sp
パス名によって指定されたファイル階層の検索中に、\fBpax\fR は、拡張属性を持つすべてのファイルに対して属性ディレクトリの下の階層を処理します。拡張属性は、特殊ファイルとしてアーカイブに書き込まれます。ファイルの抽出中にこのフラグが使用された場合は、抽出されているファイルに関連付けられた拡張属性もすべて抽出されます。拡張属性ファイルは、通常のファイルのデータの一部としてのみ抽出できます。拡張属性ファイルだけを明示的に抽出しようとすると無視されます。
.RE

.sp
.LP
相互排他的なオプションである \fB-H\fR と \fB-L\fR を複数指定しても、エラーとはみなされません。最後に指定したオプションが cp の動作を決定します。
.sp
.LP
ファイルまたはアーカイブメンバーの名前に対して動作するオプション (\fB-c\fR、\fB-i\fR、\fB-n\fR、\fB-s\fR、\fB-u\fR、および \fB-v\fR) は、次のように相互に作用します。
.sp
.LP
\fBread\fR モードでは、\fB-c\fR、\fB-n\fR、および \fB-u\fR オプションによって変更されたユーザー指定の \fIpattern\fR オペランドに基づいてアーカイブメンバーが選択されます。次に、すべての \fB-s\fR および \fB-i\fR オプションが (この順序で) 選択されたファイルの名前を変更します。\fB-v\fR オプションは、これらの変更の結果として得られた名前を書き込みます。
.sp
.LP
\fBwrite\fR モードでは、\fB-n\fR および \fB-u\fR オプションによって変更されたユーザー指定のパス名に基づいてファイルが選択されます。次に、すべての \fB-s\fR および \fB-i\fR オプションが (この順序で) これらの選択されたファイルの名前を変更します。\fB-v\fR オプションは、これらの変更の結果として得られた名前を書き込みます。
.sp
.LP
\fB-u\fR オプションと \fB-n\fR オプションの両方が指定されている場合、選択されたファイルは、比較されたファイルより新しくないかぎり \fBpax\fR によって考慮されません。
.SS "モードの形式指定の一覧表示"
.sp
.LP
\fB-o\fR \fBlistopt=\fR\fIformat\fR オプションを使用した \fBlist\fR モードでは、形式引数は選択されたファイルごとに適用されます。\fBpax\fR は、選択されたファイルごとに \fBlistopt\fR 出力に復帰改行を追加します。\fIformat\fR 引数は、次の例外を除き、形式文字列として使用されます。(最初の 5 つの例外については \fBprintf\fR(1) を参照)。
.RS +4
.TP
1.
形式文字列内の\fBスペース\fR文字は、変換指定のフラグ以外のどのコンテキストでも、出力にコピーされる通常の文字として扱われます。
.RE
.RS +4
.TP
2.
形式文字列内の \fB\&''\fR 文字は、スペースとしてではなく、\fB\&''\fR 文字として扱われます。
.RE
.RS +4
.TP
3.
\fBformats\fR(5) のマニュアルページで説明されているエスケープシーケンスに加えて、(\fB\\\fR、\fB\\fR、\fB\b\fR、\fB\f\fR、\fB\n\fR、\fB\r\fR、\fB\t\fR、\fB\v\fR)、\fB\\fR\fIddd\fR (\fIddd\fR は 1、2、または 3 桁の 8 進数) は、その 8 進数によって指定された数値を持つバイトとして書き込まれます。
.RE
.RS +4
.TP
4.
\fBd\fR または \fBu\fR 変換指定子からの出力の前後に、形式オペランドによって指定されていない空白は付きません。
.RE
.RS +4
.TP
5.
\fBo\fR 変換指定子からの出力の前に、形式オペランドによって指定されていない 0 は付きません。
.RE
.RS +4
.TP
6.
シーケンス (\fIkeyword\fR) を形式変換指定子の前に置くことができます。この変換引数は、\fIkeyword\fR の値によって定義されます。次のキーワードがサポートされています (IEEE Std 1003.1–2001 を参照)。
.RS +4
.TP
.ie t \(bu
.el o
「\fBustar ヘッダーブロック\fR」および「\fBオクテット指向の cpio アーカイブエントリ\fR」内のいずれかの「フィールド名」エントリ。実装では、「\fBcpio c_mode フィールドの値\fR」に必要な形式に加えて、先行する \fBc_\fR のない \fBcpio\fR キーワードがサポートされます。
.RE
.RS +4
.TP
.ie t \(bu
.el o
「\fBpax 拡張ヘッダー\fR」で拡張ヘッダーに対して定義されているいずれかのキーワード。
.RE
.RS +4
.TP
.ie t \(bu
.el o
「\fBpax 拡張ヘッダー\fR」で定義されている拡張ヘッダー内の、実装で定義された拡張機能として提供されているいずれかのキーワード。
.RE
たとえば、シーケンス「\fB%(charset)s\fR」は、拡張ヘッダー内の文字セットの名前の文字列値です。
.sp
キーワード変換引数の結果は、末尾に \fBNUL\fR が付かない、適用可能なヘッダーフィールドまたは拡張ヘッダーからの値です。
.sp
変換引数として使用されるすべてのキーワード値は、必要に応じて、UTF-8 エンコーディングからローカルファイルシステムやユーザーデータベースなどに適した文字セットに変換されます。
.RE
.RS +4
.TP
7.
追加の変換指定子文字である \fBT\fR は、時間の形式を指定するために使用されます。\fBT\fR 変換指定子文字の前に、シーケンス (\fIkeyword\fR=\fIsubformat\fR) を指定できます。ここで、\fIsubformat\fR は \fIdate\fR オペランドで定義されている日付の形式です。デフォルトの \fIkeyword\fR は \fImtime\fR であり、デフォルトの \fIsubformat\fR は次のとおりです。
.sp
.in +2
.nf
%b %e %H:%M %Y
.fi
.in -2
.sp

.RE
.RS +4
.TP
8.
追加の変換指定子文字である \fBM\fR は、\fBls\fR 標準出力で定義されているファイルモード文字列を指定するために使用されます。(\fIkeyword\fR) が省略されている場合は、\fBmode\fR キーワードが使用されます。たとえば、\fB%.1M\fR は、\fBls\fR \fB-l\fR コマンドの \fIentry type\fR フィールドに対応する 1 文字を書き込みます。
.RE
.RS +4
.TP
9.
追加の変換指定子文字である \fBD\fR は、ブロックまたは特殊ファイル (該当する場合) のデバイスを実装で定義された形式で指定するために使用されます。該当せず、かつ (\fIkeyword\fR) が指定されている場合、この変換は \fB%\fR(\fIkeyword\fR)\fBu\fR と同等です。該当せず、かつ (\fIkeyword\fR) が省略されている場合、この変換はスペースと同等です。
.RE
.RS +4
.TP
10.
追加の変換指定子文字である \fBF\fR は、パス名を指定するために使用されます。\fBF\fR 変換文字の前に、コンマで区切られたキーワードのシーケンスを指定できます。
.sp
.in +2
.nf
(\fIkeyword\fR[,\fIkeyword\fR] ... )
.fi
.in -2
.sp

NULL 以外のすべてのキーワード値は、各値が '\fB/\fR' で区切られて連結されます。キーワード \fBpath\fR が定義されている場合、デフォルトは (\fBpath\fR) です。それ以外の場合、デフォルトは (\fIprefix\fR,\fBname\fR) です。
.RE
.RS +4
.TP
11.
追加の変換指定子文字である \fBL\fR は、シンボリックリンクの展開を指定するために使用されます。現在のファイルがシンボリックリンクである場合、\fB%L\fR は次のように展開されます。
.sp
.in +2
.nf
"%s -> %s", \fIvalue of keyword\fR, \fIcontents of link\fR
.fi
.in -2
.sp

それ以外の場合、\fB%L\fR 変換指定は \fB%F\fR と同等です。
.RE
.SH オペランド
.sp
.LP
次のオペランドがサポートされています。
.sp
.ne 2
.mk
.na
\fB\fIdirectory\fR\fR
.ad
.RS 13n
.rt  
\fBcopy\fR モードでの宛先ディレクトリのパス名。
.RE

.sp
.ne 2
.mk
.na
\fB\fIfile\fR\fR
.ad
.RS 13n
.rt  
コピーまたはアーカイブされるファイルのパス名。
.RE

.sp
.ne 2
.mk
.na
\fB\fIpattern\fR\fR
.ad
.RS 13n
.rt  
アーカイブメンバーの 1 つ以上のパス名に一致するパターン。このパターンは、\fBfnmatch\fR(5) のマニュアルページにあるパターンマッチング表記法に準拠している必要があります。\fIpattern\fR が指定されていない場合、デフォルトでは、アーカイブ内のすべてのメンバーを選択します。
.RE

.SH 出力
.sp
.LP
次に、出力形式について説明します。
.SS "標準出力"
.sp
.LP
\fBwrite\fR モードでは、\fB-f\fR が指定されていない場合、標準出力は下で説明されているいずれかの形式に従ってフォーマットされたアーカイブです。サポートされている形式の一覧については、\fB-x\fR \fBformat\fR を参照してください。
.sp
.LP
\fBlist\fR モードでは、\fB-o\fR \fBlistopt=\fR\fIformat\fR オプションが指定されている場合、選択されたアーカイブメンバーは、上の「\fBモードの形式指定の一覧表示\fR」で説明されている形式を使用して標準出力に書き込まれます。\fB-o\fR \fBlistopt=\fR\fIformat\fR オプションを使用しない \fBlist\fR モードでは、選択されたアーカイブメンバーの内容リストは、次の形式を使用して標準出力に書き込まれます。
.sp
.in +2
.nf
"%s\en", \fIpathname\fR
.fi
.in -2
.sp

.sp
.LP
\fBlist\fR モードで \fB-v\fR オプションが指定されている場合、選択されたアーカイブメンバーの内容リストは、次の形式を使用して標準出力に書き込まれます。
.RS +4
.TP
.ie t \(bu
.el o
アーカイブの以前のメンバーへのハードリンクを表すパス名の場合:
.sp
.in +2
.nf
"%s == %s\en", <\fIls\fR -l \fIlisting, linkname\fR
.fi
.in -2
.sp

.RE
.RS +4
.TP
.ie t \(bu
.el o
その他のすべてのパス名の場合:
.sp
.in +2
.nf
"%s\en", <\fIls\fR -l \fIlisting\fR>
.fi
.in -2
.sp

ここで、<\fIls\fR \fB-l\fR \fIlisting\fR> は、\fB-l\fR オプションを使用した \fBls\fR コマンドによって指定された形式です。この形式でパス名を書き込む場合、基盤となるアーカイブ形式に正しい情報が含まれていないフィールドに対して書き込まれる内容は不確定ですが、空白文字で区切られた正しい数のフィールドが書き込まれます。
.RE
.sp
.LP
\fBlist\fR モードでは、標準出力が 1 回につき 1 行を超えてバッファリングされることはありません。
.SS "標準エラー"
.sp
.LP
\fBread\fR、\fBwrite\fR、または \fBcopy\fR モードで \fB-v\fR が指定されている場合、\fBpax\fR は、処理したパス名を次の形式を使用して標準エラー出力に書き込みます。
.sp
.in +2
.nf
"%s\en", \fIpathname\fR
.fi
.in -2
.sp

.sp
.LP
これらのパス名は、ファイルまたはアーカイブメンバーに対して処理が開始されするとすぐに書き込まれ、標準エラーにフラッシュされます。バッファリングされない末尾の復帰改行文字は、ファイルが読み取られるか、または書き込まれたときに書き込まれます。
.sp
.LP
\fB-s\fR オプションが指定されておらず、かつ置換文字列の末尾に \fBp\fR が含まれている場合、置換は次の形式で標準エラーに書き込まれます。
.sp
.in +2
.nf
"%s >> %s\en", <\fIoriginal pathname\fR>, <\fInew pathname\fR>
.fi
.in -2
.sp

.sp
.LP
\fBpax\fR のすべての動作モードで、入力アーカイブ形式とボリューム番号、ファイル、ブロック、ボリューム、およびメディア部分の数に関する未指定の形式のオプションメッセージや、その他の診断メッセージを標準エラーに書き込むことができます。
.sp
.LP
標準出力と標準エラーの両方のすべての形式で、パス名またはリンク名内の非印字文字がどのように書き込まれるかは不確定です。
.sp
.LP
\fBpax\fR が \fB-x\fR \fBpax\fR アーカイブ形式を使用した \fBread\fR モードまたは \fBlist\fR モードにあるときに、拡張ヘッダーレコード内のファイル名、リンク名、所有者名、またはその他のいずれかのフィールドを \fBpax\fR UTF-8 コードセット形式から実装のコードセットや現在のロケールに変換できない場合、\fBpax\fR は診断メッセージを標準エラーに書き込み、\fB-o\fR \fBinvalid=\fR オプションで説明されているようにファイルを処理してから、アーカイブ内の次のファイルを処理します。
.SS "出力ファイル"
.sp
.LP
\fBread\fR モードでは、抽出された出力ファイルのタイプはアーカイブされたファイルと同じです。\fBcopy\fR モードでは、コピーされた出力ファイルのタイプはコピーされるファイルと同じです。どちらのモードでも、宛先の階層内の既存のファイルが上書きされるのは、アクセス権 (\fB-p\fR)、変更時間 (\fB-u\fR)、および無効な値 (\fB-o\fR \fBinvalid=\fR) のすべてのテストで許可された場合だけです。\fBwrite\fR モードでは、\fB-f\fR オプション引数で指定された出力ファイルは、IEEE Std 1003.1–2001 のいずれかの仕様に従ってフォーマットされたファイルです。
.SH エラー
.sp
.LP
\fBpax\fR がアーカイブを読み取っているときにファイルまたはリンクを作成できない場合、アーカイブを書き込んでいるときにファイルを検索できない場合、または \fB-p\fR オプションが指定されているときにユーザー \fBID\fR、グループ \fBID\fR、またはファイルモードを保持できない場合は、診断メッセージが標準エラーに書き込まれ、0 以外の終了ステータスが返されますが、処理は続行されます。\fBpax\fR がファイルへのリンクを作成できない場合、デフォルトでは、\fBpax\fR はファイルの 2 つ目のコピーを作成しません。
.sp
.LP
アーカイブからのファイルの抽出がシグナルまたはエラーによって途中で終了された場合、\fBpax\fR はファイルを部分的にしか抽出していないか、または \fB-n\fR オプションが指定されなかった場合は、ユーザーによって指定されたファイルと同じ名前のファイルを抽出している可能性があります。ただし、このファイルはユーザーが希望したものではありません。さらに、抽出されたディレクトリのファイルモードに読み取り、書き込み、実行マスクの余分のビットが設定されていたり、正しくない変更やアクセス時間が含まれていたりする可能性があります。
.SH 使用法
.sp
.LP
\fB-p\fR (特権) オプションは、\fBtar\fR(1) と \fBcpio\fR(1) の従来からの実装の違いを調整するために考案されました。特に、この 2 つのユーティリティーは \fB-m\fR を正反対の方法で使用します。\fB-p\fR オプションはまた、セキュリティーシステムの強化や高性能なファイルなど、将来のファイル属性に対処する方法を拡張するための一貫性のある手段を提供します。複雑に見えるかもしれませんが、実際には、もっとも一般的に使用される次の 2 つのモードがあります。
.sp
.ne 2
.mk
.na
\fB\fB-p\fR \fBe\fR\fR
.ad
.RS 8n
.rt  
すべてを保持します。これは、アーカイブ内に記録されているファイルのすべての側面を保持するために、すべての適切な特権を持つ従来のスーパーユーザーによって使用されます。\fBe\fR フラグは、\fBo\fR と \fBp\fR、およびその他の実装依存の属性の合計です。
.RE

.sp
.ne 2
.mk
.na
\fB\fB-p\fR \fBp\fR\fR
.ad
.RS 8n
.rt  
ファイルモードビットを保持します。これは、所有権以外のファイルの側面を保持したいと考えている、通常の特権を持つユーザーによって使用されます。デフォルトではファイルの時間が保持されますが、これを無効にして抽出の時間を使用するために、ほかの 2 つのフラグが提供されています。
.RE

.sp
.LP
標準入力の 1 行あたり 1 つのパス名の形式では、復帰改行を含むパス名が除外されます。このようなパス名は移植可能なファイル名のガイドラインに違反しますが、存在する場合があり、それらの存在によってシェルスクリプト内での \fBpax\fR の使用が妨げられることがあります。この問題は、従来のアーカイブプログラムから継承されています。この問題は、標準入力ではなく、コマンド行でファイル名引数のリストを指定することによって回避できます。
.sp
.LP
\fBpax\fR でこの部分を実行するには、適切な特権が必要なことがほぼ確実です。具体的には、ブロック型特殊または文字型特殊タイプのファイルの作成、ファイルのアクセス時間の復元 (ファイルがそのユーザーによって所有されていない場合) (\fB-t\fR オプション)、ファイル所有者、グループ、モードの保持 (\fB-p\fR オプション) などにはすべて、適切な特権が必要である可能性があります。
.sp
.LP
\fBread\fR モードでは、アーカイブに同じ名前を持つ複数のメンバーが含まれている場合、ファイルを上書きすることが許可されています。ファイルの最初のバージョンに対するアクセス権によってその上書きが許可されていない場合、これは失敗することがあります。
.sp
.LP
\fB-x\fR \fBxustar\fR および \fB-x\fR \fB-pax\fR アーカイブ形式を使用しているとき、基盤となるファイルシステムがアーカイブされるファイルにホールが含まれていることを報告した場合、Solaris \fBpax\fR ユーティリティーは、そのファイルのアーカイブ時にホールの存在を拡張ヘッダーレコード内に記録します。この拡張ヘッダーレコードがアーカイブ内のファイルに関連付けられていると、そのファイルがアーカイブから抽出された場合は常に、これらのホールが再作成されます。\fBlseek\fR(2) の \fBSEEK_DATA\fR と \fBSEEK_HOLE\fR の whence 値を参照してください。その他のすべての場合、アーカイブ内にある \fBNUL\fR (\fB\0\fR) 文字はすべて、抽出されたときにファイルに書き込まれます。
.sp
.LP
ファイルが 2G バイト (2^31 バイト) 以上ある場合の \fBpax\fR の動作については、\fBlargefile\fR(5) を参照してください。
.SS "標準入力"
.sp
.LP
\fBwrite\fR モードでは、標準入力は \fIfile\fR オペランドが指定されていない場合にのみ使用されます。これは、先頭にも末尾にも空白のないパス名のリスト (1 行に 1 つのパス名) を含むテキストファイルです。\fBlist\fR および \fBread\fR モードでは、\fB-f\fR が指定されていない場合、標準入力はアーカイブファイルです。それ以外の場合、標準入力は使用されません。
.SS "入力ファイル"
.sp
.LP
\fIarchive\fR オプション引数、またはアーカイブの読み取り元になっている標準入力で指定された入力ファイルは、下で説明されているいずれかの形式に従ってフォーマットされたファイルです。「\fB拡張機能説明\fR」を参照してください。ファイル \fB/dev/tty\fR は、プロンプトを書き込んだり、応答を読み取ったりするために使用されます。
.SH 使用例
.LP
\fB例 1 \fR現在のディレクトリの内容のコピー
.sp
.LP
次のコマンドを見てください。

.sp
.in +2
.nf
example% \fBpax -w -f /dev/rmt/1m .\fR
.fi
.in -2
.sp

.sp
.LP
現在のディレクトリの内容をテープドライブ 1 (中密度) にコピーします。これは、従来の System V のデバイス命名手順を前提にしています。従来の \fBBSD\fR デバイス名は、\fB/dev/rmt9\fR になります。

.LP
\fB例 2 \fRディレクトリ階層のコピー
.sp
.LP
次のコマンドを見てください。

.sp
.in +2
.nf
example% \fBmkdir newdir\fR
example% \fBpax -rw olddir newdir\fR
.fi
.in -2
.sp

.sp
.LP
\fBolddir\fR ディレクトリ階層を \fBnewdir\fR にコピーします。

.LP
\fB例 3 \fR現在のディレクトリを基準にして抽出されたアーカイブの読み取り
.sp
.LP
次のコマンドを見てください。

.sp
.in +2
.nf
example% \fBpax -r -s ',^//*usr//*,,' -f a.pax\fR
.fi
.in -2
.sp

.sp
.LP
アーカイブ内の \fB/usr\fR をルートとするすべてのファイルが現在のディレクトリを基準にして抽出されたアーカイブ \fB\&.pax\fR を読み取ります。

.LP
\fB例 4 \fRデフォルト出力の説明のオーバーライド
.sp
.LP
次のオプションを使用します。

.sp
.in +2
.nf
\fB-o listopt="%M %(atime)T %(size)D %(name)s"\fR
.fi
.in -2
.sp

.sp
.LP
「\fB標準出力\fR」のデフォルト出力の説明をオーバーライドし、代わりに次の出力を書き込みます。

.sp
.in +2
.nf
-rw-rw- - - Jan 12 15:53 2003 1492 /usr/foo/bar
.fi
.in -2
.sp

.sp
.LP
次のオプションを使用します。

.sp
.in +2
.nf
\fB-o listopt='%L\et%(size)D\en%.7' \e
-o listopt='(name)s\en%(atime)T\en%T'\fR
.fi
.in -2
.sp

.sp
.LP
標準出力のデフォルト出力の説明をオーバーライドし、代わりに次の出力を書き込みます。

.sp
.in +2
.nf
usr/foo/bar -> /tmp             1492
/usr/foo
Jan 12 15:53 1991
Jan 31 15:53 2003
.fi
.in -2
.sp

.SH 環境
.sp
.LP
\fBpax\fR の実行に影響を与える次の環境変数についての詳細は、\fBenviron\fR(5) を参照してください。\fBLANG\fR、\fBLC_ALL\fR、\fBLC_CTYPE\fR、\fBLC_MESSAGES\fR、\fBLC_TIME\fR、および \fBNLSPATH\fR。
.sp
.ne 2
.mk
.na
\fB\fBLC_COLLATE\fR\fR
.ad
.RS 14n
.rt  
\fIpattern\fR オペランドのパターンマッチング式で使用される範囲、同等クラス、複数文字照合要素の動作、\fB-s\fR オプションでの基本正規表現、および \fBLC_MESSAGES\fR カテゴリの \fByesexpr\fR ロケールキーワードで定義されている拡張正規表現のためのロケールを決定します。
.RE

.sp
.ne 2
.mk
.na
\fB\fBTMPDIR\fR\fR
.ad
.RS 14n
.rt  
「オプション」セクションで説明されている \fB-o\fR \fBglobexthdr=\fR キーワードの説明にあるように、デフォルトのグローバル拡張ヘッダーレコードファイルの一部を提供するパス名を決定します。
.RE

.sp
.ne 2
.mk
.na
\fB\fBTZ\fR\fR
.ad
.RS 14n
.rt  
\fB-v\fR オプションが指定されている場合に日付と時間の文字列を計算するために使用されるタイムゾーンを決定します。\fBTZ\fR が指定されていない、または NULL の場合は、デフォルトのタイムゾーンが使用されます。
.RE

.SH 終了ステータス
.sp
.LP
次の終了ステータスが返されます。
.sp
.ne 2
.mk
.na
\fB\fB0\fR\fR
.ad
.RS 6n
.rt  
ファイルはすべて正しく処理されました。
.RE

.sp
.ne 2
.mk
.na
\fB>\fB0\fR\fR
.ad
.RS 6n
.rt  
エラーが発生した。
.RE

.SH 拡張機能説明
.SS "\fBpax\fR 交換形式"
.sp
.LP
\fB-xpax\fR 形式で生成された \fBpax\fR アーカイブテープまたはファイルには、一連のブロックが含まれています。アーカイブの物理配列は、「\fBustar 交換形式\fR」で説明されている \fBustar\fR 形式と同じです。アーカイブされた各ファイルは、次のシーケンスによって表されます。
.RS +4
.TP
.ie t \(bu
.el o
拡張ヘッダーレコードを含むオプションのヘッダーブロック。このヘッダーブロックは、\fBx\fR または \fBg\fR の \fItypeflag\fR 値を持つ 27403 の形式になっています。拡張ヘッダーレコードは、このヘッダーブロックのデータとして含まれています。
.RE
.RS +4
.TP
.ie t \(bu
.el o
ファイルを説明しているヘッダーブロック。前のオプションの拡張ヘッダーにフィールドが存在する場合、このファイルのこのヘッダーブロック内の関連するフィールドはすべてオーバーライドされます。
.RE
.RS +4
.TP
.ie t \(bu
.el o
ファイルの内容を含む 0 個以上のブロック。
.RE
.sp
.LP
アーカイブファイルの最後に、アーカイブの終了インジケータとして解釈される、バイナリ 0 で埋められた 2 つの 512 バイトブロックが存在します。 
.sp
.LP
次に、pax 形式のアーカイブ内にグローバル拡張ヘッダーレコードと 2 つの実際のファイルを含むアーカイブの例の概要を示します。この例では、アーカイブ内の 2 番目のファイルの前に拡張ヘッダーが存在しません。これはおそらく、拡張属性を必要としないためです。
.sp

.sp
.TS
tab();
cw(2.67i) cw(2.83i) 
lw(2.67i) lw(2.83i) 
.
説明ブロック
グローバル拡張ヘッダーustar ヘッダー [\fItypeflag\fR=g]
T{
グローバル拡張ヘッダーデータ
T}
T{
ファイル 1: 拡張ヘッダーが含まれている
T}ustar ヘッダー [\fItypeflag\fR=x]
拡張ヘッダーデータ
[\fItypeflag\fR=0]
T{
ファイル 1 の ustar ヘッダーデータ
T}
T{
ファイル 2: 拡張ヘッダーは含まれていない
T}ustar ヘッダー [\fItypeflag\fR=0]
ファイル 2 のデータ
T{
アーカイブの終了インジケータ
T}バイナリ 0 のブロック
バイナリ 0 のブロック
.TE

.SS "\fBpax\fR ヘッダーブロック"
.sp
.LP
\fBpax\fR ヘッダーブロックは、2 つの \fItypeflag\fR 値が追加で定義されている点を除き、「\fBustar 交換形式\fR」で説明されている \fBustar\fR ヘッダーブロックと同じです。
.sp
.ne 2
.mk
.na
\fB\fBg\fR\fR
.ad
.RS 5n
.rt  
アーカイブ内の次のファイルのグローバル拡張ヘッダーレコードを表します。これらの拡張ヘッダーレコードの形式は、「\fBpax 拡張ヘッダー\fR」で説明されているとおりです。各値は、同じフィールドの別の値を提供する別のグローバル拡張ヘッダーレコードに到達するまで、自身の拡張ヘッダーレコードではその値をオーバーライドしない以降のすべてのファイルに影響を与えます。\fItypeflag\fR \fBg\fR グローバルヘッダーを、アーカイブの転送中に部分的なデータ損失が発生する可能性のある交換メディアでは使用しないでください。 
.RE

.sp
.ne 2
.mk
.na
\fB\fBx\fR\fR
.ad
.RS 5n
.rt  
アーカイブ内の (独自の \fBustar\fR ヘッダーブロックを持つ) 次のファイルの拡張ヘッダーレコードを表します。これらの拡張ヘッダーレコードの形式は、「\fBpax 拡張ヘッダー\fR」で説明されているとおりです。 
.RE

.sp
.LP
このどちらのタイプでも、\fIsize\fR フィールドは、拡張ヘッダーレコードのサイズ (オクテット単位) です。ヘッダーブロック内のその他のフィールドは、このバージョンの \fBpax\fR では意味がありません。ただし、このアーカイブが以前のバージョンの \fIISO POSIX-2:1993 規格\fRに準拠する \fBpax\fR によって読み取られた場合は、拡張ヘッダーレコードをデータとして含む通常ファイルを作成するためにヘッダーブロックフィールドが使用されます。そのため、この通常ファイルへの妥当なファイルアクセスを提供するヘッダーブロックフィールドの値を選択するようにしてください。 
.sp
.LP
\fBustar\fR ヘッダーブロックとのその他の違いとして、\fItypeflag\fR \fB1\fR (数字の 1) のファイル (ハードリンク) のためのデータブロックが含まれている可能性がある、つまり \fIsize\fR フィールドが 0 より大きい場合があります。\fBpax\fR \fB-o\fR \fBlinkdata\fR によって作成されたアーカイブには、ハードリンクを含むこれらのデータブロックが含まれています。
.SS "\fBpax\fR 拡張ヘッダー"
.sp
.LP
\fBpax\fR 拡張ヘッダーには、\fIISO/IEC 646: 1991 規格\fRで説明されているもの以外の文字エンコーディングが必要なフィールド、\fBustar\fR ヘッダーで説明されていないファイル属性を表すフィールド、形式または長さが \fBustar\fR ヘッダーの要件を満たさないフィールドなど、その形式の制限のために \fBustar\fR ヘッダーブロックには適さない値が含まれています。拡張ヘッダー内の値によって、指定された (1 つまたは複数の) ファイルに属性が追加されるか、または次のキーワードのリストに示すように、指定されたヘッダーブロック内の値がオーバーライドされます。\fItypeflag\fR \fBg\fR ヘッダーブロックの説明を参照してください。 
.sp
.LP
拡張ヘッダーは、それぞれが次のように構築された 1 つ以上のレコードで構成されます。
.sp
.in +2
.nf
"%d %s=%s\en", \fIlength\fR, \fIkeyword\fR, \fIvalue\fR
.fi
.in -2
.sp

.sp
.LP
拡張ヘッダーレコードは、\fIISO/IEC 10646-1: 2000 規格\fR (UTF-8) に従ってエンコードされます。\fIlength\fR、\fB空白\fR、等号 (\fB=\fR)、および復帰改行は、UTF-8 でエンコードされた移植可能な文字セットに制限されます。\fIkeyword\fR と \fIvalue\fR には、任意の UTF-8 文字を指定できます。\fIlength\fR は、末尾の復帰改行を含む拡張ヘッダーレコードの 10 進数の長さ (オクテット単位) です。 
.sp
.LP
\fIkeyword\fR は、次のリストのいずれかのエントリか、または実装拡張機能として提供されているキーワードです。すべてが小文字、数字、およびピリオドで構成されているキーワードは、将来の標準化のために予約されています。キーワードに等号は含まれません。 
.sp
.LP
次のリストで、\fBfile(s)\fR または \fBblock(s)\fR の表記は、あるキーワードによって影響を受けるファイルが、通常は \fItypeflag\fR \fBx\fR 拡張ヘッダーのあとにある指定された 1 つのファイルだが、場合によっては \fItypeflag\fR \fBg\fR のあとにある複数のファイルであることを確認するために使用されます。リストにある write または copy モードのときに \fBpax\fR でレコードを含める要件はすべて、\fB-o\fR オプションを使用してこのようなレコードがまだ指定されていない場合にのみ適用されます。copy モードで使用された場合、\fBpax\fR は、適用可能な拡張ヘッダーレコードを使用してアーカイブが作成され、そのあとに抽出されたかのように動作します。
.sp
.ne 2
.mk
.na
\fB\fBatime\fR\fR
.ad
.RS 16n
.rt  
指定されたファイルのアクセス時間。これは、\fBstat\fR(2) 関数で説明されている、あるファイルに対応する stat 構造体の \fBst_atime\fR メンバーの値と同じです。このアクセス時間 (\fBatime\fR) は、プロセスがそのために必要な適切な特権を持っている場合に復元されます。\fIvalue\fR の形式は、「\fBpax 拡張ヘッダーファイルの時間\fR」で説明されているとおりです。
.RE

.sp
.ne 2
.mk
.na
\fB\fBcharset\fR\fR
.ad
.RS 16n
.rt  
指定されたファイル内のデータをエンコードするために使用される文字セットの名前。次の表にあるエントリは、既知の規格を参照するように定義されています。その他の名前を発信者と受信者の間で合意できます。
.sp

.sp
.TS
tab();
lw(2.75i) lw(2.75i) 
lw(2.75i) lw(2.75i) 
.
\fIvalue\fR公式な規格
ISO-IR 646 1990ISO/IEC646:1990
ISO-IR 8859 1 1998ISO/IEC8859–1:1998
ISO-IR 8859 2 1999ISO/IEC 8859–2:1999
ISO-IR 8859 3 1999ISO/IEC 8859–3:1999
ISO-IR 8859 4 1999ISO/IEC8859–4:1998
ISO-IR 8859 5 1999ISO/IEC8859–5–1999
ISO-IR 8859 6 1999ISO/IEC8859–6–1999
ISO-IR 8859 7 1987ISO/IEC8859–7:1987
ISO-IR 8859 8 1999ISO/IEC8859–8:1999
ISO-IR 8859 9 1999ISO/IEC8859–9:1999
ISO-IR 8859 10 1998ISO/IEC8859–10:1999
ISO-IR 8859 13 1998ISO/IEC8859–13:1998
ISO-IR 8859 14 1998ISO/IEC8859–14:1998
ISO-IR 8859 15 1999ISO/IEC8859–15:1999
ISO-IR 10646 2000ISO/IEC 10646:2000
ISO-IR 10646 2000 UTF-8T{
ISO/IEC 10646、UTF-8 エンコーディング
T}
BINARYなし
.TE

拡張ヘッダー内のエンコーディングは、情報のためにのみ含まれています。\fBpax\fR は、\fIIEEE Std 1003.1-200x\fR の説明のとおりに使用されている場合、ファイルデータをほかのどのエンコーディングにも変換しません。BINARY エントリは、エンコードされていないバイナリデータを示します。write または copy モードで使用された場合、\fBpax\fR がファイルに \fBcharset\fR 拡張ヘッダーレコードを含めるかどうかは実装で定義されています。
.RE

.sp
.ne 2
.mk
.na
\fB\fBcomment\fR\fR
.ad
.RS 16n
.rt  
コメントとして使用される一連の文字。\fIvalue\fR フィールド内の文字はすべて、\fBpax\fR によって無視されます。
.RE

.sp
.ne 2
.mk
.na
\fB\fBgid\fR\fR
.ad
.RS 16n
.rt  
ファイルを所有するグループのグループ ID。\fIISO/IEC 646: 1991 規格\fRの数字を使用した 10 進数として表されます。このレコードによって、指定されたヘッダーブロック内の \fBgid\fR フィールドがオーバーライドされます。write または copy モードで使用された場合、\fBpax\fR は、グループ ID が 2097151 (8 進数の \fB7777777\fR) を超えるファイルごとに \fBgid\fR 拡張ヘッダーレコードを含めます。
.RE

.sp
.ne 2
.mk
.na
\fB\fIgname\fR\fR
.ad
.RS 16n
.rt  
ファイルのグループ。グループデータベース内のグループ名としてフォーマットされます。このレコードによって、指定されたヘッダーブロック内の \fBgid\fR フィールドと \fIgname\fR フィールド、およびすべての \fBgid\fR 拡張ヘッダーレコードがオーバーライドされます。read、copy、または list モードで使用された場合、\fBpax\fR は、ヘッダーレコード内の名前を UTF-8 エンコーディングから受信側のシステム上のグループデータベースに適した文字セットに変換します。いずれかの UTF-8 文字を変換できず、かつ \fB-o invalid=UTF-8\fR オプションが指定されていない場合、結果は実装で定義されています。write または copy モードで使用された場合、\fBpax\fR は、グループ名を移植可能な文字セットの文字と数字だけで表すことができないファイルごとに \fIgname\fR 拡張ヘッダーレコードを含めます。
.RE

.sp
.ne 2
.mk
.na
\fB\fBlinkpath\fR\fR
.ad
.RS 16n
.rt  
以前にアーカイブされた任意のタイプの別のファイルに作成されるリンクのパス名。このレコードによって、指定された \fBustar\fR ヘッダーブロック内の \fIlinkname\fR フィールドがオーバーライドされます。指定された \fBustar\fR ヘッダーブロックによって、作成されるリンクのタイプが決定されます。指定されたヘッダーブロックの \fItypeflag\fR が 1 である場合は、ハードリンクです。\fItypeflag\fR が 2 である場合は、シンボリックリンクであり、\fBlinkpath\fR 値はそのシンボリックリンクの内容です。\fBpax\fR は、リンクの名前 (シンボリックリンクの内容) を UTF-8 エンコーディングからローカルファイルシステムに適した文字セットに変換します。write または copy モードで使用された場合、\fBpax\fR は、パス名を \fBNULL\fR 以外の移植可能な文字セットのメンバーだけで表すことができないリンクごとに \fBlinkpath\fR 拡張ヘッダーレコードを含めます。
.RE

.sp
.ne 2
.mk
.na
\fB\fImtime\fR\fR
.ad
.RS 16n
.rt  
以前にアーカイブされた任意のタイプの別のファイルに作成されるリンクのパス名。このレコードによって、指定された \fBustar\fR ヘッダーブロック内の \fIlinkname\fR フィールドがオーバーライドされます。指定された \fBustar\fR ヘッダーブロックによって、作成されるリンクのタイプが決定されます。指定されたヘッダーブロックの \fItypeflag\fR が \fB1\fR である場合は、ハードリンクです。\fItypeflag\fR が \fB2\fR である場合は、シンボリックリンクであり、\fBlinkpath\fR 値はそのシンボリックリンクの内容です。\fBpax\fR は、リンクの名前 (シンボリックリンクの内容) を UTF-8 エンコーディングからローカルファイルシステムに適した文字セットに変換します。write または copy モードで使用された場合、\fBpax\fR は、パス名を \fBNULL\fR 以外の移植可能な文字セットのメンバーだけで表すことができないリンクごとに \fBlinkpath\fR 拡張ヘッダーレコードを含めます。
.RE

.sp
.ne 2
.mk
.na
\fB\fBpath\fR\fR
.ad
.RS 16n
.rt  
指定されたファイルのパス名。このレコードによって、指定されたヘッダーブロック内の名前と \fIprefix\fR フィールドがオーバーライドされます。\fBpax\fR は、ファイルのパス名を UTF-8 エンコーディングからローカルファイルシステムに適した文字セットに変換します。write または copy モードで使用された場合、\fBpax\fR は、パス名を \fBNULL\fR 以外の移植可能な文字セットのメンバーだけで表すことができないファイルごとに path 拡張ヘッダーレコードを含めます。
.RE

.sp
.ne 2
.mk
.na
\fB\fBrealtime.\fR\fIany\fR\fR
.ad
.RS 16n
.rt  
\fBrealtime\fR が接頭辞として付けられたキーワードは、将来の標準化のために予約されています。
.RE

.sp
.ne 2
.mk
.na
\fB\fBsecurity.\fR\fIany\fR\fR
.ad
.RS 16n
.rt  
\fBsecurity\fR が接頭辞として付けられたキーワードは、将来の標準化のために予約されています。
.RE

.sp
.ne 2
.mk
.na
\fB\fIsize\fR\fR
.ad
.RS 16n
.rt  
ファイルのサイズ (オクテット単位)。\fIISO/IEC 646: 1991 規格\fRの数字を使用した 10 進数として表されます。このレコードによって、指定されたヘッダーブロック内の \fIsize\fR フィールドがオーバーライドされます。write または copy モードで使用された場合、\fBpax\fR は、\fIsize\fR 値が \fB8589934591\fR (8 進数の \fB77777777777\fR) を超えるファイルごとに size 拡張ヘッダーレコードを含めます。
.RE

.sp
.ne 2
.mk
.na
\fB\fIuid\fR\fR
.ad
.RS 16n
.rt  
ファイル所有者のユーザー \fBID\fR。\fIISO/IEC 646:1991\fR 規格の数字を使用した 10 進数として表されます。このレコードによって、次のヘッダーブロック内の \fBuid\fR フィールドがオーバーライドされます。write または copy モードで使用された場合、\fBpax\fR は、所有者 ID が \fB2097151 (8 進数の 7777777)\fR を超えるファイルごとに \fBuid\fR 拡張ヘッダーレコードを含めます。
.RE

.sp
.ne 2
.mk
.na
\fB\fIuname\fR\fR
.ad
.RS 16n
.rt  
指定されたファイルの所有者。ユーザーデータベース内のユーザー名としてフォーマットされます。このレコードによって、指定されたヘッダーブロック内の \fIuid\fR フィールドと \fIuname\fR フィールド、およびすべての \fIuid\fR 拡張ヘッダーレコードがオーバーライドされます。read、copy、または list モードで使用された場合、\fBpax\fR は、ヘッダーレコード内の名前を UTF-8 エンコーディングから受信側のシステム上のユーザーデータベースに適した文字セットに変換します。いずれかの UTF-8 文字を変換できず、かつ \fB-o invalid=UTF-8\fR オプションが指定されていない場合、結果は実装で定義されています。write または copy モードで使用された場合、\fBpax\fR は、ユーザー名を移植可能な文字セットの文字と数字だけで表すことができないファイルごとに \fIuname\fR 拡張ヘッダーレコードを含めます。
.RE

.sp
.LP
\fBvalue\fR フィールドの長さが 0 である場合は、これによりヘッダーブロックフィールド、以前に入力された拡張ヘッダー値、または同じ名前のグローバル拡張ヘッダー値がすべて削除されます。 
.sp
.LP
拡張ヘッダーレコード (または \fB-o\fR オプション引数) 内のキーワードによって \fBustar\fR ヘッダーブロック内の対応するフィールドがオーバーライドまたは削除される場合、\fBpax\fR は、そのヘッダーブロックフィールドの内容を無視します。
.sp
.LP
\fBustar\fR ヘッダーブロックフィールドとは異なり、\fBNULL\fR で値が区切られることはありません。value フィールド内の文字はすべて、そのフィールドのデータと見なされます。 
.SS "\fBpax\fR 拡張ヘッダーのキーワードの優先順位"
.sp
.LP
このセクションでは、さまざまなヘッダーレコード、フィールド、およびコマンド行オプションがアーカイブ内のファイルへの適用のために選択される優先順位について説明します。read または list モードで使用された場合、\fBpax\fR は、次のシーケンスでファイル属性を決定します。 
.RS +4
.TP
1.
\fB-o delete\fR\fB=\fR\fIkeyword-prefix\fR が使用されている場合、影響を受ける属性は該当する場合は手順 7 から決定され、それ以外の場合は無視されます。
.RE
.RS +4
.TP
2.
\fB-o\fR \fIkeyword:=\fR が使用されている場合、影響を受ける属性は無視されます。 
.RE
.RS +4
.TP
3.
\fB-o\fR \fIkeyword:=value\fR が使用されている場合は、影響を受ける属性にその値が割り当てられます。
.RE
.RS +4
.TP
4.
\fItypeflag\fR \fBx\fR 拡張ヘッダーレコードが存在する場合は、影響を受ける属性にその値が割り当てられます。拡張ヘッダーレコードが競合する場合は、ヘッダー内で最後に指定されたものが優先されます。
.RE
.RS +4
.TP
5.
\fB-o\fR \fIkeyword=value\fR が使用されている場合は、影響を受ける属性にその値が割り当てられます。
.RE
.RS +4
.TP
6.
\fItypeflag g\fR グローバル拡張ヘッダーレコードが存在する場合は、影響を受ける属性にその値が割り当てられます。グローバル拡張ヘッダーレコードが競合する場合は、グローバルヘッダー内で最後に指定されたものが優先されます。 
.RE
.RS +4
.TP
7.
それ以外の場合、属性は \fBustar\fR ヘッダーブロックから決定されます。
.RE
.SS "\fBpax\fR 拡張ヘッダーファイルの時間"
.sp
.LP
write または copy モードでは、\fBustar\fR 交換形式で説明されている \fBustar\fR ヘッダー論理レコード内でファイルの変更時間を正確に表すことができない場合、\fBpax\fR は、ファイルごとに \fImtime\fR レコードを書き込みます。これは、時間が \fBustar\fR の範囲外である場合、または基盤となる実装のファイルシステムが整数以外の時間粒度をサポートしており、かつ時間が整数でない場合に発生することがあります。これらの時間レコードはすべて、基準時間からの時間の 10 進数表現 (秒単位) としてフォーマットされます。ピリオド (\fB\&.\fR) の小数点文字が存在する場合は、小数点の右にある桁が 1 秒未満の時間粒度の単位を表します。ここで、最初の桁が 10 分の 1 秒であり、以降の各桁は前の桁の 10 分の 1 です。read または copy モードでは、\fBpax\fR は、ファイルの時間をヘッダーファイルの入力の時間を超えない最大の値に切り詰めます。write または copy モードでは、\fBpax\fR は、時間を 10 進数として正確に表すことができる場合は時間を正確に出力し、それ以外の場合は、基盤となる実装が同じ時間粒度をサポートしているシステム上でファイルが抽出された場合に同じ時間が復元されるように十分な桁のみを生成します。
.SS "\fBustar\fR 交換形式"
.sp
.LP
\fBustar\fR のアーカイブテープまたはファイルには、一連の論理レコードが含まれています。各論理レコードは、512 オクテットの固定サイズの論理レコードです。この形式を 9 トラックの業界標準の 12.7mm (0.5 インチ) 磁気テープ上に格納される形式であると考えることができますが、その他のタイプのトランスポータブルメディアも除外されません。アーカイブされた各ファイルは、ファイルを説明しているヘッダー論理レコードと、それに続くファイルの内容を提供している 0 個以上の論理レコードによって表されます。アーカイブファイルの最後に、アーカイブの終了インジケータとして解釈される、バイナリ 0 で埋められた 2 つの 512 オクテット論理レコードが存在します。 
.sp
.LP
\fB-b\fR\fIblocksize\fR および \fB-x\fR \fBustar\fR オプションで説明されているように、論理レコードを物理 I/O 操作のためにグループ化できます。論理レコードの各グループは、\fBwrite\fR(2) 関数と同等の 1 回の操作で書き込むことができます。磁気テープ上では、この書き込みの結果が 1 つのテープ物理ブロックになります。最後の物理ブロックは常にフルサイズであるため、2 つの 0 の論理レコードのあとの論理レコードには未定義のデータを含めることができます。 
.sp
.LP
ヘッダー論理レコードは、次の表に示すように構造化されます。長さとオフセットはすべて 10 進数です。
.sp
\fB表 1 \fR\fBustar\fR ヘッダーブロック
.sp
.TS
tab();
cw(1.83i) cw(1.83i) cw(1.83i) 
lw(1.83i) lw(1.83i) lw(1.83i) 
.
フィールド名オクテットのオフセット長さ (オクテット単位)
\fIname\fR\fB0\fR100
\fImode\fR1008
\fIuid\fR1088
\fIgid\fR1168
\fIsize\fR12412
\fImtime\fR13612
\fIchksum\fR1488
\fItypeflag\fR1561
\fIlinkname\fR157100
\fImagic\fR2576
\fIversion\fR2632
\fIuname\fR26532
\fIgname\fR29732
\fIdevmajor\fR3298
\fIdevminor\fR3378
\fIprefix\fR345155
.TE

.sp
.LP
ヘッダー論理レコード内の文字はすべて、\fIISO/IEC 646: 1991\fR 規格のコード化文字セットによって表されます。実装間の移植性を最大化するために、名前は、移植可能なファイル名文字セットによって最上位ビットが 0 のオクテットとして表される文字から選択するようにしてください。実装によって、ファイル、ユーザー、グループの名前にスラッシュおよび移植可能なファイル名文字セット以外の文字を使用することがサポートされている場合は、これらの文字の、実装で定義された 1 つ以上のエンコーディングが交換のために提供されます。 
.sp
.LP
\fBpax\fR は、\fIIEEE Std 1003.1-200x\fR で説明されている手順を使用してアクセスできないローカルシステム上にはファイル名を作成しません。無効なファイル名を作成するファイル名がメディア上で見つかった場合、そのファイルからのデータがファイル階層に格納されるかどうかや、どのような名前で格納されるかは実装で定義されています。\fBpax\fR は、ファイルが無視されることを示すエラーを生成するかぎり、これらのファイルを無視することを選択できます。ヘッダー論理レコード内の各フィールドは連続しています。つまり、パディングは使用されません。 
.sp
.LP
ヘッダー論理レコード内の各フィールドは連続しています。パディングは使用されません。アーカイブメディア上の各文字は連続して格納されます。
.sp
.LP
\fImagic\fR、\fIuname\fR、\fIgname\fR の各フィールドは、それぞれ NULL 文字で終了する文字列です。\fIname\fR、\fIlinkname\fR、\fIprefix\fR の各フィールドは、最後の文字を含む配列内のすべての文字に NULL 以外の文字が含まれている場合を除き、NULL で終了する文字列です。\fIversion\fR フィールドは、文字 \fB00\fR を含む 2 つのオクテット (0-0) です。\fItypeflag\fR には 1 文字が含まれています。その他のフィールドはすべて、\fIISO/IEC 646:1991\fR 規格の IRV の数字を使用した、先行する 0 で埋められた 8 進数です。各数値フィールドは、1 つ以上のスペースまたは NULL 文字で終了します。
.sp
.LP
アーカイブメディア上の各文字は連続して格納されます。\fImagic\fR、\fIuname\fR、\fIgname\fR の各フィールドは、それぞれ \fBNULL\fR 文字で終了する文字列です。 
.sp
.LP
\fIname\fR、\fIlinkname\fR、\fIprefix\fR は、最後の文字を含む配列内のすべての文字に NULL 以外の文字が含まれている場合を除き、NULL で終了する文字列です。\fIversion\fR フィールドは、文字 \fB00\fR を含む 2 つのオクテット (0-0) です。\fItypeflag\fR には 1 文字が含まれています。その他のフィールドはすべて、\fIISO/IEC 646: 1991\fR 規格の IRV の数字を使用した、先行する 0 で埋められた 8 進数です。各数値フィールドは、1 つ以上のスペースまたは NULL 文字で終了します。 
.sp
.LP
\fIname\fR および \fIprefix\fR フィールドによって、ファイルのパス名が生成されます。\fIprefix\fR が空の文字列でない (その最初の文字が \fBNULL\fR でない) 場合は、\fIprefix\fR (最初の \fBNULL\fR 文字まで)、スラッシュ文字、および名前を連結することによって新しいパス名が形成されます。それ以外の場合は、名前だけが使用されます。いずれの場合も、名前は最初の \fBNULL\fR 文字で終了します。\fIprefix\fR が \fBNULL\fR 文字で始まる場合、このフィールドは無視されます。この方法でサポートできるパス名は、最大 256 文字です。提供されているスペースにパス名が収まらない場合、\fBpax\fR はユーザーにエラーを通知し、ファイルのどの部分も (ヘッダーもデータも) メディア上に格納しません。 
.sp
.LP
\fIlinkname\fR フィールドは、パス名の生成に \fIprefix\fR を使用しません。そのため、\fIlinkname\fR は 100 文字に制限されています。提供されているスペースに名前が収まらない場合、\fBpax\fR はユーザーにエラーを通知し、そのリンクをメディア上に格納しようとする試みを行いません。\fImode\fR フィールドは、\fIISO/IEC 646: 1991\fR 規格の 8 進数表現でエンコードされた 12 ビットを提供します。エンコードされたビットは、\fBustar\fR \fImode\fR フィールドの次の値を表します。
.sp

.sp
.TS
tab();
lw(.57i) lw(1.64i) lw(3.29i) 
lw(.57i) lw(1.64i) lw(3.29i) 
.
ビット値IEE Std 1003.1 - 2001 ビット説明
04000S_ISUID実行時に UID を設定
02000S_ISGID実行時に GID を設定
01000\fIreserved\fRT{
将来の標準化のために予約済み
T}
00400S_IRUSRT{
ファイル所有者クラスの読み取り権
T}
00200S_IWUSRT{
ファイル所有者クラスの書き込み権
T}
00100S_IXUSRT{
ファイル所有者クラスの実行/検索権
T}
00040S_IRGRPT{
ファイルグループクラスの読み取り権
T}
00020S_IWGRPT{
ファイルグループクラスの書き込み権
T}
00010S_IXGRPT{
ファイルグループクラスの実行/検索権
T}
00004S_IROTHT{
ファイルのその他のクラスの読み取り権
T}
00002S_IWOTHT{
ファイルのその他のクラスの書き込み権
T}
00001S_IXOTHT{
ファイルのその他のクラスの実行/検索権
T}
.TE

.sp
.LP
これらのいずれかのモードビットを設定するために適切な特権が必要なときに、アーカイブからファイルを復元するユーザーが適切な特権を持っていない場合、そのユーザーが適切な特権を持っていないモードビットは無視されます。アーカイブ形式の一部のモードビットは、ボリューム \fIIEEE Std 1003.1-200x\fR 内のほかの場所でも説明されていません。実装がこれらのビットをサポートしていない場合は、そのビットを無視できます。 
.sp
.LP
\fIuid\fR フィールドと \fIgid\fR フィールドはそれぞれ、ファイルの所有者とグループのユーザー ID とグループ ID です。 
.sp
.LP
\fIsize\fR フィールドは、ファイルのサイズ (オクテット単位) です。\fItypeflag\fR フィールドがタイプ \fB1\fR (リンク) または \fI2\fR (シンボリックリンク) のファイルを指定するように設定されている場合、\fIsize\fR フィールドは 0 として指定されます。\fItypeflag\fR フィールドがタイプ 5 (ディレクトリ) のファイルを指定するように設定されている場合、\fIsize\fR フィールドは、そのレコードタイプの定義で説明されているとおりに解釈されます。タイプ 1、2、または 5 の場合、データ論理レコードは格納されません。\fItypeflag\fR フィールドが 3 (文字型特殊ファイル)、4 (ブロック型特殊ファイル)、または 6 (FIFO) に設定されている場合、\fIsize\fR フィールドの意味はボリューム \fIIEEE Std 1003.1-200x\fR では指定されておらず、データ論理レコードはメディア上に格納されません。さらに、タイプ 6 の場合、\fIsize\fR フィールドは読み取り時に無視されます。\fItypeflag\fR フィールドがその他のいずれかの値に設定されている場合、ヘッダーのあとに書き込まれる論理レコードの数は (\fIsize\fR+511)/512 であり、除算の結果生じる端数はすべて無視されます。 
.sp
.LP
\fImtime\fR フィールドは、アーカイブされた時点でのファイルの変更時間です。これは、\fBstat()\fR 関数から取得された変更時間の 8 進数値の \fIISO/IEC 646: 1991\fR 規格の表現です。 
.sp
.LP
\fIchksum\fR フィールドは、ヘッダー論理レコード内のすべてのオクテットの単純な合計の 8 進数値の \fIISO/IEC 646: 1991\fR 規格の IRV 表現です。ヘッダー内の各オクテットは、符号なしの値として扱われます。これらの値が、17 ビット以上の精度を持つ、0 に初期化された符号なし整数に加算されます。チェックサムを計算する場合、\fIchksum\fR フィールドは、すべてスペースであるかのように扱われます。 
.sp
.LP
\fItypeflag\fR フィールドは、アーカイブされるファイルのタイプを指定します。特定の実装によってタイプが認識されない場合、またはユーザーがそのタイプを作成するための適切な特権を持っていない場合は、そのファイルタイプがデータ論理レコードをメディア上に書き込む原因となる \fIsize\fR フィールドの意味を持つように定義されていれば、そのファイルは通常ファイルであるかのように抽出されます。通常ファイルへの変換が発生した場合、\fBpax\fR は、変換が実行されたことを示すエラーを生成します。\fItypeflag\fR フィールドはすべて、\fIISO/IEC 646: 1991\fR 規格の IRV でコード化されています。
.sp
.ne 2
.mk
.na
\fB\fB0\fR\fR
.ad
.RS 17n
.rt  
通常ファイルを表します。下位互換性のために、アーカイブからファイルを抽出する場合、バイナリ 0 ('\0') の \fItypeflag\fR 値は通常ファイルを示すものとして認識してください。このバージョンのアーカイブファイル形式で書き込まれたアーカイブは、\fIISO/IEC 646: 1991\fR 規格の IRV「0」の \fItypeflag\fR 値で通常ファイルを作成します。
.RE

.sp
.ne 2
.mk
.na
\fB\fB1\fR\fR
.ad
.RS 17n
.rt  
以前にアーカイブされた任意のタイプの別のファイルにリンクされているファイルを表します。このようなファイルは、同じデバイスとファイルのシリアル番号を持つ各ファイルによって識別されます。リンク先の名前は、長さが 100 オクテットより短い場合、\fBNULL\fR 文字で終了する \fIlinkname\fR フィールドで指定されます。
.RE

.sp
.ne 2
.mk
.na
\fB\fB2\fR\fR
.ad
.RS 17n
.rt  
シンボリックリンクを表します。シンボリックリンクの内容は、\fIlinkname\fR フィールド内に格納されます。
.RE

.sp
.ne 2
.mk
.na
\fB\fB3,4\fR\fR
.ad
.RS 17n
.rt  
それぞれ、文字型特殊ファイルとブロック型特殊ファイルを表します。この場合、\fIdevmajor\fR および \fIdevminor\fR フィールドには、ボリューム \fIIEEE Std 1003.1-200x\fR で形式が指定されていないデバイスを定義する情報が含まれています。実装は、そのデバイス仕様を独自のローカル仕様にマップすることも、そのエントリを無視することもできます。
.RE

.sp
.ne 2
.mk
.na
\fB\fB5\fR\fR
.ad
.RS 17n
.rt  
ディレクトリまたはサブディレクトリを指定します。ディスク割り当てがディレクトリ単位に実行されるシステムでは、\fIsize\fR フィールドには、ディレクトリが保持できるオクテットの最大数 (もっとも近いディスクブロック割り当て単位に丸めることが可能) が含まれています。0 の \fIsize\fR フィールドは、このような制限がないことを示します。この方法での制限をサポートしていないシステムは、\fIsize\fR フィールドを無視するべきです。
.RE

.sp
.ne 2
.mk
.na
\fB\fB6\fR\fR
.ad
.RS 17n
.rt  
FIFO 特殊ファイルを指定します。FIFO ファイルのアーカイブでは、このファイルの内容ではなく、その存在がアーカイブされます。
.RE

.sp
.ne 2
.mk
.na
\fB\fB7\fR\fR
.ad
.RS 17n
.rt  
実装が何からの高性能な属性を関連付けているファイルを表すために予約されています。このような拡張機能がない実装は、このファイルを通常ファイル (タイプ 0) として扱うべきです。
.RE

.sp
.ne 2
.mk
.na
\fB\fBA-Z\fR\fR
.ad
.RS 17n
.rt  
文字 \fBA\fR から \fBZ\fR までは、カスタム実装のために予約されています。その他の値はすべて、\fIIEEE Std 1003.1-200x\fR の将来のバージョンのために予約されています。
.RE

.sp
.ne 2
.mk
.na
\fB\fBSUN.devmajor\fR\fR
.ad
.RS 17n
.rt  
\fBpax\fR 拡張ヘッダーのキーワードに対する Solaris 拡張機能。ファイルのメジャーデバイス番号を指定します。 
.sp
write または copy モードで使用されているときに、\fBxustar\fR または \fBpax\fR 形式 (\fB-x format\fR を参照) が指定された場合、\fBpax\fR は、メジャーデバイス番号が大きすぎて 8 オクテットに収まらないファイルごとに \fBSUN.devmajor\fR 拡張ヘッダーレコードを含めます。
.RE

.sp
.ne 2
.mk
.na
\fB\fBSUN.devminor\fR\fR
.ad
.RS 17n
.rt  
\fBpax\fR 拡張ヘッダーのキーワードに対する Solaris 拡張機能。ファイルのマイナーデバイス番号を指定します。 
.sp
write または copy モードで使用されているときに、\fBxustar\fR または \fBpax\fR 形式 (\fB-x format\fR を参照) が指定された場合、\fBpax\fR は、マイナーデバイス番号が大きすぎて 8 オクテットに収まらないファイルごとに \fBSUN.\fR\fIdevminor\fR 拡張ヘッダーレコードを含めます。
.RE

.sp
.ne 2
.mk
.na
\fB\fBSUN.holesdata\fR\fR
.ad
.RS 17n
.rt  
\fBpax\fR 拡張ヘッダーのキーワードに対する Solaris 拡張機能。スパースファイルのデータとホールのペアを指定します。 
.sp
write または copy モードで、\fBxustar\fR または \fBpax\fR 形式 (\fB-x format\fR を参照) が指定された場合、基盤となるファイルシステムがホールを含むファイルの検出をサポートしていて (\fBfpathconf\fR(2) を参照)、アーカイブされるファイル内に少なくとも 1 つのホールが存在することを報告すると、\fBpax\fR は \fBSUN.holesdate\fR 拡張ヘッダーレコードを含めます。\fIvalue\fR は、次の形式の 2 つ以上の連続したエントリで構成されます。
.sp
.in +2
.nf
\fBSPACE\fR\fIdata_offset\fR\fBSPACE\fR\fIhole_offset\fR
.fi
.in -2
.sp

ここで、データとホールのオフセットはそれぞれ、\fBlseek\fR(2) に \fBSEEK_DATA\fR と \fBSEEK_HOLE\fR を渡すことによって返される long 値です。たとえば、次のエントリは、バイト 0、24576、および 49152 にデータのオフセットがあり、バイト 8192、32768、および 49159 にホールのオフセットがあるファイルの拡張ヘッダー内の \fBSUN.holesdata\fR エントリの例です。49 \fBSUN.holesdata= 0 8192 24576 32768 49152 49159\fR。
.sp
.in +2
.nf
49 SUN.holesdata= 0 8192 24576 32768 49152 49159
.fi
.in -2
.sp

read または copy モードでアーカイブからファイルを抽出するとき、ファイルの拡張ヘッダー内に \fBSUN.holesdata =\fR のペアが見つかった場合、そのファイルは、このデータを使用して識別されたホールとともに復元されます。たとえば、上の例で示されている \fBSUN.holesdata\fR の場合は、バイト 0 から 8192 までがデータとして復元され、次のデータ位置 (24576) までホールが作成され、バイト 24576 から 32768 までがデータとして復元されます。以降も同様に処理されます。
.RE

.sp
.ne 2
.mk
.na
\fB\fBX\fR \fR
.ad
.RS 17n
.rt  
\fBxustar\fR 形式 (\fB-x format\fR を参照) の拡張ヘッダーを指定する Solaris のカスタム \fBtypeflag\fR 実装。\fBtypeflag 'x'\fR 拡張ヘッダーは、\fBustar typeflag 'x'\fR 拡張ヘッダーとして扱われます。
.RE

.sp
.ne 2
.mk
.na
\fB\fBE\fR\fR
.ad
.RS 17n
.rt  
拡張属性ヘッダーを指定する Solaris のカスタム \fBtypeflag\fR 実装。\fBfsattr\fR(5) を参照してください。
.RE

.sp
.LP
\fBustar\fR 交換形式を使用してソケットをアーカイブしようとすると、診断メッセージが生成されます。その他のファイルタイプの取り扱いは実装で定義されています。 
.sp
.LP
\fImagic\fR フィールドは、このアーカイブがこのアーカイブ形式で出力されたことを指定します。このフィールドに \fBustar\fR (\fIISO/IEC 646: 1991\fR 規格の IRV の 5 文字が示され、そのあとに \fBNULL\fR) が含まれている場合、\fIuname\fR および \fIgname\fR フィールドにはそれぞれ、ファイルの所有者とグループの \fIISO/IEC 646: 1991\fR 規格の IRV 表現が (必要に応じて、収めるために切り捨てられて) 含まれています。ファイルが特権付きの、保護を保持するバージョンのユーティリティーによって復元される場合は、ユーザーおよびグループデータベースでこれらの名前がスキャンされます。見つかった場合は、\fIuid\fR および \fBgid\fR フィールド内に含まれている値ではなく、これらのファイル内に含まれているユーザー ID とグループ ID が使用されます。
.SS "\fBcpio\fR 交換形式"
.sp
.LP
オクテット指向の \fBcpio\fR アーカイブ形式は、それぞれ、ファイルを説明しているヘッダー、ファイルの名前、およびファイルの内容で構成された一連のエントリです。
.sp
.LP
アーカイブは、一連の固定サイズのオクテットのブロックとして記録できます。このブロック化は、物理 I/O をより効率的にするためにのみ使用されます。ブロックの最後のグループは、常にフルサイズです。 
.sp
.LP
オクテット指向の \fBcpio\fR アーカイブ形式では、個々のエントリ情報が次の「オクテット指向の \fBcpio\fR アーカイブエントリ」の表に示され、説明されている順序で並べられます。詳細は、\fBcpio.h\fR ヘッダーを参照してください。
.sp

.sp
.TS
tab();
lw(1.83i) lw(1.83i) lw(1.83i) 
lw(1.83i) lw(1.83i) lw(1.83i) 
.
ヘッダーのフィールド名長さ (オクテット単位)解釈
\fIc_magic\fR68 進数
\fIc_dev\fR68 進数
\fIc_ino\fR68 進数
\fIc_mode\fR68 進数
\fIc_uid\fR68 進数
\fIc_gid\fR68 進数
\fIc_nlink\fR68 進数
\fIc_rdev\fR68 進数
\fIc_mtime\fR118 進数
\fIc_namesize\fR68 進数
\fIc_filesize\fR118 進数
.TE

.sp

.sp
.TS
tab();
lw(1.83i) lw(1.83i) lw(1.83i) 
lw(1.83i) lw(1.83i) lw(1.83i) 
.
ファイル名のフィールド名長さ解釈
\fIc_name\fR\fIc_namesize\fRパス名の文字列
.TE

.sp

.sp
.TS
tab();
lw(1.83i) lw(1.83i) lw(1.83i) 
lw(1.83i) lw(1.83i) lw(1.83i) 
.
ファイル名のフィールド名長さ解釈
\fIc_filedata\fR\fIc_filesize\fRデータ
.TE

.SS "\fBcpio\fR ヘッダー"
.sp
.LP
アーカイブ内のファイルごとに、前に記載したように定義されたヘッダー。ヘッダーフィールド内の情報は、8 進数として解釈される \fIISO/IEC 646: 1991\fR 規格文字のストリームとして書き込まれます。これらの 8 進数は、数値の最上位桁に \fIISO/IEC 646: 1991\fR 規格の IRV 0 を付加することによって、必要な長さに拡張されます。その結果が、まずオクテットのストリームの最上位桁に書き込まれます。これらのフィールドは、次のように解釈されます。
.sp
.ne 2
.mk
.na
\fB\fIc_magic\fR\fR
.ad
.RS 15n
.rt  
識別する値である \fB"070707"\fR を含めることによって、アーカイブをトランスポータブルアーカイブとして識別します。
.RE

.sp
.ne 2
.mk
.na
\fB\fIc_dev,c_ino\fR\fR
.ad
.RS 15n
.rt  
アーカイブ内のファイルを一意に識別する値が含まれています (つまり、同じファイルへのリンクでないかぎり、\fIc_dev\fR 値と \fIc_ino\fR 値の同じペアを含むファイルは存在しません)。これらの値は、未指定の方法で決定されます。
.RE

.sp
.ne 2
.mk
.na
\fB\fIc_mode\fR\fR
.ad
.RS 15n
.rt  
次の表で定義されているファイルタイプとアクセス権が含まれています。
.sp
ボリューム \fIIEEE Std 1003.1-200x\fR に準拠するシステムでは、ディレクトリ、FIFO、シンボリックリンク、および通常ファイルがサポートされています。前に定義された追加の値は、既存のシステムとの互換性のために予約されています。追加のファイルタイプをサポートできます。このようなファイルを、ほかのシステムに転送することを目的としたアーカイブには書き込まないでください。
.sp

.sp
.TS
tab();
lw(1.83i) lw(1.83i) lw(1.83i) 
lw(1.83i) lw(1.83i) lw(1.83i) 
.
ファイルアクセス権の名前値内容
\fBC_IRUSR\fR\fB000400\fR所有者による
\fBC_IWUSR\fR\fB000200\fR所有者による
\fBC_IXUSR\fR\fB000100\fR所有者による
\fBC_IRGRP\fR\fB000040\fRグループによる
\fBCW_IWFGP\fR\fB000020\fRグループによる
\fBCW_IXGRP\fR\fB000010\fRグループによる
\fBCW_IROTH\fR\fB000004\fRその他のユーザーによる
\fBCW_IWOTH\fR\fB000002\fRその他のユーザーによる
\fBCW_IXOTH\fR\fB000001\fRその他のユーザーによる
\fBCW_ISUID\fR\fB004000\fR\fBuid\fR を設定
\fBW_ISGID\fR\fB002000\fR\fBgid\fR を設定
\fBW_ISVTX\fR\fB001000\fR予約済み
.TE

.sp

.sp
.TS
tab();
lw(1.83i) lw(1.83i) lw(1.83i) 
lw(1.83i) lw(1.83i) lw(1.83i) 
.
ファイルタイプの名前値内容
\fBC_ISDIR\fR\fB040000\fRディレクトリ
\fBC_ISFIFO\fR\fB010000\fRFIFO
\fBC_ISREG\fR\fB0100000\fR標準ファイル
\fBC_ISLNK\fR\fB0120000\fRシンボリックリンク
\fBC_ISBLK\fR\fB060000\fRブロック型特殊ファイル
\fBC_ISCHR\fR\fB020000\fR文字型特殊ファイル
\fBC_ISSOCK\fR\fB0140000\fRソケット
\fBC_ISCTG\fR\fB0110000\fR予約済み
.TE

.RE

.sp
.ne 2
.mk
.na
\fB\fIc_uid\fR\fR
.ad
.RS 15n
.rt  
所有者のユーザー ID が含まれています。
.RE

.sp
.ne 2
.mk
.na
\fB\fIc_gid\fR\fR
.ad
.RS 15n
.rt  
グループのグループ ID が含まれています
.RE

.sp
.ne 2
.mk
.na
\fB\fIc_nlink\fR\fR
.ad
.RS 15n
.rt  
ファイルを参照しているアーカイブ内のリンクの数以上の数値が含まれています。\fBcpio\fR アーカイブに追加するために \fB-a\fR オプションが使用されている場合、\fBpax\fR は、アーカイブの追加された部分の \fIc_nlink\fR 値を計算するときにアーカイブの既存の部分にあるファイルを考慮する必要はありません。また、同じ \fIc_dev\fR 値と \fIc_ino\fR 値を持つファイルがアーカイブに追加された場合は、アーカイブの既存の部分にある \fIc_nlink\fR 値を変更する必要もありません。
.RE

.sp
.ne 2
.mk
.na
\fB\fIc_rdev\fR\fR
.ad
.RS 15n
.rt  
文字型またはブロック型特殊ファイルの、実装で定義された情報が含まれています。
.RE

.sp
.ne 2
.mk
.na
\fB\fIc_mtime\fR\fR
.ad
.RS 15n
.rt  
アーカイブが作成された時点でのファイルの変更の最新の時間が含まれています。
.RE

.sp
.ne 2
.mk
.na
\fB\fIc_namesize\fR\fR
.ad
.RS 15n
.rt  
パス名の長さ (終了の NULL 文字を含む) が含まれています。
.RE

.sp
.ne 2
.mk
.na
\fB\fIc_filesize\fR\fR
.ad
.RS 15n
.rt  
ファイルの長さ (オクテット単位) が含まれています。これは、ヘッダー構造のあとにあるデータセクションの長さです。
.RE

.SS "\fBcpio\fR ファイルの名前"
.sp
.LP
\fIc_name\fR フィールドには、ファイルのパス名が含まれています。このフィールドの長さ (オクテット単位) は、\fIc_namesize\fR の値です。無効なパス名を作成するファイル名がメディア上で見つかった場合、そのファイルからのデータがファイル階層に格納されるかどうかや、どのような名前で格納されるかは実装で定義されています。文字はすべて、\fIISO/IEC 646: 1991\fR 規格の IRV によって表されます。実装間の移植性を最大化するために、名前は、移植可能なファイル名文字セットによって最上位ビットが 0 のオクテットとして表される文字から選択するようにしてください。実装によって、ファイル、ユーザー、グループの名前に移植可能なファイル名文字セット以外の文字を使用することがサポートされている場合は、これらの文字の、実装で定義された 1 つ以上のエンコーディングが交換のために提供されます。\fBpax\fR は、ボリューム \fIIEEE Std 1003.1-200x\fR で説明されている手順を使用してアクセスできないローカルシステム上にはファイル名を作成しません。無効なファイル名を作成するファイル名がメディア上で見つかった場合、そのファイルからのデータがローカルファイルシステム上に格納されるかどうかや、どのような名前で格納されるかは実装で定義されています。\fBpax\fR は、ファイルが無視されることを示すエラーを生成するかぎり、これらのファイルを無視することを選択できます。
.SS "\fBcpio\fR ファイルのデータ"
.sp
.LP
\fIc_name\fR のあとに、\fIc_filesize\fR オクテットのデータが存在します。このようなデータの解釈は、ファイルに依存する方法で実行されます。\fIc_filesize\fR が 0 である場合、\fIc_filedata\fR にデータは含まれていません。アーカイブから復元する場合は、次のようになります。 
.RS +4
.TP
.ie t \(bu
.el o
ユーザーが指定したタイプのファイルを作成するための適切な特権を持っていない場合、\fBpax\fR はそのエントリを無視し、エラーメッセージを標準エラーに書き込みます。
.RE
.RS +4
.TP
.ie t \(bu
.el o
復元されるデータが含まれているのは通常ファイルだけです。通常ファイルが、ユーザーがフォーマット読み取りユーティリティーに課している可能性のある何らかの選択条件を満たしている場合、このようなデータは復元されます。 
.RE
.RS +4
.TP
.ie t \(bu
.el o
ユーザーが特定の \fImode\fR フラグを設定するための適切な特権を持っていない場合、このフラグは無視されます。アーカイブ形式の一部の \fImode\fR フラグは、ボリューム \fIIEEE Std 1003.1-200x\fR では説明されていません。実装がこれらのフラグをサポートしていない場合は、そのフラグを無視できます。 
.RE
.SS "\fBcpio\fR の特殊なエントリ"
.sp
.LP
FIFO 特殊ファイル、ディレクトリ、およびトレーラは、\fIc_filesize\fR を 0 にして記録されます。その他の特殊ファイルの場合、\fIc_filesize\fR は、ボリューム \fIIEEE Std 1003.1-200x\fR では指定されていません。アーカイブ内の次のファイルエントリのヘッダーは、その前のファイルエントリの最後のオクテットの直後に書き込まれます。ファイル名のトレーラを指すヘッダーは、アーカイブの最後を示します。このようなヘッダーのあとにあるアーカイブの最後のブロック内のオクテットの内容は定義されていません。 
.SH 属性
.sp
.LP
属性についての詳細は、マニュアルページの \fBattributes\fR(5) を参照してください。
.sp

.sp
.TS
tab() box;
cw(2.75i) |cw(2.75i) 
lw(2.75i) |lw(2.75i) 
.
属性タイプ属性値
_
使用条件system/core-os
_
インタフェースの安定性確実
_
標準T{
\fBstandards\fR(5) を参照してください。
T}
.TE

.SH 関連項目
.sp
.LP
\fBchmod\fR(1), \fBcpio\fR(1), \fBed\fR(1), \fBprintf\fR(1), \fBtar\fR(1), \fBmkdir\fR(2), \fBlseek\fR(2), \fBstat\fR(2), \fBwrite\fR(2), \fBarchives.h\fR(3HEAD), \fBattributes\fR(5), \fBenviron\fR(5), \fBfnmatch\fR(5), \fBformats\fR(5), \fBfsattr\fR(5), \fBlargefile\fR(5), \fBregex\fR(5), \fBstandards\fR(5)
.sp
.LP
\fIIEEE Std 1003.1-200x\fR、\fIISO/IEC 646: 1991\fR、\fIISO POSIX-2:1993 規格\fR
