'\" te
.\" Copyright (c) 1990, Regents of the University of Michigan. All Rights Reserved.
.\" Portions Copyright (c) 2004, 2011, Oracle and/or its affiliates. All rights reserved.
.TH ldapmodify 1 "2004 年 1 月 15 日" "SunOS 5.11" "ユーザーコマンド"
.SH 名前
ldapmodify, ldapadd \- LDAP エントリ追加および変更ツール
.SH 形式
.LP
.nf
\fBldapmodify\fR [\fB-a\fR] [\fB-c\fR] [\fB-r\fR] [\fB-n\fR] [\fB-v\fR] [\fB-F\fR] [\fB-b\fR] [\fB-A\fR] [\fB-q\fR] 
     [\fB-H\fR] [\fB-?\fR] [\fB-E\fR] [\fB-J\fR] [\fB-Z\fR] [\fB-M\fR] [\fB-d\fR \fIdebuglevel\fR] 
     [\fB-D\fR \fIbindDN\fR] [\fB-j\fR \fIfilename\fR] [\fB-J\fR [:\fIcriticality\fR]] 
     [\fB-B\fR \fIbaseDN\fR] [\fB-V\fR \fIversion\fR] [\fB-Y\fR \fIproxyDN\fR] [\fB-O\fR \fIhopLimit\fR] 
     [\fB-i\fR \fIlocale\fR] [\fB-k\fR \fIpath\fR] [\fB-e\fR \fIerrorFile\fR] [\fB-P\fR \fIpath\fR] 
     [\fB-N\fR \fIcertificate\fR] [\fB-w\fR \fIpasswd\fR] [\fB-o\fR \fIattributename\fR=\fIvalue\fR] 
     [\fB-h\fR \fIldaphost\fR] [\fB-W\fR \fIpassword\fR] [\fB-p\fR \fIldapport\fR] [\fB-f\fR \fIfile\fR] 
     [\fB-l\fR \fInb-ldap-connections\fR]
.fi

.LP
.nf
\fBldapadd\fR [\fB-c\fR] [\fB-n\fR] [\fB-v\fR] [\fB-F\fR] 
     [ [\fB-b\fR] [\fB-A\fR] [\fB-q\fR] [\fB-H\fR] [\fB-?\fR] [\fB-E\fR] [\fB-J\fR] [\fB-Z\fR] [\fB-M\fR]\fB-d\fR \fIdebuglevel\fR] 
     [\fB-D\fR \fIbindDN\fR] [\fB-j\fR \fIfilename\fR] [\fB-B\fR \fIbaseDN\fR] [\fB-V\fR \fIversion\fR] 
     [\fB-Y\fR \fIproxyDN\fR] [\fB-O\fR \fIhopLimit\fR] [\fB-i\fR \fIlocale\fR] [\fB-k\fR \fIpath\fR] 
     [\fB-e\fR \fIerrorFile\fR] [\fB-P\fR \fIpath\fR] [\fB-N\fR \fIcertificate\fR] [\fB-w\fR \fIpasswd\fR] 
     [\fB-o\fR \fIattributename\fR=\fIvalue\fR] [\fB-h\fR \fIldaphost\fR] [\fB-W\fR \fIpassword\fR] 
     [\fB-p\fR \fIldapport\fR] [\fB-f\fR \fIfile\fR] [\fB-l\fR \fInb-ldap-connections\fR]
.fi

.SH 機能説明
.sp
.LP
\fBldapmodify\fR ユーティリティーは \fBLDAP\fR サーバーへの接続を開いてバインドし、エントリを変更または追加します。エントリ情報は標準入力から、または \fB-f\fR オプションを使用して指定された \fIfile\fR から読み取られます。\fBldapadd\fR ユーティリティーは、\fBldapmodify\fR ツールへのハードリンクとして実装されます。\fBldapadd\fR として呼び出された場合は、\fB-a\fR (新しいエントリの追加) オプションが自動的にオンに設定されます。
.sp
.LP
\fBldapadd\fR と \fBldapmodify\fR はどちらも、同じエントリに対する重複した属性の名前と値のペアを拒否します。
.SH オプション
.sp
.LP
サポートしているオプションは、次のとおりです。
.sp
.ne 2
.mk
.na
\fB\fB-a\fR\fR
.ad
.sp .6
.RS 4n
新しいエントリを追加します。デフォルトでは、\fBldapmodify\fR は既存のエントリを変更します。\fBldapadd\fR として呼び出された場合は、このオプションが常に設定されます。
.RE

.sp
.ne 2
.mk
.na
\fB\fB-A\fR\fR
.ad
.sp .6
.RS 4n
ASCII 以外のモード: \fB-v\fR オプションと組み合わせて、ASCII 以外の値を表示します。
.RE

.sp
.ne 2
.mk
.na
\fB\fB-b\fR\fR
.ad
.sp .6
.RS 4n
バイナリファイルを処理します。\fBldapmodify\fR ツールは、入力内のすべての属性値を走査して、それが有効なファイル参照であるかどうかを判定します。参照が有効な場合は、そのファイルの内容を属性の値として使用します。このオプションは、属性のバイナリデータ (JPEG イメージなど) を入力するために使用されます。たとえば、対応する LDIF 入力は \fBjpegPhoto: /tmp/photo.jpg\fR になります。また、\fBldapmodify\fR ツールは、ファイルの内容を直接含めるための LDIF \fB:< \fIURL\fR\fR の表記もサポートしています。
.RE

.sp
.ne 2
.mk
.na
\fB\fB-B\fR \fIbaseDN\fR\fR
.ad
.sp .6
.RS 4n
追加を実行するときのベース DN を、通常はシェルの二重引用符 (\fB""\fR) 内に指定します。すべてのエントリがこの接尾辞の下に配置されるため、一括インポート機能が提供されます。
.RE

.sp
.ne 2
.mk
.na
\fB\fB-c\fR\fR
.ad
.sp .6
.RS 4n
継続動作モードを指定します。エラーが報告されても、\fBldapmodify\fR および \fBldapadd\fR は変更を続行します。デフォルトでは、エラーを報告したあとに終了します。
.RE

.sp
.ne 2
.mk
.na
\fB\fB-D\fR \fIbindDN\fR\fR
.ad
.sp .6
.RS 4n
識別名 \fIbindDN\fR を使用してディレクトリにバインドします。
.RE

.sp
.ne 2
.mk
.na
\fB\fB-d\fR \fIdebuglevel\fR\fR
.ad
.sp .6
.RS 4n
\fBLDAP\fR のデバッグレベルを設定します。\fBldapmodify\fR および \fBldapadd\fR に役立つデバッグレベルは次のとおりです。 
.sp
.ne 2
.mk
.na
\fB\fB1\fR\fR
.ad
.RS 7n
.rt  
トレース
.RE

.sp
.ne 2
.mk
.na
\fB\fB2\fR\fR
.ad
.RS 7n
.rt  
パケット
.RE

.sp
.ne 2
.mk
.na
\fB\fB4\fR\fR
.ad
.RS 7n
.rt  
引数
.RE

.sp
.ne 2
.mk
.na
\fB\fB32\fR\fR
.ad
.RS 7n
.rt  
フィルタ
.RE

.sp
.ne 2
.mk
.na
\fB\fB128\fR\fR
.ad
.RS 7n
.rt  
アクセス制御
.RE

複数のカテゴリのデバッグ情報を要求するには、マスクを追加します。たとえば、トレースとフィルタの情報を要求するには、33 の \fIdebuglevel\fR を指定します。
.RE

.sp
.ne 2
.mk
.na
\fB\fB-e\fR \fIerrorFile\fR\fR
.ad
.sp .6
.RS 4n
入力内の無効な更新文が、デバッグのために \fIerrorFile\fR にコピーされます。大きな LDIF 入力を処理しているときのエラーを修正するには、\fB-c\fR オプションとともに使用します。
.RE

.sp
.ne 2
.mk
.na
\fB\fB-E\fR\fR
.ad
.sp .6
.RS 4n
認証応答制御を使用してバインド識別情報を公開 (報告) するようサーバーに要求します。
.RE

.sp
.ne 2
.mk
.na
\fB\fB-F\fR\fR
.ad
.sp .6
.RS 4n
\fBreplica:\fR で始まる入力行の内容には関係なく、すべての変更を強制的に適用します。デフォルトでは、\fBreplica:\fR 行が使用中の \fBLDAP\fR サーバーホストおよびポートと比較されて、replog レコードを適用するかどうかが判定されます。
.RE

.sp
.ne 2
.mk
.na
\fB\fB-f\fR \fIfile\fR\fR
.ad
.sp .6
.RS 4n
標準入力の代わりに \fIfile\fR からエントリ変更情報を読み取ります。
.RE

.sp
.ne 2
.mk
.na
\fB\fB-?\fR\fR
.ad
.sp .6
.RS 4n
すべてのオプションを簡単に説明した使用法のヘルプテキストを表示します。
.RE

.sp
.ne 2
.mk
.na
\fB\fB-H\fR \fR
.ad
.sp .6
.RS 4n
すべてのオプションを簡単に説明した使用法のヘルプテキストを表示します。
.RE

.sp
.ne 2
.mk
.na
\fB\fB-h\fR \fIldaphost\fR\fR
.ad
.sp .6
.RS 4n
LDAP サーバーが実行されている代替ホストを指定します。
.RE

.sp
.ne 2
.mk
.na
\fB\fB-i\fR \fIlocale\fR\fR
.ad
.sp .6
.RS 4n
\fB-f\fR \fILDIFfile\fR または標準入力で使用する文字セットを指定します。デフォルトは、\fBLANG\fR 環境変数で指定された文字セットです。このオプションを使用して、指定した文字セットから UTF8 への変換を実行し、それによって \fBLANG\fR 設定をオーバーライドすることを選択できます。
.RE

.sp
.ne 2
.mk
.na
\fB\fB-j\fR \fIfilename\fR\fR
.ad
.sp .6
.RS 4n
バインド DN 用のパスワードまたは SSL クライアントの鍵データベース用のパスワードを含むファイルを指定します。パスワードを保護するには、このオプションをスクリプトで使用し、セキュリティー保護されたファイルにパスワードを保存します。このオプションは、\fB-w\fR および \fB-W\fR オプションとは相互に排他的です。
.RE

.sp
.ne 2
.mk
.na
\fB\fB-J\fR [:\fIcriticality\fR[:\fI value\fR|::\fIb64value\fR|\fIb64value\fR|:\fI fileurl\fR]]\fR
.ad
.sp .6
.RS 4n
criticality はブール値です (デフォルトは \fBfalse\fR)。
.RE

.sp
.ne 2
.mk
.na
\fB\fB-k\fR \fIpath\fR\fR
.ad
.sp .6
.RS 4n
変換ルーチンを含むディレクトリへのパスを指定します。これらのルーチンは、ディレクトリサーバーでデフォルトではサポートされていないロケールを指定したい場合に使用されます。これは NLS のサポート用です。
.RE

.sp
.ne 2
.mk
.na
\fB\fB-l\fR \fInb-ldap-connections\fR\fR
.ad
.sp .6
.RS 4n
\fBldapadd\fR または \fBldapmodify\fR がディレクトリ内の変更を処理するために開く \fBLDAP\fR 接続の数を指定します。デフォルトは 1 つの接続です。
.RE

.sp
.ne 2
.mk
.na
\fB\fB-M\fR\fR
.ad
.sp .6
.RS 4n
スマートリフェラルを管理します。これらが操作のターゲットである場合は、リフェラルに従って取得されたエントリではなく、リフェラルを含むエントリを変更します。
.RE

.sp
.ne 2
.mk
.na
\fB\fB-n\fR\fR
.ad
.sp .6
.RS 4n
変更をプレビューしますが、エントリへの変更は行いません。\fB-v\fR および \fB-d\fR と組み合わせるとデバッグに役立ちます。
.RE

.sp
.ne 2
.mk
.na
\fB\fB-N\fR \fIcertificate\fR\fR
.ad
.sp .6
.RS 4n
証明書に基づくクライアント認証で使用する証明書名を指定します。たとえば、\fB-N\fR \fB"Directory-Cert"\fR と指定します。
.RE

.sp
.ne 2
.mk
.na
\fB\fB-o\fR \fIattributename\fR=\fI value\fR\fR
.ad
.sp .6
.RS 4n
SASL メカニズムや、セキュリティープロパティーなどのその他のオプションの場合、動作モード、認可 ID、認証 ID などを指定します。
.sp
各種の属性名とそれらの値は次のとおりです。
.sp
.ne 2
.mk
.na
\fB\fBsecProp\fR=\fI"number"\fR\fR
.ad
.RS 20n
.rt  
SASL セキュリティープロパティーの定義用。
.RE

.sp
.ne 2
.mk
.na
\fB\fBrealm\fR=\fI"value"\fR\fR
.ad
.RS 20n
.rt  
SASL レルムを指定します (デフォルトは \fBrealm=none\fR)。
.RE

.sp
.ne 2
.mk
.na
\fB\fBauthzid\fR=\fI"value"\fR\fR
.ad
.RS 20n
.rt  
SASL バインドの認可 ID 名を指定します。
.RE

.sp
.ne 2
.mk
.na
\fB\fBauthid\fR=\fI"value"\fR\fR
.ad
.RS 20n
.rt  
SASL バインドの認証 ID を指定します。
.RE

.sp
.ne 2
.mk
.na
\fB\fBmech\fR=\fI"value"\fR\fR
.ad
.RS 20n
.rt  
さまざまな SASL メカニズムを指定します。
.RE

.RE

.sp
.ne 2
.mk
.na
\fB\fB-O\fR \fIhopLimit\fR\fR
.ad
.sp .6
.RS 4n
変更するエントリの検索中に従うべき参照ホップの最大数を指定します。デフォルトでは、制限はありません。
.RE

.sp
.ne 2
.mk
.na
\fB\fB-p\fR \fIldapport\fR\fR
.ad
.sp .6
.RS 4n
セキュリティー保護された LDAP サーバーが待機している代替 \fBTCP\fR ポートを指定します。
.RE

.sp
.ne 2
.mk
.na
\fB\fB-P\fR \fIpath\fR\fR
.ad
.sp .6
.RS 4n
クライアントの証明書データベースのパスとファイル名を指定します。例: 
.sp
.in +2
.nf
-P /home/uid/.netscape/cert7.db
.fi
.in -2

このコマンドをディレクトリサーバーと同じホスト上で使用している場合は、そのサーバーの独自の証明書データベースを使用できます。例: 
.sp
.in +2
.nf
-P \fIinstallDir\fR/lapd-serverID/alias/cert7.db
.fi
.in -2

サーバー認証のみを指定するには、\fB-P\fR オプションだけを使用します。
.RE

.sp
.ne 2
.mk
.na
\fB\fB-r\fR\fR
.ad
.sp .6
.RS 4n
既存の値を指定された値に置き換えます。\fBldapmodify\fR では、これがデフォルトです。\fBldapadd\fR が呼び出された場合、または \fB-a\fR オプションが指定されている場合、\fB-r\fR オプションは無視されます。
.RE

.sp
.ne 2
.mk
.na
\fB\fB-v\fR\fR
.ad
.sp .6
.RS 4n
冗長モードを使用し、診断が標準出力に書き込まれるようにします。
.RE

.sp
.ne 2
.mk
.na
\fB\fB-V\fR \fIversion\fR\fR
.ad
.sp .6
.RS 4n
削除操作に使用される LDAP プロトコルのバージョン番号 (2 または 3 のどちらか) を指定します。LDAP v3 がデフォルトです。v3 をサポートしていないサーバーに接続しているときは、LDAP v2 を指定します。
.RE

.sp
.ne 2
.mk
.na
\fB\fB-W\fR \fIpassword\fR\fR
.ad
.sp .6
.RS 4n
\fB-P\fR オプションで指定されたクライアントの鍵データベースのパスワードを指定します。このオプションは、証明書に基づくクライアント認証では必須です。コマンド行で \fIpassword\fR を指定すると、システム上のほかのユーザーが \fBps\fR コマンドを使用してそのパスワードを表示できるため、セキュリティーの問題が発生します。ファイルからパスワードを指定するには、代わりに \fB-j\fR を使用します。このオプションは、\fB-j\fR とは相互に排他的です。
.RE

.sp
.ne 2
.mk
.na
\fB\fB-w\fR \fIpasswd\fR\fR
.ad
.sp .6
.RS 4n
ディレクトリへの認証のパスワードとして \fIpasswd\fR を使用します。認証に使用されるパスワードを指定するために \fB-w\fR \fIpasswd\fR を使用すると、システムのほかのユーザーが \fBps\fR コマンドを使用して、スクリプトファイルまたはシェルの履歴でそのパスワードを表示できるようになります。このオプションを指定せずに \fBldapmodify\fR コマンドまたは \fBldapadd\fR コマンドを使用した場合、このコマンドはパスワードの入力を求め、それを標準入力から読み取ります。\fB-w\fR オプションを指定せずに使用されると、パスワードがほかのユーザーに表示されなくなります。
.RE

.sp
.ne 2
.mk
.na
\fB\fB-Y\fR \fIproxyid\fR\fR
.ad
.sp .6
.RS 4n
変更操作で使用するプロキシ DN (プロキシ設定された認可 ID) を、通常はシェルの二重引用符 (\fB""\fR) 内に指定します。
.RE

.sp
.ne 2
.mk
.na
\fB\fB-Z\fR\fR
.ad
.sp .6
.RS 4n
証明書に基づくクライアント認証を提供するために SSL を使用することを指定します。このオプションには、\fB-N\fR と SSL パスワード、および証明書と鍵データベースを識別するためにに必要なその他のすべての SSL オプションが必要です。
.RE

.SH 終了ステータス
.sp
.LP
次の終了ステータスが返されます。
.sp
.ne 2
.mk
.na
\fB\fB0\fR\fR
.ad
.RS 12n
.rt  
正常終了。
.RE

.sp
.ne 2
.mk
.na
\fB0 以外\fR
.ad
.RS 12n
.rt  
エラーが発生した。診断メッセージが標準エラー出力に書き込まれます。
.RE

.SH 使用例
.sp
.LP
\fIfile\fR の内容 (\fB-f\fR オプションが指定されていない場合は標準入力) の形式を以降の例に示します。
.LP
\fB例 1 \fRエントリの変更
.sp
.LP
ファイル \fB/tmp/entrymods\fR には、次の変更指示が含まれています。

.sp
.in +2
.nf
     dn: cn=Modify Me, o=XYZ, c=US
    changetype: modify
    replace: mail
    mail: modme@atlanta.xyz.com
    -
    add: title
    title: System Manager
    -
    add: jpegPhoto
    jpegPhoto:< file:///tmp/modme.jpeg
    -
    delete: description
    -
.fi
.in -2

.sp
.LP
次のコマンド

.sp
.in +2
.nf
example% ldapmodify -r -f /tmp/entrymods
.fi
.in -2
.sp

.sp
.LP
\fBModify Me\fR エントリを次のように変更します。

.RS +4
.TP
1.
\fBmail\fR 属性の現在の値が \fBmodme@atlanta.xyz.com\fR の値に置き換えられます。
.RE
.RS +4
.TP
2.
\fBSystem Manager\fR の値を持つ \fBtitle\fR 属性が追加されます。
.RE
.RS +4
.TP
3.
ファイル \fB/tmp/modme.jpeg\fR の内容を使用して、\fBjpegPhoto\fR 属性が属性値として追加されます。
.RE
.RS +4
.TP
4.
\fBdescription\fR 属性が削除されます。
.RE
.LP
\fB例 2 \fR新しいエントリの作成
.sp
.LP
ファイル \fB/tmp/newentry\fR には、新しいエントリを作成するための次の情報が含まれています。

.sp
.in +2
.nf
    dn: cn=Ann Jones, o=XYZ, c=US
    objectClass: person
    cn: Ann Jones
    cn: Annie Jones
    sn: Jones
    title: Director of Research and Development
    mail: ajones@londonrd.xyz.us.com
    uid: ajones
.fi
.in -2

.sp
.LP
コマンド

.sp
.in +2
.nf
example% \fBldapadd -f /tmp/newentry\fR
.fi
.in -2
.sp

.sp
.LP
このファイル内の情報を使用して、\fBAnn Jones\fR の新しいエントリを追加します。

.LP
\fB例 3 \fRIPv6 サーバー上の新しいエントリの作成
.sp
.LP
ファイル \fB/tmp/newentry\fR には、IPv6 サーバー上に新しいエントリを作成するための次の情報が含まれています。

.sp
.in +2
.nf
    dn: cn=Ann Jones, o=XYZ, c=US
    objectClass: person
    cn: Ann Jones
    cn: Annie Jones
    sn: Jones
    title: Director of Research and Development
    mail: ajones@londonrd.xyz.us.com
    uid: ajones
.fi
.in -2

.sp
.LP
コマンド

.sp
.in +2
.nf
example% ldapadd -c -v -h '['fec0::111:a00:20ff:feaa:a364']':389 \e
                         -D cn=Directory Manager -w secret \e
                         -f /tmp/entry 
.fi
.in -2
.sp

.sp
.LP
このファイル内の情報を使用して、\fBDirectory Manager\fR の新しいエントリを追加します。

.LP
\fB例 4 \fRエントリの削除
.sp
.LP
ファイル \fB/tmp/badentry\fR には、削除されるエントリに関する次の情報が含まれています。

.sp
.in +2
.nf
    dn: cn=Ann Jones, o=XYZ, c=US
    changetype: delete
.fi
.in -2

.sp
.LP
次のコマンド

.sp
.in +2
.nf
example% ldapmodify -f /tmp/badentry
.fi
.in -2
.sp

.sp
.LP
Ann Jones のエントリを削除します。

.SH 属性
.sp
.LP
属性についての詳細は、\fBattributes\fR(5) を参照してください。
.sp

.sp
.TS
tab() box;
cw(2.75i) |cw(2.75i) 
lw(2.75i) |lw(2.75i) 
.
属性タイプ属性値
_
使用条件system/core-os
インタフェースの安定性確実
.TE

.SH 関連項目
.sp
.LP
\fBldapdelete\fR(1), \fBldaplist\fR(1), \fBldapmodrdn\fR(1), \fBldapsearch\fR(1), \fBldapaddent\fR(1M), \fBldap_cachemgr\fR(1M), \fBldap_get_option\fR(3LDAP), \fBldap_set_option\fR(3LDAP), \fBattributes\fR(5), \fBldap\fR(5)
