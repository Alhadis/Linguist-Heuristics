'\" te
.\" -*- nroff -*-
.\"
.TH IBV_FORK_INIT 3 2006-10-31 libibverbs "Libibverbs Programmer's Manual"
.SH "NAME"
ibv_fork_init \- initialize libibverbs to support fork()
.SH "SYNOPSIS"
.nf
.B #include <infiniband/verbs.h>
.sp
.BI "int ibv_fork_init(void);
.fi
.SH "DESCRIPTION"
.B ibv_fork_init()
initializes libibverbs's data structures to handle
.B fork()
function calls correctly and avoid data corruption, whether
.B fork()
is called explicitly or implicitly (such as in
.B system()\fR).
.PP
It is not necessary to use this function if all parent process threads
are always blocked until all child processes end or change address
spaces via an
.B exec()
operation.
.SH "RETURN VALUE"
.B ibv_fork_init()
returns 0 on success, or the value of errno on failure (which indicates the failure reason).

.\" Oracle has added the ARC stability level to this manual page
.SH ATTRIBUTES
See
.BR attributes (5)
for descriptions of the following attributes:
.sp
.TS
box;
cbp-1 | cbp-1
l | l .
ATTRIBUTE TYPE	ATTRIBUTE VALUE 
=
Availability	network/open-fabrics
=
Stability	Volatile
.TE 
.PP
.SH "NOTES"
.B ibv_fork_init()
works on Linux kernels supporting the
.BR MADV_DONTFORK
flag for
.B madvise()
(2.6.17 and higher).
.PP
Setting the environment variable
.BR RDMAV_FORK_SAFE
or
.BR IBV_FORK_SAFE
has the same effect as calling
.B ibv_fork_init()\fR.
.PP
Calling
.B ibv_fork_init()
will reduce performance due to an extra system call for every memory
registration, and the additional memory allocated to track memory
regions.  The precise performance impact depends on the workload and
usually will not be significant.
.SH "SEE ALSO"
.BR fork (2),
.BR wait (2),
.BR system (3),
.BR exec (3),
.BR ibv_get_device_list (3)
.SH "AUTHORS"
.TP
Dotan Barak <dotanb@mellanox.co.il>


.\" Oracle has added source availability information to this manual page
This software was built from source available at https://java.net/projects/solaris-userland.  The original community source was downloaded from  ['http://www.openfabrics.org/downloads/ibutils/ibutils-1.5.7.tar.gz', 'http://www.openfabrics.org/downloads/libibverbs/libibverbs-1.1.4-1.22.g7257cd3.tar.gz', 'http://www.openfabrics.org/downloads/libmlx4/libmlx4-1.0.1-1.18.gb810a27.tar.gz', 'http://www.openfabrics.org/downloads/libsdp/libsdp-1.1.108-0.15.gd7fdb72.tar.gz', 'http://www.openfabrics.org/downloads/management/infiniband-diags-1.5.8.tar.gz', 'http://www.openfabrics.org/downloads/management/libibmad-1.3.7.tar.gz', 'http://www.openfabrics.org/downloads/management/libibumad-1.3.7.tar.gz', 'http://www.openfabrics.org/downloads/management/opensm-3.3.9.tar.gz', 'http://www.openfabrics.org/downloads/perftest/perftest-1.3.0-0.42.gf350d3d.tar.gz', 'http://www.openfabrics.org/downloads/qperf/qperf-0.4.6-0.1.gb81434e.tar.gz', 'http://www.openfabrics.org/downloads/rdmacm/librdmacm-1.0.14.1.tar.gz', 'http://www.openfabrics.org/downloads/rds-tools/rds-tools-2.0.4.tar.gz']

Further information about this software can be found on the open source community website at http://www.openfabrics.org/.
