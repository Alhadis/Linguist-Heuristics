'\" te
.\" Copyright (c) 2008, Sun Microsystems, Inc. All Rights Reserved
.TH ctstat 1 "2009 年 6 月 16 日" "SunOS 5.11" "用户命令"
.SH 名称
ctstat \- 显示活动的系统合同
.SH 用法概要
.LP
.nf
\fB/usr/bin/ctstat\fR [\fB-a\fR] [\fB-i\fR \fIcontractid...\fR] [\fB-t\fR \fItype...\fR] [\fB-v\fR] 
     [\fB-T\fR u | d ] [\fIinterval\fR [\fIcount\fR]]
.fi

.SH 描述
.sp
.LP
用户可通过 \fBctstat\fR 实用程序观察系统上活动的合同。
.sp
.LP
除非指定 \fB-i\fR 或 \fB-t\fR 选项，否则 \fBctstat\fR 会显示系统中所有合同的统计信息。
.SH 选项
.sp
.LP
支持以下选项：
.sp
.ne 2
.mk
.na
\fB\fB-a\fR\fR
.ad
.sp .6
.RS 4n
显示所有合同，不管其状态如何。缺省情况下只会显示处于 owned、inherited 或 orphan 状态的合同。
.RE

.sp
.ne 2
.mk
.na
\fB\fB-i\fR \fIcontractid\fR...\fR
.ad
.sp .6
.RS 4n
请求指定合同的状态，由其数字合同标识符 (\fIcontract_id\fR) 标识。
.sp
此选项可以接受列表作为参数。列表中的项目可以用逗号分隔，也可以括在引号内并以逗号或空格分隔。
.RE

.sp
.ne 2
.mk
.na
\fB\fB-T\fR \fBu\fR | \fBd\fR\fR
.ad
.sp .6
.RS 4n
显示时间戳。
.sp
指定 \fBu\fR 表示时间的内部表示形式的印刷表示形式。请参见 \fBtime\fR(2)。指定 \fBd\fR 表示标准日期格式。请参见\fBdate\fR(1)。
.RE

.sp
.ne 2
.mk
.na
\fB\fB-t\fR \fItype\fR...\fR
.ad
.sp .6
.RS 4n
请求指定类型 (\fItype\fR) 的合同的状态。
.sp
此选项可以接受列表作为参数。列表中的项目可以用逗号分隔，也可以括在引号内并以逗号或空格分隔。
.sp
支持 以下类型：
.sp
.ne 2
.mk
.na
\fB\fBprocess\fR\fR
.ad
.sp .6
.RS 4n
进程合同
.RE

.RE

.sp
.ne 2
.mk
.na
\fB\fB-v\fR\fR
.ad
.sp .6
.RS 4n
详细输出。
.RE

.SH 操作数
.sp
.LP
支持下列操作数：
.sp
.ne 2
.mk
.na
\fB\fIinterval\fR\fR
.ad
.sp .6
.RS 4n
每 \fIinterval\fR 秒报告一次。
.RE

.sp
.ne 2
.mk
.na
\fB\fIcount\fR\fR
.ad
.sp .6
.RS 4n
只列显 \fIcount\fR 报告。
.RE

.SH 输出
.sp
.LP
下面的列表定义了 \fBctstat\fR 报告的列标题和含义：
.sp
.ne 2
.mk
.na
\fBCTID\fR
.ad
.sp .6
.RS 4n
合同的合同 \fBID\fR。
.RE

.sp
.ne 2
.mk
.na
\fBZONEID\fR
.ad
.sp .6
.RS 4n
合同创建者的区域 ID。
.RE

.sp
.ne 2
.mk
.na
\fBTYPE\fR
.ad
.sp .6
.RS 4n
合同类型。
.RE

.sp
.ne 2
.mk
.na
\fBSTATE\fR
.ad
.sp .6
.RS 4n
合同的状态：
.sp
.ne 2
.mk
.na
\fBowned\fR
.ad
.sp .6
.RS 4n
合同为进程所有。
.RE

.sp
.ne 2
.mk
.na
\fBinherited\fR
.ad
.sp .6
.RS 4n
合同所有者异常退出，且所有者的进程合同继承了该合同。
.RE

.sp
.ne 2
.mk
.na
\fBorphan\fR
.ad
.sp .6
.RS 4n
合同所有者放弃了合同，合同所有者异常退出且所有者的进程合同未继承该合同，或继承了该合同的进程合同被其所有者放弃。
.RE

.sp
.ne 2
.mk
.na
\fBdead\fR
.ad
.sp .6
.RS 4n
该合同不再处于活动状态。释放了合同的所有引用（开放式文件描述符、合同模板和事件）后，合同会自动从系统中删除。
.RE

.RE

.sp
.ne 2
.mk
.na
\fBHOLDER\fR
.ad
.sp .6
.RS 4n
如果合同处于 \fBowned\fR 状态，则为拥有合同的进程的 pid。如果合同处于 \fBinherited\fR 状态，则为主要进程合同的 id。
.RE

.sp
.ne 2
.mk
.na
\fBEVENTS\fR
.ad
.sp .6
.RS 4n
暂挂的未确认的关键事件的数量。
.RE

.sp
.ne 2
.mk
.na
\fBQTIME\fR
.ad
.sp .6
.RS 4n
量程结束的时间，或者如果没有正在进行的协商，则为 \fB-\fR。
.RE

.sp
.ne 2
.mk
.na
\fBNTIME\fR
.ad
.sp .6
.RS 4n
协商结束的时间，或者如果没有正在进行的协商，则为 \fB-\fR。
.RE

.SH 示例
.LP
\fB示例 1 \fR报告系统中的所有合同。
.sp
.LP
以下是报告系统中所有合同的示例：

.sp
.in +2
.nf
example% ctstat -a

CTID    TYPE    STATE   HOLDER  EVENTS  QTIME   NTIME
1       process owned   100579  0       -       -
2       process dead    -       1       -       -
3       process inherit 1       3       -       -
4       process orphan  -       0       -       -
.fi
.in -2
.sp

.LP
\fB示例 2 \fR获取系统中所有合同的详细报告。
.sp
.LP
以下是收集系统中所有合同的详细报告的示例：

.sp
.in +2
.nf
example% ctstat -av

CTID    TYPE    STATE   HOLDER  EVENTS  QTIME   NTIME
1       process owned   100579  0       -       -
        informative event set: none
        critical event set:    hwerr core
        fatal event set:       hwerr
        parameter set:         none
        member processes:      100600 100601
        inherited ctids:       none
        service fmri:          svc:/system/init:default
        svc_fmri ctid:         1
        creator:               sched
        aux:

2       process dead    -       1       -       -
        informative event set: none
        critical event set:    none
        fatal event set:       hwerr core
        parameter set:         pgrponly
        member processes:      none
        inherited ctids:       none
        service fmri:          svc:/system/power:default
        svc_fmri ctid:         19
        creator:               svc.startd
        aux:                   start
.fi
.in -2
.sp

.SH 退出状态
.sp
.LP
将返回以下退出值：
.sp
.ne 2
.mk
.na
\fB\fB0\fR\fR
.ad
.sp .6
.RS 4n
成功完成。
.RE

.sp
.ne 2
.mk
.na
\fB\fB1\fR\fR
.ad
.sp .6
.RS 4n
出现错误。
.RE

.sp
.ne 2
.mk
.na
\fB\fB2\fR\fR
.ad
.sp .6
.RS 4n
无效参数。
.RE

.SH 文件
.sp
.LP
\fB/system/contract/*\fR
.SH 属性
.sp
.LP
有关下列属性的说明，请参见 \fBattributes\fR(5)：
.sp

.sp
.TS
tab() box;
cw(2.75i) |cw(2.75i) 
lw(2.75i) |lw(2.75i) 
.
属性类型属性值
_
可用性system/core-os
_
接口稳定性请参见下文。
.TE

.sp
.LP
用户可读的输出是 "Uncommitted"（未确定）。调用为 Committed（已确定）。
.SH 另请参见
.sp
.LP
\fBctrun\fR(1)、\fBctwatch\fR(1)、\fBcontract\fR(4)、\fBprocess\fR(4)、\fBattributes\fR(5)
