'\" te
.\" Copyright © 1990, Regents of the University of Michigan.All Rights Reserved.
.\" Portions Copyright © 2004, Sun Microsystems, Inc. All Rights Reserved.
.TH ldapdelete 1 "2004 年 1 月 15 日" "SunOS 5.11" "用户命令"
.SH 名称
ldapdelete \- ldap 删除条目工具
.SH 用法概要
.LP
.nf
\fBldapdelete\fR [\fB-n\fR] [\fB-v\fR] [\fB-c\fR] [\fB-d\fR \fIdebuglevel\fR] [\fB-f\fR \fIfile\fR] 
     [\fB-D\fR \fIbindDN\fR] [\fB-w\fR \fIpasswd\fR | \fB-j\fR \fIfile\fR] [\fB-J\fR [:\fIcriticality\fR]] 
     [\fB-?\fR] [\fB-H\fR] [\fB-h\fR \fIldaphost\fR] [\fB-V\fR \fIversion\fR] [\fB-i\fR \fIlocale\fR] 
     [\fB-k\fR \fIpath\fR] [\fB-P\fR \fIpath\fR] [\fB-N\fR \fIcertificate\fR] [\fB-y\fR \fIproxyid\fR] 
     [\fB-p\fR \fIldapport\fR] [\fB-O\fR \fIhoplimit\fR] [\fB-o\fR \fIattributename\fR=\fIvalue\fR] 
     [\fB-W\fR \fIpassword\fR] [\fIdn\fR]...
.fi

.SH 描述
.sp
.LP
\fBldapdelete\fR 实用程序可打开与 \fBLDAP\fR 服务器的连接，然后绑定并删除一个或多个条目。如果提供了一个或多个 \fIdn\fR 参数，则会删除那些具有标识名的条目。如果没有提供 \fIdn\fR 参数，则会从 \fIfile\fR（如果指定了 \fB-f\fR 选项）或者从标准输入读取一组 \fBDN\fR。
.SH 选项
.sp
.LP
支持以下选项：
.sp
.ne 2
.mk
.na
\fB\fB-a\fR\fR
.ad
.sp .6
.RS 4n
在删除分支时，绕过确认问题。
.RE

.sp
.ne 2
.mk
.na
\fB\fB-c\fR\fR
.ad
.sp .6
.RS 4n
连续运行模式。将会报告错误，但是 \fBldapdelete\fR 将继续进行删除操作。缺省行为是在报告错误后退出。
.RE

.sp
.ne 2
.mk
.na
\fB\fB-d\fR \fIdebuglevel\fR \fR
.ad
.sp .6
.RS 4n
设置 \fBLDAP\fR 调试级别。适用于 \fBldapdelete\fR 的有用调试级别包括： 
.sp
.ne 2
.mk
.na
\fB\fB1\fR\fR
.ad
.RS 7n
.rt  
跟踪
.RE

.sp
.ne 2
.mk
.na
\fB\fB2\fR\fR
.ad
.RS 7n
.rt  
包
.RE

.sp
.ne 2
.mk
.na
\fB\fB4\fR\fR
.ad
.RS 7n
.rt  
参数
.RE

.sp
.ne 2
.mk
.na
\fB\fB32\fR\fR
.ad
.RS 7n
.rt  
过滤器
.RE

.sp
.ne 2
.mk
.na
\fB\fB128\fR\fR
.ad
.RS 7n
.rt  
访问控制
.RE

要请求多个类别的调试信息，请将掩码相加。例如，要请求跟踪和过滤器信息，请将 \fIdebuglevel\fR 指定为 \fB33\fR。 
.RE

.sp
.ne 2
.mk
.na
\fB\fB-D\fR \fIbindDN\fR\fR
.ad
.sp .6
.RS 4n
使用标识名 \fIbindDN\fR 绑定到目录。
.RE

.sp
.ne 2
.mk
.na
\fB\fB-E\fR\fR
.ad
.sp .6
.RS 4n
通过验证响应控制，要求服务器公开（报告）绑定标识。
.RE

.sp
.ne 2
.mk
.na
\fB\fB-f\fR \fIfile\fR\fR
.ad
.sp .6
.RS 4n
从 \fIfile\fR 而不是从标准输入读取条目删除信息。 
.RE

.sp
.ne 2
.mk
.na
\fB\fB-?\fR\fR
.ad
.sp .6
.RS 4n
显示简要描述所有选项的用法帮助文本。
.RE

.sp
.ne 2
.mk
.na
\fB\fB-H\fR\fR
.ad
.sp .6
.RS 4n
显示简要描述所有选项的用法帮助文本。
.RE

.sp
.ne 2
.mk
.na
\fB\fB-h\fR \fIldaphost\fR\fR
.ad
.sp .6
.RS 4n
指定运行 LDAP 服务器的备用主机。
.RE

.sp
.ne 2
.mk
.na
\fB\fB-i\fR \fIlocale\fR\fR
.ad
.sp .6
.RS 4n
指定用于命令行输入的字符集。缺省值是在 \fBLANG\fR 环境变量中指定的字符集。您可能希望使用此选项执行从指定的字符集到 UTF8 的转换，从而覆盖 \fBLANG\fR 设置。
.sp
使用此参数，可以采用指定的字符集输入绑定 DN 和目标 DN。\fBldapdelete\fR 工具在处理搜索请求之前基于这些参数转换输入。例如，\fB-i\fR \fBno\fR 指示将以挪威语提供绑定 DN 和目标 DN。
.sp
此选项仅影响命令行输入。也就是说，如果指定了一个包含 DN 的文件（通过 \fB-f\fR 选项），\fBldapdelete\fR 将不会转换该文件中的数据。
.RE

.sp
.ne 2
.mk
.na
\fB\fB-j\fR \fIfilename\fR\fR
.ad
.sp .6
.RS 4n
指定绑定 DN 的口令或 SSL 客户机密钥数据库的口令所在的文件。要保护口令，请在脚本中使用此选项，并将口令存放在安全文件中。此选项与 \fB-w\fR 和 \fB-W\fR 选项互斥。\fB-j\fR 选项是介于 \fB-j\fR 和 \fB-w\fR/\fB-W\fR 之间的一个较安全的备选项。
.RE

.sp
.ne 2
.mk
.na
\fB\fB-J\fR [:\fIcriticality\fR[:\fIvalue\fR|::\fIb64value\fR|\fIb64value\fR|:\fIfileurl\fR]]\fR
.ad
.sp .6
.RS 4n
Criticality 是一个布尔值（缺省值是 \fBfalse\fR）。
.RE

.sp
.ne 2
.mk
.na
\fB\fB-k\fR \fIpath\fR\fR
.ad
.sp .6
.RS 4n
指定包含转换例程的目录路径。如果要指定目录服务器缺省情况下不支持的语言环境，则需要使用这些例程。这用于 NLS 支持。
.RE

.sp
.ne 2
.mk
.na
\fB\fB-M\fR\fR
.ad
.sp .6
.RS 4n
管理智能引用。当它们是操作的目标时，将删除包含引用的实际条目而不是删除通过跟踪引用获取的条目。
.RE

.sp
.ne 2
.mk
.na
\fB\fB-n\fR\fR
.ad
.sp .6
.RS 4n
显示应执行的操作，但不实际删除条目。可以与 \fB-v\fR 和 \fB-d\fR 选项一起用于调试。
.RE

.sp
.ne 2
.mk
.na
\fB\fB-N\fR \fIcertificate\fR\fR
.ad
.sp .6
.RS 4n
指定用于基于证书的客户端验证的证书名称。例如：\fB-N\fR \fB"Directory-Cert"\fR。
.RE

.sp
.ne 2
.mk
.na
\fB\fB-o\fR \fIattributename\fR=\fIvalue\fR\fR
.ad
.sp .6
.RS 4n
用于 SASL 机制和其他选项，例如安全属性、运行模式、授权 ID、验证 ID 等。
.sp
各种属性名称及其值如下所示：
.sp
.ne 2
.mk
.na
\fB\fBsecProp\fR=\fI"number"\fR\fR
.ad
.RS 20n
.rt  
用于定义 SASL 安全属性。
.RE

.sp
.ne 2
.mk
.na
\fB\fBrealm\fR=\fI"value"\fR\fR
.ad
.RS 20n
.rt  
指定 SASL 领域（缺省值为 \fBrealm=none\fR）。
.RE

.sp
.ne 2
.mk
.na
\fB\fBauthzid\fR=\fI"value"\fR\fR
.ad
.RS 20n
.rt  
指定用于 SASL 绑定的授权 ID 名称。
.RE

.sp
.ne 2
.mk
.na
\fB\fBauthid\fR=\fI"value"\fR\fR
.ad
.RS 20n
.rt  
指定用于 SASL 绑定的验证 ID。
.RE

.sp
.ne 2
.mk
.na
\fB\fBmech\fR=\fI"value"\fR\fR
.ad
.RS 20n
.rt  
指定各种 SASL 机制。
.RE

.RE

.sp
.ne 2
.mk
.na
\fB\fB-O\fR \fIhopLimit\fR\fR
.ad
.sp .6
.RS 4n
指定在查找要删除的条目时要遵循的引用跳数的最大数目。缺省情况下，没有任何限制。
.RE

.sp
.ne 2
.mk
.na
\fB\fB-p\fR \fIldapport\fR\fR
.ad
.sp .6
.RS 4n
指定 LDAP 服务器侦听的备用 \fBTCP\fR 端口。
.RE

.sp
.ne 2
.mk
.na
\fB\fB-P\fR \fIpath\fR\fR
.ad
.sp .6
.RS 4n
指定客户端证书数据库的路径和文件名。例如：
.sp
.in +2
.nf
-P /home/uid/.netscape/cert7.db
.fi
.in -2

在与目录服务器相同的主机上使用命令时，可以使用服务器自己的证书数据库。例如：
.sp
.in +2
.nf
-P \fIinstallDir\fR/lapd-serverID/alias/cert7.db
.fi
.in -2

单独使用 \fB-P\fR 选项将仅指定服务器验证。
.RE

.sp
.ne 2
.mk
.na
\fB\fB-v\fR\fR
.ad
.sp .6
.RS 4n
使用详细模式，将诊断信息写入到标准输出。
.RE

.sp
.ne 2
.mk
.na
\fB\fB-v\fR \fIversion\fR\fR
.ad
.sp .6
.RS 4n
指定要用于删除操作的 LDAP 协议版本号，2 或 3。LDAP v3 为缺省值。当连接到不支持 v3 的服务器时，请指定 LDAP v2。
.RE

.sp
.ne 2
.mk
.na
\fB\fB-W\fR \fIpassword\fR\fR
.ad
.sp .6
.RS 4n
指定在 \fB-P\fR 选项中给出的客户端密钥数据库的口令。对于基于证书的客户端验证，此选项是必需的。在命令行上指定 \fIpassword\fR 会有安全问题，因为系统上的其他人可以通过 \fBps\fR 命令看到口令。请改用 \fB-j\fR 从文件中指定口令。此选项与 \fB-j\fR 互斥。
.RE

.sp
.ne 2
.mk
.na
\fB\fB-w\fR \fIpasswd\fR\fR
.ad
.sp .6
.RS 4n
使用 \fIpasswd\fR 作为用于对目录进行验证的口令。当使用 \fB-w\fR\fI passwd\fR 指定用于验证的口令时，系统的其他用户可以通过 \fBps\fR 命令在脚本文件中或者在 shell 历史记录中看到口令。如果在不使用此选项的情况下使用 \fBldapdelete\fR 命令，则该命令将提示输入口令并从标准输入中读取口令。不与 \fB-w\fR 选项一起使用时，其他用户将看不到口令。
.RE

.sp
.ne 2
.mk
.na
\fB\fB-Y\fR \fIproxyid\fR\fR
.ad
.sp .6
.RS 4n
指定要用于删除操作的代理 DN（被代理的授权 id），在 shell 中通常置于双引号 ("") 中。
.RE

.sp
.ne 2
.mk
.na
\fB\fB-Z\fR\fR
.ad
.sp .6
.RS 4n
指定要用于提供基于证书的客户端验证的 SSL。此选项需要 \fB-N\fR 和 SSL 口令以及识别证书和密钥数据库所需的任何其他 SSL 选项。
.RE

.SH 操作数
.sp
.LP
支持下列操作数：
.sp
.ne 2
.mk
.na
\fB\fIdn\fR\fR
.ad
.RS 6n
.rt  
指定要删除的条目的一个或多个标识名。
.RE

.SH 示例
.LP
\fB示例 1 \fR删除条目
.sp
.LP
要删除紧跟在 \fBXYZ\fR 公司组织条目下的 commonName 为 \fBDelete Me\fR 的条目，请使用以下命令：

.sp
.in +2
.nf
example% \fBldapdelete -D "cn=Administrator, o=XYZ, c=US" \e
  "cn=Delete Me, o=XYZ, c=US"\fR 
.fi
.in -2
.sp

.LP
\fB示例 2 \fR删除使用 SASL 验证的条目
.sp
.LP
要删除紧跟在 XYZ 公司组织条目下的 \fBcommonName\fR 为 "Delete Me" 的条目，请使用以下命令：

.sp
.in +2
.nf
example% \fBldapdelete -o mech=DIGEST-MD5 -o secProp=noanonymous \e
-o realm=none -o authid="dn:uid=foo,o=XYZ, c=US"  \e
"cn=Delete Me, o=XYZ, c=US"\fR
.fi
.in -2
.sp

.SH 属性
.sp
.LP
有关以下属性的说明，请参见 \fBattributes\fR(5)：
.sp

.sp
.TS
tab() box;
cw(2.75i) |cw(2.75i) 
lw(2.75i) |lw(2.75i) 
.
属性类型属性值
_
可用性system/core-os
接口稳定性Committed（已确定）
.TE

.SH 退出状态
.sp
.LP
将返回以下退出值：
.sp
.ne 2
.mk
.na
\fB\fB0\fR\fR
.ad
.RS 13n
.rt  
成功完成。
.RE

.sp
.ne 2
.mk
.na
\fB非零值\fR
.ad
.RS 13n
.rt  
出现错误。向标准错误写入一条诊断消息。
.RE

.SH 另请参见
.sp
.LP
\fBldapadd\fR(1)、\fBldapmodify\fR(1)、\fBldapmodrdn\fR(1)、\fBldapsearch\fR(1)、\fBldap_get_option\fR(3LDAP)、\fBldap_set_option\fR(3LDAP)、\fBattributes\fR(5)
.SH 附注
.sp
.LP
\fB-M\fR \fIauthentication\fR 选项已过时。
