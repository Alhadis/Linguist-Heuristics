'\" te
.\" \&.Copyright (c) 2002, Sun Microsystems, Inc. All Rights Reserved
.TH getfacl 1 "1994 年 11 月 5 日" "SunOS 5.11" "用户命令"
.SH 名称
getfacl \- 显示自主文件信息
.SH 用法概要
.LP
.nf
\fBgetfacl\fR [\fB-ad\fR] \fIfile\fR...
.fi

.SH 描述
.sp
.LP
对于表示常规文件、特殊文件或命名管道的每个参数，\fBgetfacl\fR 实用程序会显示所有者、组和访问控制列表 (Access Control List, \fBACL\fR)。对于每个目录参数，\fBgetfacl\fR 会显示所有者、组、\fBACL\fR 和/或缺省的 \fBACL\fR。只有目录包含缺省的 \fBACL\fR。
.sp
.LP
\fBgetfacl\fR 实用程序可在不支持 \fBACL\fR 的文件系统上执行。它将基于基本权限位报告 \fBACL\fR。
.sp
.LP
如果未指定任何选项，\fBgetfacl\fR 会显示文件名、文件所有者、文件组所有者、\fBACL\fR 和缺省 \fBACL\fR（如果存在）。
.SH 选项
.sp
.LP
支持以下选项：
.sp
.ne 2
.mk
.na
\fB\fB-a\fR\fR
.ad
.RS 6n
.rt  
显示文件名、文件所有者、文件组所有者和文件的 \fBACL\fR。
.RE

.sp
.ne 2
.mk
.na
\fB\fB-d\fR\fR
.ad
.RS 6n
.rt  
显示文件名、文件所有者、文件组所有者和文件的缺省 \fBACL\fR（如果存在）。
.RE

.SH 操作数
.sp
.LP
支持下列操作数：
.sp
.ne 2
.mk
.na
\fB\fIfile\fR\fR
.ad
.RS 8n
.rt  
常规文件、特殊文件或命名管道的路径名。
.RE

.SH 输出
.sp
.LP
\fBACL\fR 输出的格式如下所示：
.sp
.in +2
.nf
# file: filename	
# owner: uid	
# group: gid	
user::perm	
user:uid:perm	
group::perm	
group:gid:perm	
mask:perm	
other:perm	
default:user::perm	
default:user:uid:perm	
default:group::perm	
default:group:gid:perm	
default:mask:perm	
default:other:perm
.fi
.in -2
.sp

.sp
.LP
在命令行上指定多个文件时，以一个空白行分隔每个文件的 \fBACL\fR。
.sp
.LP
在执行访问权限检查时，\fBACL\fR 条目将按其评估顺序显示。目录上可能存在的缺省 \fBACL\fR 条目不会影响访问权限检查。
.sp
.LP
前三行显示文件名、文件所有者和文件组所有者。请注意，仅当指定了 \fB-d\fR 选项且文件没有缺省的 \fBACL\fR 时，才会显示这三行。
.sp
.LP
不具有用户 \fBID\fR 的 \fBuser\fR 条目指示授予文件所有者的权限。一个或多个额外的用户条目指示授予指定用户的权限。
.sp
.LP
不具有组 \fBID\fR 的 \fBgroup\fR 条目指示授予文件组所有者的权限。一个或多个额外的组条目指示授予指定组的权限。
.sp
.LP
\fBmask\fR 条目指示 \fBACL\fR 掩码权限。这些权限是允许授予所有用户条目（文件所有者除外）和所有组条目（包括文件组所有者）的最大权限。这些权限会限制在其他条目中指定的权限。
.sp
.LP
\fBother\fR 条目指示已授予其他人员的权限。
.sp
.LP
只有对于目录才会存在 \fBdefault\fR 条目。这些条目指示已添加到在目录中创建的文件的缺省条目。
.sp
.LP
如果系统口令文件 \fB/etc/passwd\fR 中不存在任何 \fBuid\fR 条目，则 \fBuid\fR 是一个登录名或用户 \fBID\fR。如果系统组文件 \fB/etc/group\fR 中不存在任何 \fBgid\fR 条目，则 \fBgid\fR 是一个组名或组 \fBID\fR。\fBperm\fR 是一个由三个字符组成的字符串，这三个字符分别是以下表示单独自主访问权限的字母：\fBr\fR（读取）、\fBw\fR（写入）、\fBx\fR（执行/搜索）或占位符 \fB-\fR。\fBperm\fR 按以下顺序显示：\fBrwx\fR。如果 \fBACL\fR 条目未授予某个权限，则会显示占位符。
.sp
.LP
如果您使用 \fBchmod\fR(1) 命令更改含有 \fBACL\fR 条目的文件的文件组所有者权限，则会同时将文件组所有者权限和 \fBACL\fR 掩码更改为新的权限。请注意，对于文件中有其 \fBACL\fR 条目的附加用户和组，新的 \fBACL\fR 掩码权限可能会更改其有效权限。 
.sp
.LP
为了指示 \fBACL\fR 掩码限制 \fBACL\fR 条目，\fBgetfacl\fR 在该条目后面显示一个附加制表符、井号 (\fB#\fR) 和授予的实际权限。
.SH 示例
.LP
\fB示例 1 \fR显示文件信息
.sp
.LP
以文件 \fBfoo\fR 为例，该文件的 \fBACL\fR 包含六个条目，命令

.sp
.in +2
.nf
host% \fBgetfacl foo\fR
.fi
.in -2
.sp

.sp
.LP
将输出：

.sp
.in +2
.nf
# file: foo 
# owner: shea 
# group: staff 
user::rwx 
user:spy:\|\(mi\|\(mi\|\(mi 
user:mookie:r\|\(mi\|\(mi 
group::r\|\(mi\|\(mi 
mask::rw\|\(mi 
other::\|\(mi\|\(mi\|\(mi
.fi
.in -2
.sp

.LP
\fB示例 2 \fR在执行 chmod 命令后显示信息
.sp
.LP
继续使用上例，在 \fBchmod\fR 之后发出了 \fB700 foo\fR：

.sp
.in +2
.nf
host% \fBgetfacl foo\fR
.fi
.in -2
.sp

.sp
.LP
将输出：

.sp
.in +2
.nf
# file: foo
# owner: shea
# group: staff
user::rwx
user:spy:\|\(mi\|\(mi\|\(mi
user:mookie:r\|\(mi\|\(mi     #effective:\|\(mi\|\(mi\|\(mi
group::\|\(mi\|\(mi\|\(mi          
mask::\|\(mi\|\(mi\|\(mi
other::\|\(mi\|\(mi\|\(mi
.fi
.in -2
.sp

.LP
\fB示例 3 \fR当 ACL 包含缺省条目时显示信息
.sp
.LP
以目录 \fBdoo\fR 为例，该目录的 \fBACL\fR 包含缺省条目，命令

.sp
.in +2
.nf
host% \fBgetfacl -d doo\fR
.fi
.in -2
.sp

.sp
.LP
将输出：

.sp
.in +2
.nf
# file: doo
# owner: shea
# group: staff
default:user::rwx
default:user:spy:\|\(mi\|\(mi\|\(mi
default:user:mookie:r\|\(mi\|\(mi
default:group::r\|\(mi\|\(mi
default:mask::\|\(mi\|\(mi\|\(mi
default:other::\|\(mi\|\(mi\|\(mi
.fi
.in -2
.sp

.SH 文件
.sp
.ne 2
.mk
.na
\fB\fB/etc/passwd\fR\fR
.ad
.RS 15n
.rt  
系统口令文件
.RE

.sp
.ne 2
.mk
.na
\fB\fB/etc/group\fR\fR
.ad
.RS 15n
.rt  
组文件
.RE

.SH 属性
.sp
.LP
有关下列属性的说明，请参见 \fBattributes\fR(5)：
.sp

.sp
.TS
tab() box;
cw(2.75i) |cw(2.75i) 
lw(2.75i) |lw(2.75i) 
.
属性类型属性值
_
可用性system/core-os
_
接口稳定性Committed（已确定）
.TE

.SH 另请参见
.sp
.LP
\fBchmod\fR(1)、\fBls\fR(1)、\fBsetfacl\fR(1)、\fBacl\fR(2)、\fBaclsort\fR(3SEC)、\fBgroup\fR(4)、\fBpasswd\fR(4)、\fBattributes\fR(5)
.SH 附注
.sp
.LP
\fBgetfacl\fR 的输出必须处于正确格式，才能作为 \fBsetfacl\fR \fB-f\fR 命令的输入。如果 \fBgetfacl\fR 的输出被重定向到某个文件，则该文件可用作 \fBsetfacl\fR 的输入。这样，用户可以轻松将一个文件的 \fBACL\fR 分配给另一个文件。
