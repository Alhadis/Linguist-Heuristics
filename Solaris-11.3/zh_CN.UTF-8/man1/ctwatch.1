'\" te
.\" Copyright (c) 2004, Sun Microsystems, Inc. All Rights Reserved
.TH ctwatch 1 "2004 年 7 月 14 日" "SunOS 5.11" "用户命令"
.SH 名称
ctwatch \- 观察合同或合同组中的事件
.SH 用法概要
.LP
.nf
\fB/usr/bin/ctwatch\fR [\fB-f\fR] [\fB-r\fR] [\fB-v\fR] \fIcontract-type\fR... | \fIcontract-id\fR...
.fi

.SH 描述
.sp
.LP
用户可通过 \fBctwatch\fR 实用程序观察一组合同或合同类型中正在发生的事件。缺省情况下，\fBctwatch\fR 会观察所有合同。
.SH 选项
.sp
.LP
支持以下选项：
.sp
.ne 2
.mk
.na
\fB\fB-f\fR\fR
.ad
.RS 6n
.rt  
从事件队列之前开始报告事件。通常情况下，\fBctwatch\fR 仅报告在其调用之后发生的事件。通过 \fB-f\fR 选项，也会报告在 \fBctwatch\fR 调用后仍位于合同的事件队列中的任何事件（例如，未确认的关键事件）。
.RE

.sp
.ne 2
.mk
.na
\fB\fB-r\fR\fR
.ad
.RS 6n
.rt  
可靠观察所有消息。一般情况下，系统可能随时丢弃信息性事件和已确认的关键事件，所以 \fBctwatch\fR 无法保证能看到所有事件。仅当调用了 \fBctwatch\fR，且在其有效集中声明 \fB{PRIV_CONTRACT_EVENT} \fR 特权后，才能使用此选项。
.RE

.sp
.ne 2
.mk
.na
\fB\fB-v\fR\fR
.ad
.RS 6n
.rt  
请求详细事件说明。
.RE

.SH 操作数
.sp
.LP
支持下列操作数：
.sp
.ne 2
.mk
.na
\fB\fIcontract-type\fR\fR
.ad
.RS 17n
.rt  
有效的合同类型包括：
.sp
.ne 2
.mk
.na
\fBprocess\fR
.ad
.RS 11n
.rt  
进程合同。
.RE

.RE

.sp
.ne 2
.mk
.na
\fB\fIcontract-id\fR\fR
.ad
.RS 17n
.rt  
有效的合同 id。
.RE

.SH 输出
.sp
.LP
下面的列表定义了 \fBctwatch\fR 报告的列标题和含义：
.sp
.ne 2
.mk
.na
\fBCTID\fR
.ad
.RS 11n
.rt  
生成事件的合同 \fBID\fR。
.RE

.sp
.ne 2
.mk
.na
\fBEVID\fR
.ad
.RS 11n
.rt  
事件 \fBID\fR。
.RE

.sp
.ne 2
.mk
.na
\fBCRIT\fR
.ad
.RS 11n
.rt  
事件是信息性事件、关键事件还是启动退出协商。值分别为 \fBinfo\fR、\fBcrit\fR 或 \fBneg\fR。
.RE

.sp
.ne 2
.mk
.na
\fBACK\fR
.ad
.RS 11n
.rt  
事件已经确认。值为 \fByes\fR 或 "\fBno\fR"。
.RE

.sp
.ne 2
.mk
.na
\fBCTTYPE\fR
.ad
.RS 11n
.rt  
合同类型。
.RE

.sp
.ne 2
.mk
.na
\fBSUMMARY\fR
.ad
.RS 11n
.rt  
事件的特定于类型的摘要。
.RE

.SH 示例
.LP
\fB示例 1 \fR观察进程合同
.sp
.in +2
.nf
example% \fBctwatch -r 1\fR

CTID    EVID    CRIT ACK CTTYPE  SUMMARY
1       2       crit no  process pid 100569 was created
1       3       info no  process pid 100569 encountered hardware error
1       4       info no  process pid 100568 exited
1       5       info no  process pid 100569 exited
1       6       crit no  process contract empty
.fi
.in -2
.sp

.SH 退出状态
.sp
.LP
将返回以下退出值：
.sp
.ne 2
.mk
.na
\fB\fB0\fR\fR
.ad
.RS 5n
.rt  
成功完成。
.RE

.sp
.ne 2
.mk
.na
\fB\fB1\fR\fR
.ad
.RS 5n
.rt  
出现错误。
.RE

.sp
.ne 2
.mk
.na
\fB\fB2\fR\fR
.ad
.RS 5n
.rt  
无效参数。
.RE

.SH 文件
.sp
.LP
\fB/system/contract/*\fR
.SH 属性
.sp
.LP
有关下列属性的说明，请参见 \fBattributes\fR(5)：
.sp

.sp
.TS
tab() box;
cw(2.75i) |cw(2.75i) 
lw(2.75i) |lw(2.75i) 
.
属性类型属性值
_
可用性system/core-os
_
接口稳定性请参见下文。
.TE

.sp
.LP
用户可读的输出是 Uncommitted（未确定）。调用为 Committed（已确定）。
.SH 另请参见
.sp
.LP
\fBctrun\fR(1)、\fBctstat\fR(1)、\fBcontract\fR(4)、\fBprocess\fR(4)、\fBattributes\fR(5)、\fBprivileges\fR(5)
.SH 附注
.sp
.LP
只能在单个合同中或在指定了类型的单个类型中确保对事件进行排序。
.sp
.LP
\fBctwatch\fR 只能观察由具有与 \fBctwatch\fR 相同的有效用户 ID 的进程拥有或创作的合同所生成的事件，除非在其有效集中声明了 \fB{PRIV_CONTRACT_OBSERVER}\fR 特权。
