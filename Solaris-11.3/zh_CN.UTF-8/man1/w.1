'\" te
.\"  Copyright (c) 2004, Sun Microsystems, Inc. All Rights Reserved.
.TH w 1 "2004 年 3 月 19 日" "SunOS 5.11" "用户命令"
.SH 名称
w \- 显示有关当前登录用户的信息
.SH 用法概要
.LP
.nf
\fBw\fR [\fB-hlsuw\fR] [\fIuser\fR]
.fi

.SH 描述
.sp
.LP
\fBw\fR 命令可显示系统上当前活动的摘要，包括每个用户正在执行的操作。标题行显示当前时间、系统已运行的时间、登录系统的用户数目，以及过去 1、5 和 15 分钟内运行队列中的平均作业数目。
.sp
.LP
显示的字段包括：用户的登录名、用户登录的 tty 的名称、用户登录的时间（格式为 \fIhours:minutes\fR）、空闲时间（即自用户上次键入内容以来的分钟数，格式为 \fIhours:minutes\fR）、该终端上所有进程及其子进程使用的 \fBCPU\fR 时间（格式为 \fIminutes:seconds\fR）、当前活动进程使用的 \fBCPU\fR 时间（格式为 \fIminutes:seconds\fR）以及当前进程的名称和参数。
.SH 选项
.sp
.LP
支持以下选项：
.sp
.ne 2
.mk
.na
\fB\fB-h\fR\fR
.ad
.RS 6n
.rt  
不生成标题。
.RE

.sp
.ne 2
.mk
.na
\fB\fB-l\fR\fR
.ad
.RS 6n
.rt  
生成长格式的输出（缺省设置）。
.RE

.sp
.ne 2
.mk
.na
\fB\fB-s\fR\fR
.ad
.RS 6n
.rt  
生成短格式的输出。在短格式中，tty 采用缩写形式，去掉了登录时间和 \fBCPU\fR 时间，同样也去掉了命令参数。
.RE

.sp
.ne 2
.mk
.na
\fB\fB-u\fR\fR
.ad
.RS 6n
.rt  
生成标题行，其中显示当前时间、系统已运行的时间、登录系统的用户数目，以及过去 1、5 和 15 分钟内运行队列中的平均作业数目。
.RE

.sp
.ne 2
.mk
.na
\fB\fB-w\fR\fR
.ad
.RS 6n
.rt  
生成长格式的输出，这也与缺省设置相同。
.RE

.SH 操作数
.sp
.ne 2
.mk
.na
\fB\fIuser\fR\fR
.ad
.RS 8n
.rt  
显示其登录信息的特定用户的名称。如果指定了用户，将只输出该用户的信息。
.RE

.SH 示例
.LP
\fB示例 1 \fR\fBw\fR 命令的输出示例
.sp
.in +2
.nf
example% \fBw\fR


10:54am  up 27 day(s), 57 mins,  1 user,  load average: 0.28, 0.26, 0.22
User	    tty		    login@    idle	   JCPU	   PCPU	    what
ralph    console  7:10am    1       10:05   4:31     w
.fi
.in -2
.sp

.SH 环境变量
.sp
.LP
有关影响 \fBw\fR 执行的环境变量 \fBLC_CTYPE\fR、\fBLC_MESSAGES\fR 和 \fBLC_TIME\fR 的说明，请参见 \fBenviron\fR(5)。
.SH 文件
.sp
.ne 2
.mk
.na
\fB\fB/var/adm/utmpx\fR\fR
.ad
.RS 18n
.rt  
用户和计帐信息
.RE

.SH 属性
.sp
.LP
有关下列属性的说明，请参见 \fBattributes\fR(5)：
.sp

.sp
.TS
tab() box;
cw(2.75i) |cw(2.75i) 
lw(2.75i) |lw(2.75i) 
.
属性类型属性值
_
可用性system/core-os
.TE

.SH 另请参见
.sp
.LP
\fBps\fR(1)、\fBwho\fR(1)、\fBwhodo\fR(1M)、\fButmpx\fR(4)、\fBattributes\fR(5)、\fBenviron\fR(5)
.SH 附注
.sp
.LP
“当前进程”的概念并不清楚。当前的算法是“终端上不忽略中断的编号最高的进程，如果不存在这样的进程，则为终端上编号最高的进程”。这种算法在某些情况下不成立，例如在 shell 和编辑器等程序的临界区，或者当故障程序在后台 fork 中运行而无法忽略中断时。如果无法找到进程，\fBw\fR 将输出 \fB-\fR。
.sp
.LP
\fBCPU\fR 时间只是一个估计值，尤其是，如果某个用户注销后让后台进程继续运行，当前在该终端上的用户将“承担”这部分时间。
.sp
.LP
尽管系统上的大部分负载都由后台进程承担，但是并未显示后台进程。
.sp
.LP
有时输出的进程（通常是后台进程）参数为空或者乱码。在这些情况下，命令的名称列显在括号中。
.sp
.LP
\fBw\fR 不了解检测后台作业的约定。有时找到的是后台作业而非正确的作业。
