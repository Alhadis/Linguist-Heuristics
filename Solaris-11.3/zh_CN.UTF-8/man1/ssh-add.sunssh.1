'\" te
.\" To view license terms, attribution, and copyright for OpenSSH, the default path is /var/sadm/pkg/SUNWsshdr/install/copyright.If the Solaris operating environment has been installed anywhere other than the default, modify the given path to access the file at the installed location.
.\" Portions Copyright (c) 2009, Sun Microsystems, Inc. All Rights Reserved.
.TH ssh-add 1 "2009 年 5 月 20 日" "SunOS 5.11" "用户命令"
.SH 名称
ssh-add \- 将 RSA 或 DSA 标识添加到验证代理
.SH 用法概要
.LP
.nf
\fBssh-add\fR [\fB-lLdDxX\fR] [\fB-t\fR \fIlife\fR] [ \fIfile\fR ]...
.fi

.SH 描述
.sp
.LP
\fBssh-add\fR 实用程序将 \fBRSA\fR 或 \fBDSA\fR 标识添加到验证代理 \fBssh-agent\fR(1)。如果在不带参数的情况下运行，它将尝试添加存在的所有文件（\fB$HOME/.ssh/identity\fR (RSA v1)、\fB$HOME/.ssh/id_rsa\fR (RSA v2) 和 \fB$HOME/.ssh/id_dsa\fR (DSA v2)）。如果存在多个私钥，在重新提示输入不同的口令短语之前，将会尝试使用相同的口令短语解密各个私钥。口令短语是从用户的 tty 中读取的，或通过运行在 \fBSSH_ASKPASS\fR 中定义的程序来读取的（请参见下文）。
.sp
.LP
验证代理必须正在运行。
.SH 选项
.sp
.LP
支持以下选项：
.sp
.ne 2
.mk
.na
\fB\fB-d\fR\fR
.ad
.RS 11n
.rt  
此选项会从代理中\fB删除\fR标识，而不是添加标识。
.RE

.sp
.ne 2
.mk
.na
\fB\fB-D\fR\fR
.ad
.RS 11n
.rt  
从代理中删除所有标识。
.RE

.sp
.ne 2
.mk
.na
\fB\fB-l\fR\fR
.ad
.RS 11n
.rt  
列出代理当前提供的所有标识的指纹。
.RE

.sp
.ne 2
.mk
.na
\fB\fB-L\fR\fR
.ad
.RS 11n
.rt  
列出代理当前提供的所有标识的公钥参数。
.RE

.sp
.ne 2
.mk
.na
\fB\fB-t\fR \fIlife\fR\fR
.ad
.RS 11n
.rt  
将标识添加到代理时设置最长生命周期。可以以秒为单位指定生命周期，也可以按 \fBsshd\fR(1M) 中指定的时间格式指定生命周期。
.RE

.sp
.ne 2
.mk
.na
\fB\fB-x\fR\fR
.ad
.RS 11n
.rt  
使用口令锁定代理。
.RE

.sp
.ne 2
.mk
.na
\fB\fB-X\fR\fR
.ad
.RS 11n
.rt  
解除锁定代理。
.RE

.SH 环境变量
.sp
.ne 2
.mk
.na
\fB\fBDISPLAY\fR\fR
.ad
.br
.na
\fB\fBSSH_ASKPASS\fR\fR
.ad
.RS 17n
.rt  
如果 \fBssh-add\fR 需要一个口令短语，当在终端中运行时，它将通过当前终端读取口令短语。如果 \fBssh-add\fR 没有与之关联的终端，但设置了 \fBDISPLAY\fR 和 \fBSSH_ASKPASS\fR，它将执行 \fBSSH_ASKPASS\fR 指定的程序并打开一个 X11 窗口来读取口令短语。从 .Xsession 或相关脚本调用 \fBssh-add\fR 时，这尤其有用。系统附带了 \fB/usr/lib/ssh/ssh-askpass\fR，这是 \fBSSH_ASKPASS\fR。 的缺省值
.RE

.sp
.ne 2
.mk
.na
\fB\fBSSH_AUTH_SOCK\fR\fR
.ad
.RS 17n
.rt  
标识用于与代理进行通信的 unix 域套接字的路径。
.RE

.SH 退出状态
.sp
.LP
将返回以下退出值：
.sp
.ne 2
.mk
.na
\fB\fB0\fR\fR
.ad
.RS 5n
.rt  
成功完成。
.RE

.sp
.ne 2
.mk
.na
\fB\fB1\fR\fR
.ad
.RS 5n
.rt  
出现错误。
.RE

.SH 文件
.sp
.LP
除了用户外，其他任何人均应无法读取这些文件。请注意，如果某个文件可由其他人访问，则 \fBssh-add\fR 会忽略该文件。可以在生成密钥时指定口令短语，该口令短语用于加密此文件的私有部分。
.sp
.LP
如果这些文件存储在网络文件系统上，则假定文件自身所提供的保护或网络文件系统的传输层可为站点策略提供充分的保护。如果不是这样，则建议将密钥文件存储在可移除介质上或在本地存储在相关主机上。
.sp
.LP
\fBDSA\fR 和 \fBRSA\fR 密钥文件的建议名称：
.sp
.ne 2
.mk
.na
\fB\fB$HOME/.ssh/identity\fR\fR
.ad
.RS 28n
.rt  
包含协议版本 1 中用户的 \fBRSA\fR 验证标识。
.RE

.sp
.ne 2
.mk
.na
\fB\fB$HOME/.ssh/identity.pub\fR\fR
.ad
.RS 28n
.rt  
包含协议版本 1 中用户的 \fBRSA\fR 验证标识的公共部分。
.RE

.sp
.ne 2
.mk
.na
\fB\fB$HOME/.ssh/id_dsa\fR\fR
.ad
.RS 28n
.rt  
包含用户的私有 \fBDSA\fR 验证标识。
.RE

.sp
.ne 2
.mk
.na
\fB\fB$HOME/.ssh/id_dsa.pub\fR\fR
.ad
.RS 28n
.rt  
包含用户的 DSA 验证标识的公共部分。 
.RE

.sp
.ne 2
.mk
.na
\fB\fB$HOME/.ssh/id_rsa\fR\fR
.ad
.RS 28n
.rt  
包含用户的私有 \fBRSA\fR 验证标识。
.RE

.sp
.ne 2
.mk
.na
\fB\fB$HOME/.ssh/id_rsa.pub\fR\fR
.ad
.RS 28n
.rt  
包含用户的 \fBRSA\fR 验证标识的公共部分。
.RE

.sp
.ne 2
.mk
.na
\fB\fB/usr/lib/ssh/ssh-askpass\fR\fR
.ad
.RS 28n
.rt  
包含 SSH_ASKPASS 的缺省值。
.RE

.SH 属性
.sp
.LP
有关下列属性的说明，请参见 \fBattributes\fR(5)：
.sp

.sp
.TS
tab() box;
cw(2.75i) |cw(2.75i) 
lw(2.75i) |lw(2.75i) 
.
属性类型属性值
_
可用性network/ssh
_
接口稳定性Committed（已确定）
.TE

.SH 另请参见
.sp
.LP
\fBssh\fR(1)、\fBssh-agent\fR(1)、\fBssh-keygen\fR(1)、\fBsshd\fR(1M)、\fBattributes\fR(5) 
