'\" te
.\" Copyright (c) 2005, Sun Microsystems, Inc. All Rights Reserved
.\" Copyright 1989 AT&T
.TH vacation 1 "2005 年 8 月 20 日" "SunOS 5.11" "ユーザーコマンド"
.SH 名前
vacation \- メールへの自動返信
.SH 形式
.LP
.nf
\fBvacation\fR [\fB-I\fR]
.fi

.LP
.nf
\fBvacation\fR [\fB-a\fR \fIalias\fR] [\fB-e\fR \fIfilter_file\fR] [\fB-f\fR \fIdatabase_file\fR] 
     [\fB-j\fR] [\fB-m\fR \fImessage_file\fR] [\fB-s\fR \fIsender\fR] [\fB-t\fR\fIN\fR] \fIusername\fR
.fi

.LP
.nf
\fBvacation\fR [\fB-f database_file\fR] \fB-l\fR
.fi

.SH 機能説明
.sp
.LP
\fBvacation\fR ユーティリティーは、着信メールに自動的に返信します。
.SS "インストール"
.sp
.LP
インストールは、\fBvacation\fR の基本構成を設定する対話型プログラムで構成されます。
.sp
.LP
\fBvacation\fR をインストールするには、コマンド行でこのコマンドを引数なしで入力します。このプログラムは、\fBvacation\fR が有効になっているときにすべての送信者に自動的に送信されるメッセージを含む \fB\&.vacation.msg\fR ファイルを作成し、そのメッセージを変更できるようにエディタを起動します。(「使用法」のセクションを参照)。起動されるエディタは、\fBVISUAL\fR または \fBEDITOR\fR 環境変数によって決定され、このどちらの環境変数も設定されていない場合は \fBvi\fR(1) になります。
.sp
.LP
\fB\&.forward\fR ファイルがホームディレクトリ内に存在しない場合は、このファイルも作成されます。作成されると、\fB\&.forward\fR ファイルには次の形式の行が含まれています。
.sp
.LP
着信メッセージの 1 つのコピーが \fIusername\fR に送信され、別のコピーが \fBvacation\fR にパイプ経由で渡されます。
.sp
.in +2
.nf
\e\fIusername\fR, "|/usr/bin/vacation \fIusername\fR"
.fi
.in -2

.sp
.LP
\fB\&.forward\fR ファイルがホームディレクトリ内に存在する場合は、それを削除するかどうかが尋ねられます。それにより、\fBvacation\fR が無効になり、インストールが終了します。
.sp
.LP
このプログラムは、\fBvacation\fR が有効になっているときに送信者のリストを含む \fB\&.vacation.pag\fR と \fB\&.vacation.dir\fR を自動的に作成します。
.SS "アクティブ化と非アクティブ化"
.sp
.LP
\fB\&.forward\fR ファイルの存在によって、\fBvacation\fR を無効または有効のどちらにするかが決定されます。\fBvacation\fR を無効にするには、\fB\&.forward\fR ファイルを削除するか、または新しい名前に変えます。
.SS "初期化"
.sp
.LP
\fB-I\fR オプションは、\fBvacation\fR のログファイル (\fB\&.vacation.pag\fR および \fB\&.vacation.dir\fR) をクリアし、以前の \fBvacation\fR セッションから送信者のリストを消去します。(「オプション」のセクションを参照)。
.SS "追加の構成"
.sp
.LP
\fBvacation\fR には、インストールには含まれていない構成オプション、つまり \fB-a\fR、\fB-e\fR、\fB-f\fR、\fB-j\fR、\fB-m\fR、\fB-s\fR、および \fB-t\fR が用意されています。(「オプション」のセクションを参照)。
.SS "報告"
.sp
.LP
\fBvacation\fR には、報告オプション \fB-l\fR が用意されています。詳しくは「オプション」の項を参照してください。\fB\fR
.SH オプション
.sp
.LP
サポートしているオプションは、次のとおりです。 
.sp
.ne 2
.mk
.na
\fB\fB-I\fR\fR
.ad
.RS 6n
.rt  
\fB\&.vacation.pag\fR および \fB\&.vacation.dir\fR ファイルを初期化し、\fBvacation\fR を有効にします。\fB-I\fR フラグが指定されておらず、\fIuser\fR 引数が指定されている場合、\fBvacation\fR は標準入力から最初の行を読み取ります (\fBFrom:\fR 行の場合はコロンなし)。存在しない場合は、エラーメッセージを生成します。
.RE

.sp
.LP
\fB-a\fR、\fB-e\fR、\fB-f\fR、\fB-j\fR、\fB-m\fR、\fB-s\fR、\fB-t\fR の各オプションは、コマンド行ではなく、\fB\&.forward\fR ファイル内で \fBvacation\fR と組み合わせて使用される構成オプションです。たとえば、
.sp
.in +2
.nf
\e\fIusername\fR, "|/usr/bin/vacation \fB-t1m\fR \fIusername\fR"
.fi
.in -2

.sp
.LP
は、送信者への返信を 1 分おきに繰り返します。
.sp
.ne 2
.mk
.na
\fB\fB-a\fR \fIalias\fR\fR
.ad
.RS 20n
.rt  
\fIalias\fR が、\fBvacation\fR を実行しているユーザーの有効なエイリアスの 1 つであることを示し、そのエイリアス宛てのメールによって返信が生成されるようにします。
.RE

.sp
.ne 2
.mk
.na
\fB\fB-e\fR \fIfilter_file\fR\fR
.ad
.RS 20n
.rt  
ドメインや電子メールアドレスのフィルタのソースとして \fB\&.vacation.filter\fR の代わりに \fIfilter_file\fR を使用します。
.RE

.sp
.ne 2
.mk
.na
\fB\fB-f\fR \fIdatabase_file\fR\fR
.ad
.RS 20n
.rt  
データベースファイルのベース名として \fB\&.vacation\fR の代わりに \fIdatabase_file\fR を使用します。
.RE

.sp
.ne 2
.mk
.na
\fB\fB-j\fR\fR
.ad
.RS 20n
.rt  
受信者が \fBTo:\fR または \fBCc:\fR 行に存在するかどうかをチェックしません。警告: このオプションを使用すると、不在返信がメーリングリストやその他の不適切な場所に送信される場合があります。そのため、このオプションを使用することは決してお勧めできません。
.RE

.sp
.ne 2
.mk
.na
\fB\fB-m\fR \fImessage_file\fR\fR
.ad
.RS 20n
.rt  
返信のために送信するメッセージとして \fB~/.vacation.msg\fR の代わりに \fB~/\fImessage_file\fR\fR を使用します。\fImessage_file\fR は、目的の不在返信メッセージファイルへの相対パスです。ホームディレクトリやファイルの「見つかりません」というエラーを回避するために、\fImessage_file\fR は \fB~/.forward\fR と同じディスクパーティションに配置するようにしてください。
.RE

.sp
.ne 2
.mk
.na
\fB\fB-s\fR \fIsender\fR\fR
.ad
.RS 20n
.rt  
着信メッセージの UNIX の \fBFrom\fR 行から読み取られた値の代わりに \fIsender\fR に返信します。
.RE

.sp
.ne 2
.mk
.na
\fB\fB-t\fR\fIN\fR\fR
.ad
.RS 20n
.rt  
同じ送信者への繰り返し返信の間隔を変更します。デフォルトは 1 週間です。末尾の \fBs\fR、\fBm\fR、\fBh\fR、\fBd\fR、または \fBw\fR は、\fIN\fR をそれぞれ秒、分、時間、日、または週にスケール変更します。
.RE

.sp
.LP
\fB-l\fR オプションは、初期化でも構成でもなく、報告のために用意されています。また、\fB-f\fR オプションも \fB-l\fR と組み合わせて使用できます。
.sp
.ne 2
.mk
.na
\fB\fB-l\fR\fR
.ad
.RS 6n
.rt  
 \fBvacation -I\fR の最後の呼び出しのあとに返信が送信されたアドレスを、日付と時間のスタンプとともに一覧表示します。 
.RE

.SH 使用法
.sp
.LP
\fB\&.vacation.msg\fR には、少なくとも \fBSubject:\fR 行を含むヘッダーを含めるようにしてください (\fBTo:\fR 行を含めてはいけません)。例: 
.sp
.in +2
.nf
\fBSubject: I am on vacation
I am on vacation until July 22.  If you have something urgent,
please contact Joe Jones (jones@fB0).
   	--John\fR
.fi
.in -2
.sp

.sp
.LP
\fB\&.vacation.msg\fR ファイル内に文字列 \fB$SUBJECT\fR が存在する場合、その文字列は、返信が送信されるときに元のメッセージの件名に置き換えられます。そのため、次のような \fB\&.vacation.msg\fR ファイル
.sp
.in +2
.nf
\fBSubject: I am on vacation
I am on vacation until July 22.
Your mail regarding "$SUBJECT" will be read when I return.
If you have something urgent, please contact
Joe Jones (jones@fB0).
   	--John\fR
.fi
.in -2
.sp

.sp
.LP
では、メッセージの件名が返信に含まれます。
.sp
.LP
\fBTo:\fR または \fBCc:\fR 行に、元のメッセージが送信されたユーザーやそのユーザーの複数のエイリアスのいずれかが指定されていない場合、最初の \fBFrom\fR 行に文字列 \fB-REQUEST@\fR が含まれている場合、あるいはヘッダーに \fBPrecedence:\fR \fBbulk\fR \fBまたは\fR \fBPrecedence:\fR \fBjunk\fR 行が含まれている場合、メッセージは送信されません。
.sp
.LP
\fBvacation\fR はまた、\fBpostmaster\fR または \fBMailer-Daemon\fR からのメールにも返信しません。
.sp
.LP
上の条件に加えて、\fB\&.vacation.filter\fR ファイルが存在する場合は、返信が送信される一連のアドレスをさらに制約するためにそのファイルが使用されます。そのファイル内の各行は、ドメイン名、電子メールアドレス、否定されたドメイン名、否定された電子メールアドレスのいずれかにするようにしてください。否定された行は、\fB!\fR の 1 文字で始まります。
.sp
.LP
各行は、指定されている順序で送信者アドレスに対して比較されます。電子メールアドレスを含む行が一致するのは、送信者アドレスが大文字と小文字の区別 (これは無視されます) を除いてまったく同じである場合です。ドメイン名を含む行が一致するのは、送信者アドレスが \fIsomething\fR\fB@\fR\fIdomain-name\fR または \fIsomething\fR\fB@\fR\fIsomething.domain-name\fR である場合です。返信が送信されるのは、最初に一致したものが否定されていないエントリである場合です。最初に一致したものが否定されたエントリであるか、または一致する行が存在しない場合、返信は送信されません。
.sp
.LP
サンプルのフィルタファイルは次のようになります。
.sp
.in +2
.nf
!host.subdomain.sun.com
sun.com
!wife@mydomain.com
mydomain.com
onefriend@hisisp.com
anotherfriend@herisp.com
.fi
.in -2
.sp

.sp
.LP
空白の行、および「\fB#\fR」で始まる行は無視されます。
.SH ファイル
.sp
.LP
\fB~/.forward\fR
.sp
.LP
\fB~/.vacation.filter\fR
.sp
.LP
\fB~/.vacation.msg\fR
.sp
.LP
送信者のリストは、ホームディレクトリ内の \fBdbm\fR 形式のファイル \fB\&.vacation.pag\fR および \fB\&.vacation.dir\fR 内に保持されます。これらのファイルは \fBdbm\fR ファイルであるため、テキストエディタで直接表示することはできません。
.SH 属性
.sp
.LP
属性についての詳細は、マニュアルページの \fBattributes\fR(5) を参照してください。
.sp

.sp
.TS
tab() box;
cw(2.75i) |cw(2.75i) 
lw(2.75i) |lw(2.75i) 
.
属性タイプ属性値
_
使用条件service/network/smtp/sendmail
.TE

.SH 関連項目
.sp
.LP
\fBvi\fR(1), \fBsendmail\fR(1M), \fBgetusershell\fR(3C), \fBaliases\fR(4), \fBshells\fR(4), \fBattributes\fR(5)
